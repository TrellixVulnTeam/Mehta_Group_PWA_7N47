!function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkMehta=self.webpackChunkMehta||[]).push([[7368],{87368:function(e,o,i){"use strict";i.r(o),i.d(o,{ModelCameraPageModule:function(){return d}});var n,a=i(38583),s=i(90665),r=i(47823),c=i(12234),l=i(39182),g=i(88720),p=[{path:"",component:l.b}],u=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[c.Bz.forChild(p)],c.Bz]}),e}(),d=((n=function e(){t(this,e)}).\u0275fac=function(e){return new(e||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[a.ez,s.u5,r.Pc,u]]}),n)},39182:function(o,i,n){"use strict";n.d(i,{b:function(){return S}});var a=n(64762),s=n(91841),r=n(56544),c=n(88720),l=n(47823),g=n(14303),p=n(97905),u=n(20138),d=n(84267),f=n(39075),m=n(18345),h=n(38583);function v(e,t){1&e&&c._UZ(0,"br")}function b(e,t){if(1&e){var o=c.EpF();c.TgZ(0,"input",16),c.NdJ("change",function(e){return c.CHM(o),c.oxw(2).captureImg(e)}),c.qZA()}}function Z(e,t){if(1&e){var o=c.EpF();c.TgZ(0,"div",17),c.NdJ("click",function(){return c.CHM(o),c.oxw(2).pickImage()}),c.qZA()}}function y(e,t){if(1&e){var o=c.EpF();c.TgZ(0,"ion-row"),c.TgZ(1,"ion-col"),c.TgZ(2,"label",8),c._UZ(3,"ion-icon",9),c.TgZ(4,"p",10),c._uU(5,"Take a Snapshot"),c.qZA(),c.YNc(6,b,1,0,"input",11),c.YNc(7,Z,1,0,"div",12),c.qZA(),c.qZA(),c.TgZ(8,"ion-col",13),c.TgZ(9,"h1"),c._uU(10,"|"),c.qZA(),c.qZA(),c.TgZ(11,"ion-col"),c.TgZ(12,"label",8),c._UZ(13,"ion-icon",14),c.TgZ(14,"p",10),c._uU(15,"Select Image"),c.qZA(),c.TgZ(16,"input",15),c.NdJ("change",function(e){return c.CHM(o),c.oxw().captureImg(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(6),c.Q6J("ngIf",!(null!=i.platform&&i.platform.is("cordova"))),c.xp6(1),c.Q6J("ngIf",null==i.platform?null:i.platform.is("cordova"))}}function _(e,t){if(1&e){var o=c.EpF();c.TgZ(0,"ion-col",19),c.TgZ(1,"ion-button",20),c.NdJ("click",function(){var e=c.CHM(o).$implicit;return c.oxw(2).pgShoW(e)}),c._uU(2),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.Q6J("size",6),c.xp6(2),c.Oqu(null==i?null:i.button_text)}}function q(e,t){if(1&e&&(c.TgZ(0,"ion-row"),c.YNc(1,_,3,2,"ion-col",18),c.qZA()),2&e){var o=c.oxw();c.xp6(1),c.Q6J("ngForOf",o.pgShow)}}function w(e,t){1&e&&(c.TgZ(0,"div",21),c._UZ(1,"img",22),c.qZA())}function T(e,t){1&e&&(c.TgZ(0,"div",23),c._UZ(1,"img",24),c.qZA())}var S=function(){var o=function(){function o(e,i,n,a,s,r,c,l,g){t(this,o),this.modalController=e,this.apiServices=i,this.navParam=n,this.transfer=a,this.platform=s,this.file=r,this.camera=c,this.sanitizer=l,this.localStorage=g,this.files=[],this.win=window,this.RegistrationData=this.navParam.data.data,console.log(" this.RegistrationData",this.RegistrationData),console.log(" this.RegistrationData",this.navParam.data.data),null!=this.RegistrationData||""!=this.RegistrationData?(this.RegistrationData.nulldata?this.flag=this.RegistrationData.flag:this.RegistrationData.show_popup?this.pgShow=this.RegistrationData.show_popup:this.flag="5",console.log("1"),console.log(" this.RegistrationData",this.navParam.data.data),this.RequestFor=this.RegistrationData.requestFor,this.RequestPage=this.RegistrationData.requestPage):(console.log("2"),this.RequestFor="",this.RequestPage=""),console.log("this registrationData from profile upload page",this.RegistrationData)}var i,n,c;return i=o,(n=[{key:"ngOnInit",value:function(){}},{key:"close",value:function(){this.modalController.dismiss({dismissed:!0})}},{key:"pickImage",value:function(){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("cordova calling"),this.camera.getPicture({quality:40,cameraDirection:1,correctOrientation:!0,destinationType:this.camera.DestinationType.FILE_URI,sourceType:this.camera.PictureSourceType.CAMERA,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(function(e){console.log("imagePath==",e),t.currentName=e;var o=t.currentName.split("/");if(t.fileName=o[o.length-1],t.platform.is("ios")){var i=t.sanitizer.bypassSecurityTrustResourceUrl(t.win.Ionic.WebView.convertFileSrc(e));console.log("ios imagePath==",i)}t.uploadImageonserver()},function(e){console.log("imagePath error==",e)});case 1:case"end":return e.stop()}},e,this)}))}},{key:"uploadImageonserver",value:function(){var e=this;this.apiServices.presentLoadingDefault(),this.localStorage.getStorage().then(function(t){var o=r.n.baseUrl+r.n.imageUploadUrl;console.log("url",o),(new Headers).append("Content-Type","application/json");var i=e.currentName,n={fileKey:"file",fileName:e.fileName,chunkedMode:!1,mimeType:"multipart/form-data",params:{file:i,client_id:r.q.clientId,device:e.apiServices.device,device_id:t.deviceId,app_version:r.q.app_version,employee_id:t.allStoreData.user_id,request_page:e.RequestPage,user_type:t.allStoreData.employee_type,media_type:"1",flag_type:e.flag,request_for:e.RequestFor}};console.log("options",n),console.log("passing key==",JSON.stringify(n)),e.transfer.create().upload(i,o,n).then(function(t){console.log("server res==",t);var o=JSON.parse(t.response);console.log("response==",t),console.log("response22==",o),e.apiServices.presentLoadingClose(),1==o.success?(e.modalController.dismiss({dismissed:!0,data:o.data}),e.apiServices.showToastMessage(o.message,"top",3e3,"greenBg")):console.log("message key==",o.message)},function(t){e.apiServices.presentLoadingClose(),console.log("err==",t),e.apiServices.showToastMessage(JSON.stringify(t),"top",3e3,"redBg")})})}},{key:"captureImg",value:function(e){var t=this;this.apiServices.presentLoadingDefault(),console.log("event1==>",e);var o=new FormData;if(e.target.files){var i=e.target.files[0];o.append("file",i),o.append("flag_type",this.flag),o.append("media_type","1"),o.append("request_for",this.RequestFor),o.append("request_page",this.RequestPage),console.log("formData==>",o),this.apiServices.mediaFileUpload(r.n.imageUploadUrl,o).subscribe(function(e){switch(console.log("Multi File upload res==> ",JSON.stringify(e)),e.type){case s.dt.Sent:console.log("Request has been made!");break;case s.dt.ResponseHeader:console.log("Response header has been received!");break;case s.dt.Response:var n=e.body,a=new FileReader;a.readAsDataURL(i),a.onload=function(){console.log(a.result),o.append("file",t.files),console.log("this.currentObj==>",t.currentObj),t.apiServices.presentLoadingClose(),t.modalController.dismiss({dismissed:!0,data:n.data})}}},function(e){t.apiServices.presentLoadingClose(),t.apiServices.showToastMessage(JSON.stringify(e),"top",3e3,"redBg")})}}},{key:"pgShoW",value:function(e){this.modalController.dismiss({dismissed:!0,data:e})}}])&&e(i.prototype,n),c&&e(i,c),o}();return o.\u0275fac=function(e){return new(e||o)(c.Y36(l.IN),c.Y36(g.s),c.Y36(l.X1),c.Y36(p.K),c.Y36(l.t4),c.Y36(u.$),c.Y36(d.V1),c.Y36(f.H7),c.Y36(m.n))},o.\u0275cmp=c.Xpm({type:o,selectors:[["app-model-camera"]],decls:14,vars:5,consts:[[1,"content-bg"],[1,"ion-justify-content-center"],[1,"back"],[4,"ngIf"],[1,"circle"],["name","close",1,"circle_close",3,"click"],["class","banner",4,"ngIf"],["slot","fixed","style","bottom:0px;",4,"ngIf"],[1,"image-upload"],["name","camera-outline",1,"FooterCam","iconBorder"],[1,"activityClass"],["type","file","multiple","","accept","image/*","capture","",3,"change",4,"ngIf"],["class","overDiv","tappable","",3,"click",4,"ngIf"],["size","2"],["name","images-outline",1,"FooterCam","iconBorder"],["type","file","accept","image/*",3,"change"],["type","file","multiple","","accept","image/*","capture","",3,"change"],["tappable","",1,"overDiv",3,"click"],[3,"size",4,"ngFor","ngForOf"],[3,"size"],[1,"pgSo",3,"click"],[1,"banner"],["src","./assets/icon/Design 1.png"],["slot","fixed",2,"bottom","0px"],["src","./assets/icon/Design 1.png",1,"banner_bg"]],template:function(e,t){1&e&&(c.TgZ(0,"ion-content",0),c.TgZ(1,"ion-row",1),c.TgZ(2,"ion-col",2),c.TgZ(3,"ion-grid"),c.YNc(4,v,1,0,"br",3),c.YNc(5,y,17,2,"ion-row",3),c._UZ(6,"br"),c.YNc(7,q,2,1,"ion-row",3),c._UZ(8,"br"),c.TgZ(9,"ion-row"),c.TgZ(10,"ion-col",4),c.TgZ(11,"ion-icon",5),c.NdJ("click",function(){return t.close()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(12,w,2,0,"div",6),c.YNc(13,T,2,0,"div",7),c.qZA()),2&e&&(c.xp6(4),c.Q6J("ngIf",null==t.platform?null:t.platform.is("mobile")),c.xp6(1),c.Q6J("ngIf",!t.pgShow),c.xp6(2),c.Q6J("ngIf",t.pgShow),c.xp6(5),c.Q6J("ngIf",null==t.platform?null:t.platform.is("desktop")),c.xp6(1),c.Q6J("ngIf",null==t.platform?null:t.platform.is("mobile")))},directives:[l.W2,l.Nd,l.wI,l.jY,h.O5,l.gu,h.sg,l.YG],styles:[".image-upload[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none}.iconBorder[_ngcontent-%COMP%]{font-size:80px;color:#b01d22}.circle[_ngcontent-%COMP%], ion-col[_ngcontent-%COMP%]{text-align:center}.circle_close[_ngcontent-%COMP%]{font-size:40px;color:#b01d22;border:2px solid #b01d22;border-radius:50%}ion-grid[_ngcontent-%COMP%]{padding:0}h1[_ngcontent-%COMP%]{font-size:40px}.pgSo[_ngcontent-%COMP%]{width:100%;text-transform:capitalize;--border-radius:10px;--background:#b01d22}.overDiv[_ngcontent-%COMP%]{position:absolute;z-index:9;left:0;top:0;bottom:0;right:0}.banner_bg[_ngcontent-%COMP%]{-o-object-fit:contain;object-fit:contain;height:auto;width:100%}"]}),o}()}}])}();