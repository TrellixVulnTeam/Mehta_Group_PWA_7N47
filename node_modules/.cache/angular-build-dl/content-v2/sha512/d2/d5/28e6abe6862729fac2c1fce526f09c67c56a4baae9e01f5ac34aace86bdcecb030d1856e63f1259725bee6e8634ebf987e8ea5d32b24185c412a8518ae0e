!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(self.webpackChunkMehta=self.webpackChunkMehta||[]).push([[3714],{43714:function(n,i,o){"use strict";o.r(i),o.d(i,{BuyitemPageModule:function(){return D}});var r=o(38583),a=o(90665),s=o(47823),c=o(12234),l=o(64762),u=o(26023),d=o(56544),p=o(88720),g=o(51532),h=o(14303);function f(e,t){if(1&e&&(p.TgZ(0,"ion-row"),p.TgZ(1,"ion-col",9),p.TgZ(2,"p",10),p._uU(3),p.qZA(),p.qZA(),p.qZA()),2&e){var n=p.oxw();p.xp6(1),p.Q6J("size",12),p.xp6(2),p.Oqu(null==n.addres||null==n.addres.data?null:n.addres.data.title)}}function m(e,t){if(1&e&&(p.TgZ(0,"ion-col",9),p.TgZ(1,"p",12),p._uU(2),p.qZA(),p.TgZ(3,"p",12),p._uU(4),p.qZA(),p.TgZ(5,"p",12),p._uU(6),p.qZA(),p._UZ(7,"br"),p.qZA()),2&e){var n=p.oxw().$implicit;p.Q6J("size",12),p.xp6(2),p.Oqu(null==n?null:n.address_line1),p.xp6(2),p.Oqu(null==n?null:n.address_line2),p.xp6(2),p.AsE("",null==n?null:n.city,"-",null==n?null:n.pin_code,"")}}function _(e,t){if(1&e&&(p.TgZ(0,"ion-row"),p.YNc(1,m,8,5,"ion-col",11),p.qZA()),2&e){var n=t.$implicit;p.xp6(1),p.Q6J("ngIf","1"==(null==n?null:n.is_primary))}}function v(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"div",7),p.TgZ(1,"ion-button",13),p.NdJ("click",function(){return p.CHM(n),p.oxw().changeAddress()}),p._uU(2),p.qZA(),p._UZ(3,"br"),p.qZA()}if(2&e){var i=p.oxw();p.xp6(2),p.Oqu(null==i.addres||null==i.addres.data?null:i.addres.data.btn_text)}}function y(e,t){1&e&&(p.TgZ(0,"ion-row"),p.TgZ(1,"ion-col",14),p.TgZ(2,"p",10),p._uU(3,"Item redeemed"),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(1),p.Q6J("size",12))}function x(e,t){if(1&e&&(p.TgZ(0,"ion-row"),p.TgZ(1,"ion-col",7),p.TgZ(2,"h5",15),p._uU(3),p.qZA(),p.qZA(),p.qZA()),2&e){var n=p.oxw();p.xp6(3),p.Oqu(n.msg)}}function q(e,t){if(1&e&&(p.TgZ(0,"ion-col",21),p._UZ(1,"img",22),p.qZA()),2&e){var n=p.oxw().$implicit;p.Q6J("size",3),p.xp6(1),p.Q6J("src",null==n?null:n.good_image,p.LSH)}}function b(e,t){if(1&e&&(p.TgZ(0,"ion-col",23),p.TgZ(1,"p",12),p._uU(2),p.qZA(),p.TgZ(3,"p",12),p._uU(4),p.qZA(),p.qZA()),2&e){var n=p.oxw().$implicit;p.Q6J("size",8),p.xp6(2),p.Oqu(null==n?null:n.goods_name),p.xp6(2),p.Oqu(null==n?null:n.good_point)}}function Z(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"ion-row",16),p.YNc(1,q,2,2,"ion-col",17),p.YNc(2,b,5,3,"ion-col",18),p.TgZ(3,"ion-col",19),p.TgZ(4,"ion-icon",20),p.NdJ("click",function(){var e=p.CHM(n).$implicit;return p.oxw().closeBtn(e)}),p.qZA(),p.qZA(),p.qZA()}if(2&e){var i=p.oxw();p.xp6(1),p.Q6J("ngIf",""==i.msg),p.xp6(1),p.Q6J("ngIf",""==i.msg),p.xp6(1),p.Q6J("size",1)}}function w(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"ion-button",24),p.NdJ("click",function(){return p.CHM(n),p.oxw().doneUpdate()}),p._uU(1,"Done"),p.qZA()}}function z(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"ion-button",24),p.NdJ("click",function(){return p.CHM(n),p.oxw().modalcall()}),p._uU(1,"Redeem"),p.qZA()}}var C,A,k=[{path:"",component:(C=function(){function n(t,i,o,r,a,s,c){e(this,n),this.modalCtrl=t,this.alertController=i,this.popoverController=o,this.sendData=r,this.route=a,this.apiService=s,this.zone=c,this.num=1,this.showDonebutt=0,this.cart_detail=[]}var i,o,r;return i=n,(o=[{key:"ionViewWillEnter",value:function(){this.cart_req=this.sendData.cart_request,this.showAddress(),this.buyitem(this.item_details)}},{key:"ngOnInit",value:function(){this.redeem_for=this.sendData.redeem_for,console.log("redeem_for",this.redeem_for),this.allocationData=this.sendData.alldata,this.item_details=this.sendData.itemDetails,console.log("this.allocationData",this.allocationData),console.log("this.item_details",this.item_details)}},{key:"ionViewWillLeave",value:function(){}},{key:"minus",value:function(e){0!=e.quantity&&(e.quantity=JSON.parse(e.quantity),e.quantity=e.quantity-1,this.cart_req="buy",this.showDonebutt=1)}},{key:"closeBtn",value:function(e){0!=e.quantity&&(e.quantity=JSON.parse(e.quantity),e.quantity=e.quantity-1,this.cart_req="buy",this.alertRemoveProduct())}},{key:"alertRemoveProduct",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"my-custom-class",message:"Are you sure?",buttons:[{text:"No",role:"cancel",cssClass:"secondary",handler:function(e){console.log("Confirm Cancel: blah")}},{text:"Yes",handler:function(){n.doneUpdate(),console.log("Confirm Okay")}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"plus",value:function(e){e.quantity=parseInt(e.quantity)+1,this.cart_req="buy",this.showDonebutt=1}},{key:"buyitem",value:function(e){var t=this;this.zone.run(function(){return(0,l.mG)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n={request_page:"dealer",redeem_for:this.redeem_for,cart_request:this.cart_req,request_for:this.allocationData.customer_id,request_user_type:this.allocationData.employee_type,product_arr:[{product_id:e.product_id,count:e.quantity}]},console.log("item.product_id ,item.quantity ",e.quantity,e.quantity),this.apiService.apiCallWithLoginToken(d.n.CartUrl,n).subscribe(function(e){1==e.success?(i.cart_details=e.data,console.log("this is ",i.cart_details),i.msg=""):i.msg=e.message},function(e){i.apiService.showToastMessage(JSON.stringify(e),"top",3e3,"redBg")});case 2:case"end":return t.stop()}},t,this)}))})}},{key:"itemDetailsShow",value:function(){var e=this;this.zone.run(function(){return(0,l.mG)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.apiService.apiCallWithLoginToken(d.n.ProductDetailUrl,{request_page:"dealer",redeem_for:this.redeem_for,product_id:this.item_details.auto_id,page_request_type:this.sendData.page_request_type}).subscribe(function(e){t.temparray=e.data,1==e.success||t.apiService.showToastMessage(e.message,"top",3e3,"redBg")},function(e){t.apiService.showToastMessage(JSON.stringify(e),"top",3e3,"redBg")});case 1:case"end":return e.stop()}},e,this)}))})}},{key:"modalcall",value:function(){this.sendData.cartDetails=this.cart_details,console.log(" this.cart_details",this.cart_detail),0!=this.addres.data.data.length?(this.sendData.address_id=this.addres.data.data[0].auto_id,this.presentAlertConfirm()):this.apiService.showToastMessage("Address is Required","top",2e3,"redBg")}},{key:"callModal",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:u.f,cssClass:"my-custom-class"});case 2:return(t=e.sent).onDidDismiss().then(function(e){console.log("data returned after dismiss modal==",e),null!==e&&n.route.navigate(["/purchasehistory"])}),this.sendData.alldata={request_for:this.allocationData.customer_id,request_user_type:this.allocationData.employee_type},this.sendData.item=this.redeem_for,e.next=8,t.present();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}))}},{key:"presentAlertConfirm",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"my-custom-class",message:"Are you sure, you want to redeem?",buttons:[{text:"No",role:"cancel",cssClass:"secondary",handler:function(e){console.log("Confirm Cancel: blah")}},{text:"Yes",handler:function(){n.callModal(),console.log("Confirm Okay")}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"showAddress",value:function(){var e=this;this.apiService.presentLoadingDefault(),this.zone.run(function(){e.apiService.apiCallWithLoginToken(d.n.AddressUrl,{address_fetch_type:"deliver",redeem_for:e.redeem_for,request_page:"dealer",request_for:e.allocationData.customer_id,request_user_type:e.allocationData.employee_type}).subscribe(function(t){console.log("AddressUrl: ",t),e.apiService.presentLoadingClose(),e.addres=t},function(t){e.apiService.presentLoadingClose(),e.apiService.showToastMessage(JSON.stringify(t),"top",3e3,"redBg")})})}},{key:"changeAddress",value:function(){""==this.allocationData.customer_id?(this.sendData.alldata={customer_id:"",request_page:this.redeem_for,employee_type:""},this.route.navigate(["/change-address"])):(this.sendData.alldata={customer_id:this.allocationData.customer_id,request_page:this.redeem_for,employee_type:this.allocationData.employee_type},this.route.navigate(["/change-address"]))}},{key:"doneUpdate",value:function(){var e=this;this.apiService.presentLoadingDefault(),this.cart_detail=[];for(var t=0;t<this.cart_details.length;t++)this.cart_details[t].count=this.cart_details[t].quantity,this.cart_detail.push(this.cart_details[t]);this.zone.run(function(){return(0,l.mG)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={request_page:"dealer",redeem_for:this.redeem_for,cart_request:this.cart_req,product_arr:this.cart_detail,request_for:this.allocationData.customer_id,request_user_type:this.allocationData.employee_type},console.log("apikey : ",t),console.log("product_arr:",this.cart_detail),this.apiService.apiCallWithLoginToken(d.n.CartUrl,t).subscribe(function(e){n.apiService.presentLoadingClose(),1==e.success?(n.showDonebutt=0,n.cart_details=e.data,n.msg=""):(n.msg=e.message,n.cart_details=[])},function(e){n.apiService.presentLoadingClose(),n.apiService.showToastMessage(JSON.stringify(e),"top",3e3,"redBg")});case 2:case"end":return e.stop()}},e,this)}))})}}])&&t(i.prototype,o),r&&t(i,r),n}(),C.\u0275fac=function(e){return new(e||C)(p.Y36(s.IN),p.Y36(s.Br),p.Y36(s.Dh),p.Y36(g.b),p.Y36(c.F0),p.Y36(h.s),p.Y36(p.R0b))},C.\u0275cmp=p.Xpm({type:C,selectors:[["app-buyitem"]],decls:21,vars:9,consts:[["slot","start"],[1,"ion-padding"],["sizexs","12","size-md","8","size-lg","8","push-md","2","push-lg","2",1,"whiteCol","ion-no-padding",3,"size"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","ion-text-center",4,"ngIf"],["class","brbottom",4,"ngFor","ngForOf"],[1,"ion-text-center"],["class","ionic_btn1",3,"click",4,"ngIf"],["sizexs","12","size-md","12","size-lg","12",1,"brbottom",3,"size"],[1,"para"],["sizexs","12","size-md","12","size-lg","12","class","brbottom",3,"size",4,"ngIf"],[1,"para1"],[1,"ionic_btnic",3,"click"],["size-xs","12","size-md","12","size-lg","12",1,"brbottom",3,"size"],[1,"no-margin",2,"color","#B01D22"],[1,"brbottom"],["sizexs","3","size-md","3","size-lg","3",3,"size",4,"ngIf"],["sizexs","8","size-md","8","size-lg","8",3,"size",4,"ngIf"],["sizexs","1","size-md","1","size-lg","1",1,"autoMargin",3,"size"],["name","close",1,"circle_close",3,"click"],["sizexs","3","size-md","3","size-lg","3",3,"size"],["onerror","this.src='assets/watermark/watermark.png'",1,"imgcss",3,"src"],["sizexs","8","size-md","8","size-lg","8",3,"size"],[1,"ionic_btn1",3,"click"]],template:function(e,t){1&e&&(p.TgZ(0,"ion-header"),p.TgZ(1,"ion-toolbar"),p.TgZ(2,"ion-title"),p._uU(3,"Redeem"),p.qZA(),p.TgZ(4,"ion-buttons",0),p._UZ(5,"ion-back-button"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(6,"ion-content",1),p.TgZ(7,"ion-row"),p.TgZ(8,"ion-col",2),p.YNc(9,f,4,2,"ion-row",3),p.YNc(10,_,2,1,"ion-row",4),p._UZ(11,"br"),p.YNc(12,v,4,1,"div",5),p.YNc(13,y,4,1,"ion-row",3),p.YNc(14,x,4,1,"ion-row",3),p.YNc(15,Z,5,3,"ion-row",6),p._UZ(16,"br"),p.TgZ(17,"div",7),p.YNc(18,w,2,0,"ion-button",8),p.YNc(19,z,2,0,"ion-button",8),p.qZA(),p._UZ(20,"br"),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(8),p.Q6J("size",12),p.xp6(1),p.Q6J("ngIf",""!=(null==t.addres||null==t.addres.data?null:t.addres.data.title)),p.xp6(1),p.Q6J("ngForOf",null==t.addres||null==t.addres.data?null:t.addres.data.data),p.xp6(2),p.Q6J("ngIf",1==(null==t.addres||null==t.addres.data?null:t.addres.data.show_btn)),p.xp6(1),p.Q6J("ngIf",(null==t.cart_details?null:t.cart_details.length)>0),p.xp6(1),p.Q6J("ngIf",t.msg),p.xp6(1),p.Q6J("ngForOf",t.cart_details),p.xp6(3),p.Q6J("ngIf",1==t.showDonebutt&&!t.msg),p.xp6(1),p.Q6J("ngIf",0==t.showDonebutt&&!t.msg))},directives:[s.Gu,s.sr,s.wd,s.Sm,s.oU,s.cs,s.W2,s.Nd,s.wI,r.O5,r.sg,s.YG,s.gu],styles:[".para[_ngcontent-%COMP%]{color:gray;font-weight:700;font-size:17px}.para[_ngcontent-%COMP%], .para1[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:4px}.para1[_ngcontent-%COMP%]{font-size:12px}.para2[_ngcontent-%COMP%]{font-size:16px;color:red;margin-top:4px;margin-bottom:4px}.brbottom[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3}.numcss[_ngcontent-%COMP%]{border:1px solid red;border-radius:10px;text-align:center;font-size:14px;padding:1px 15px}.txtend[_ngcontent-%COMP%]{text-align:end}.mrauto[_ngcontent-%COMP%]{margin:auto}.ionic_btnic[_ngcontent-%COMP%]{--background:#f7d716;--border-radius:5px;width:auto;text-transform:capitalize}.ionic_btn1[_ngcontent-%COMP%], .ionic_btnic[_ngcontent-%COMP%]{height:30px;font-size:14px;color:#000;font-weight:700}.ionic_btn1[_ngcontent-%COMP%]{--background:#9ff1ff;--border-radius:5px;width:30%;text-transform:none}"]}),C)}],T=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[c.Bz.forChild(k)],c.Bz]}),t}(),D=((A=function t(){e(this,t)}).\u0275fac=function(e){return new(e||A)},A.\u0275mod=p.oAB({type:A}),A.\u0275inj=p.cJS({imports:[[r.ez,a.u5,s.Pc,T]]}),A)}}])}();