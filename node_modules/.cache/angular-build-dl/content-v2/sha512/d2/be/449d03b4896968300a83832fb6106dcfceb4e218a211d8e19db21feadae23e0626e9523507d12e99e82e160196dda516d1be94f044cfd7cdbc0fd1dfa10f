(self.webpackChunkMehta=self.webpackChunkMehta||[]).push([[2490],{39182:function(e,t,i){"use strict";i.d(t,{b:function(){return v}});var o=i(64762),n=i(91841),a=i(56544),s=i(88720),r=i(47823),c=i(14303),l=i(97905),g=i(20138),p=i(84267),d=i(39075),h=i(18345),u=i(38583);function m(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"input",16),s.NdJ("change",function(t){return s.CHM(e),s.oxw(2).captureImg(t)}),s.qZA()}}function f(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",17),s.NdJ("click",function(){return s.CHM(e),s.oxw(2).pickImage()}),s.qZA()}}function Z(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-row"),s.TgZ(1,"ion-col"),s.TgZ(2,"label",8),s._UZ(3,"ion-icon",9),s.TgZ(4,"p",10),s._uU(5,"Take a Snapshot"),s.qZA(),s.YNc(6,m,1,0,"input",11),s.YNc(7,f,1,0,"div",12),s.qZA(),s.qZA(),s.TgZ(8,"ion-col",13),s.TgZ(9,"h1"),s._uU(10,"|"),s.qZA(),s.qZA(),s.TgZ(11,"ion-col"),s.TgZ(12,"label",8),s._UZ(13,"ion-icon",14),s.TgZ(14,"p",10),s._uU(15,"Select Image"),s.qZA(),s.TgZ(16,"input",15),s.NdJ("change",function(t){return s.CHM(e),s.oxw().captureImg(t)}),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(6),s.Q6J("ngIf",!(null!=e.platform&&e.platform.is("cordova"))),s.xp6(1),s.Q6J("ngIf",null==e.platform?null:e.platform.is("cordova"))}}function b(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-col",19),s.TgZ(1,"ion-button",20),s.NdJ("click",function(){const t=s.CHM(e).$implicit;return s.oxw(2).pgShoW(t)}),s._uU(2),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit;s.Q6J("size",6),s.xp6(2),s.Oqu(null==e?null:e.button_text)}}function _(e,t){if(1&e&&(s.TgZ(0,"ion-row"),s.YNc(1,b,3,2,"ion-col",18),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.pgShow)}}const q=function(e){return{banner:e}};let v=(()=>{class e{constructor(e,t,i,o,n,a,s,r,c){this.modalController=e,this.apiServices=t,this.navParam=i,this.transfer=o,this.platform=n,this.file=a,this.camera=s,this.sanitizer=r,this.localStorage=c,this.files=[],this.win=window,this.RegistrationData=this.navParam.data.data,console.log(" this.RegistrationData",this.RegistrationData),console.log(" this.RegistrationData",this.navParam.data.data),null!=this.RegistrationData||""!=this.RegistrationData?(this.RegistrationData.nulldata?this.flag=this.RegistrationData.flag:this.RegistrationData.show_popup?this.pgShow=this.RegistrationData.show_popup:this.flag="5",console.log("1"),console.log(" this.RegistrationData",this.navParam.data.data),this.RequestFor=this.RegistrationData.requestFor,this.RequestPage=this.RegistrationData.requestPage):(console.log("2"),this.RequestFor="",this.RequestPage=""),console.log("this registrationData from profile upload page",this.RegistrationData)}ngOnInit(){}close(){this.modalController.dismiss({dismissed:!0})}pickImage(){return(0,o.mG)(this,void 0,void 0,function*(){console.log("cordova calling"),this.camera.getPicture({quality:40,cameraDirection:1,correctOrientation:!0,destinationType:this.camera.DestinationType.FILE_URI,sourceType:this.camera.PictureSourceType.CAMERA,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(e=>{console.log("imagePath==",e),this.currentName=e;let t=this.currentName.split("/");if(this.fileName=t[t.length-1],this.platform.is("ios")){let t=this.sanitizer.bypassSecurityTrustResourceUrl(this.win.Ionic.WebView.convertFileSrc(e));console.log("ios imagePath==",t)}this.uploadImageonserver()},e=>{console.log("imagePath error==",e)})})}uploadImageonserver(){this.apiServices.presentLoadingDefault(),this.localStorage.getStorage().then(e=>{var t=a.n.baseUrl+a.n.imageUploadUrl;console.log("url",t),(new Headers).append("Content-Type","application/json");var i=this.currentName;let o={fileKey:"file",fileName:this.fileName,chunkedMode:!1,mimeType:"multipart/form-data",params:{file:i,client_id:a.q.clientId,device:this.apiServices.device,device_id:e.deviceId,app_version:a.q.app_version,employee_id:e.allStoreData.user_id,request_page:this.RequestPage,user_type:e.allStoreData.employee_type,media_type:"1",flag_type:this.flag,request_for:this.RequestFor}};console.log("options",o),console.log("passing key==",JSON.stringify(o)),this.transfer.create().upload(i,t,o).then(e=>{console.log("server res==",e);let t=JSON.parse(e.response);console.log("response==",e),console.log("response22==",t),this.apiServices.presentLoadingClose(),1==t.success?(this.modalController.dismiss({dismissed:!0,data:t.data}),this.apiServices.showToastMessage(t.message,"top",3e3,"greenBg")):console.log("message key==",t.message)},e=>{this.apiServices.presentLoadingClose(),console.log("err==",e),this.apiServices.showToastMessage(JSON.stringify(e),"top",3e3,"redBg")})})}captureImg(e){this.apiServices.presentLoadingDefault(),console.log("event1==>",e);var t=new FormData;if(e.target.files){const i=e.target.files[0];t.append("file",i),t.append("flag_type",this.flag),t.append("media_type","1"),t.append("request_for",this.RequestFor),t.append("request_page",this.RequestPage),console.log("formData==>",t),this.apiServices.mediaFileUpload(a.n.imageUploadUrl,t).subscribe(e=>{switch(console.log("Multi File upload res==> ",JSON.stringify(e)),e.type){case n.dt.Sent:console.log("Request has been made!");break;case n.dt.ResponseHeader:console.log("Response header has been received!");break;case n.dt.Response:let o=e.body;const a=new FileReader;a.readAsDataURL(i),a.onload=()=>{console.log(a.result),t.append("file",this.files),console.log("this.currentObj==>",this.currentObj),this.apiServices.presentLoadingClose(),this.modalController.dismiss({dismissed:!0,data:o.data})}}},e=>{this.apiServices.presentLoadingClose(),this.apiServices.showToastMessage(JSON.stringify(e),"top",3e3,"redBg")})}}pgShoW(e){this.modalController.dismiss({dismissed:!0,data:e})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(r.IN),s.Y36(c.s),s.Y36(r.X1),s.Y36(l.K),s.Y36(r.t4),s.Y36(g.$),s.Y36(p.V1),s.Y36(d.H7),s.Y36(h.n))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-model-camera"]],decls:11,vars:5,consts:[[1,"content-bg"],[1,"ion-justify-content-center"],[1,"back"],[1,"circle"],["name","close",1,"circle_close",3,"click"],[4,"ngIf"],[3,"ngClass"],["src","assets/icon/Design 1.png",1,"banner_bg"],[1,"image-upload"],["name","camera-outline",1,"FooterCam","iconBorder"],[1,"activityClass"],["type","file","multiple","","accept","image/x-png,image/jpeg","capture","",3,"change",4,"ngIf"],["class","overDiv","tappable","",3,"click",4,"ngIf"],["size","2"],["name","images-outline",1,"FooterCam","iconBorder"],["type","file","accept","image/x-png,image/jpeg",3,"change"],["type","file","multiple","","accept","image/x-png,image/jpeg","capture","",3,"change"],["tappable","",1,"overDiv",3,"click"],[3,"size",4,"ngFor","ngForOf"],[3,"size"],[1,"pgSo",3,"click"]],template:function(e,t){1&e&&(s.TgZ(0,"ion-content",0),s.TgZ(1,"ion-row",1),s.TgZ(2,"ion-col",2),s.TgZ(3,"ion-grid"),s.TgZ(4,"ion-row"),s.TgZ(5,"ion-col",3),s.TgZ(6,"ion-icon",4),s.NdJ("click",function(){return t.close()}),s.qZA(),s.qZA(),s.qZA(),s.YNc(7,Z,17,2,"ion-row",5),s.YNc(8,_,2,1,"ion-row",5),s.qZA(),s.TgZ(9,"div",6),s._UZ(10,"img",7),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(7),s.Q6J("ngIf",!t.pgShow),s.xp6(1),s.Q6J("ngIf",t.pgShow),s.xp6(1),s.Q6J("ngClass",s.VKq(3,q,t.platform.width()<740)))},directives:[r.W2,r.Nd,r.wI,r.jY,r.gu,u.O5,u.mk,u.sg,r.YG],styles:[".image-upload[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none}.iconBorder[_ngcontent-%COMP%]{font-size:80px;color:#b01d22}ion-col[_ngcontent-%COMP%]{text-align:center}.circle[_ngcontent-%COMP%]{text-align:right;padding:0}.circle_close[_ngcontent-%COMP%]{font-size:30px;color:#b01d22}.back[_ngcontent-%COMP%], ion-grid[_ngcontent-%COMP%]{padding:0}h1[_ngcontent-%COMP%]{font-size:40px}.pgSo[_ngcontent-%COMP%]{width:100%;text-transform:capitalize;--border-radius:10px;--background:#b01d22}.overDiv[_ngcontent-%COMP%]{position:absolute;z-index:9;left:0;top:0;bottom:0;right:0}"]}),e})()},2490:function(e,t,i){"use strict";i.r(t),i.d(t,{ProfileUploadPageModule:function(){return y}});var o=i(38583),n=i(90665),a=i(47823),s=i(12234),r=i(64762),c=i(39182),l=i(56544),g=i(88720),p=i(84267),d=i(20138),h=i(59865),u=i(14303),m=i(51532);function f(e,t){1&e&&g._UZ(0,"img",20)}function Z(e,t){if(1&e&&g._UZ(0,"img",21),2&e){const e=g.oxw();g.Q6J("src",e.userImg,g.LSH)}}const b=function(e){return{"content-bg":e}},_=function(e){return{boundary1:e}},q=function(e){return{banner:e}},v=[{path:"",component:(()=>{class e{constructor(e,t,i,o,n,a,s,r,c,l,g,p){this.camera=e,this.actionSheetController=t,this.file=i,this.zone=o,this.location=n,this.route=a,this.platform=s,this.filePath=r,this.apiService=c,this.modalCtrl=l,this.sendData=g,this.toastController=p,this.win=window,this.userImg="",this.files=[],this.croppedImagePath="",this.isLoading=!1,this.formData=[],this.imagePickerOptions={maximumImagesCount:1,quality:50},this.showImgOption=!1,this.registrationData=this.sendData.alldata,this.registrationData.requestFor="dealer"==this.registrationData.requestPage?this.registrationData.requestFor:"",console.log("1",this.registrationData),s.ready().then(()=>{console.log("Width: "+s.width()),console.log("Height: "+s.height())})}ngOnInit(){}next(){"dealer"==this.registrationData.requestPage?(this.sendData.alldata=this.registrationData,this.route.navigate(["/geolocation"])):this.route.navigate(["/tabs"])}skip(){this.zone.run(()=>{this.apiService.apiCallWithLoginToken(l.n.SkipUrl,{request_page:this.registrationData.requestPage,requested_module:"profile",request_for:this.registrationData.requestFor}).subscribe(e=>{1==e.success?"dealer"==this.registrationData.requestPage?(this.sendData.alldata=this.registrationData,this.route.navigate(["/geolocation"])):(console.log("gotoHome"),this.route.navigateByUrl("/tabs")):this.apiService.showToastMessage(e.message,"top",3e3,"redBg")},e=>{this.apiService.showToastMessage(JSON.stringify(e),"top",3e3,"redBg")})})}back(){let e={request_page:this.registrationData.requestPage,frompage:"back"};this.sendData.alldata=this.registrationData.requestFor,this.sendData.registrationType=e,setTimeout(()=>{this.location.back()},1e3)}pickImage(e){return(0,r.mG)(this,void 0,void 0,function*(){const t={quality:100,sourceType:e,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE},i=yield this.camera.getPicture(t),o=i.substr(i.lastIndexOf("/")+1),n=i.substr(0,i.lastIndexOf("/")+1),a=this.file.dataDirectory;yield this.file.copyFile(n,o,a,o),this.win.ionic.webview.convertFileSrc(a+o)})}selectImage(e){return(0,r.mG)(this,void 0,void 0,function*(){console.log("selectImage cordova"),this.currentObj=e;const t=yield this.actionSheetController.create({header:"Select Image source",buttons:[{text:"Load from Library",handler:()=>{this.pickImage(this.camera.PictureSourceType.PHOTOLIBRARY)}},{text:"Use Camera",handler:()=>{this.pickImage(this.camera.PictureSourceType.CAMERA)}},{text:"Cancel",role:"cancel"}]});yield t.present()})}openSelectImageOpt(e){return(0,r.mG)(this,void 0,void 0,function*(){if(console.log("selectImage browser"),this.currentObj=e,0==this.showImgOption){this.showImgOption=!0;const e=yield this.modalCtrl.create({component:c.b,componentProps:{data:this.registrationData},cssClass:"my-custom-class"});return e.onDidDismiss().then(e=>{null!==e?(this.UplaodData=e.data,this.dataReturned=e.data.data,console.log(" this.dataReturned:",this.dataReturned),this.userImg=this.dataReturned.filebaseUrl,null==this.userImg&&(this.userImg=""),console.log("data:",this.userImg)):this.userImg=""}),yield e.present()}this.showImgOption=!1})}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(p.V1),g.Y36(a.BX),g.Y36(d.$),g.Y36(g.R0b),g.Y36(o.Ye),g.Y36(s.F0),g.Y36(a.t4),g.Y36(h.y),g.Y36(u.s),g.Y36(a.IN),g.Y36(m.b),g.Y36(a.yF))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-profile-upload"]],decls:38,vars:13,consts:[[3,"ngClass"],[1,"ion-justify-content-center"],["size-xl","6","size-md","8","size-xs","12",3,"ngClass"],["src","assets/icon/Bandhan Logo.png",2,"width","150px"],[1,"col"],["src","assets/icon/abc.png",2,"width","130px","text-align","right"],["size","8",1,"simple"],[1,"para"],["size","4",1,"simple1"],[1,"para1",3,"click"],[3,"size"],[1,"relativeDiv"],["class","profile_image centerData","src","assets/icon/Group 14078.png",4,"ngIf"],["class","profile_image centerData dottedBorder userImageUpload",3,"src",4,"ngIf"],["name","add-circle","tappable","",1,"plushIcon","centerData",3,"click"],[2,"text-align","right","padding","20px"],[1,"ionic_btn","butt",3,"click"],[2,"text-align","left","padding","20px"],[1,"ionic_btn",3,"disabled","click"],["src","assets/icon/Design 1.png",1,"banner_bg"],["src","assets/icon/Group 14078.png",1,"profile_image","centerData"],[1,"profile_image","centerData","dottedBorder","userImageUpload",3,"src"]],template:function(e,t){1&e&&(g.TgZ(0,"ion-content",0),g.TgZ(1,"ion-row",1),g.TgZ(2,"ion-col",2),g.TgZ(3,"ion-grid"),g.TgZ(4,"ion-row"),g.TgZ(5,"ion-col"),g._UZ(6,"img",3),g.qZA(),g.TgZ(7,"ion-col",4),g._UZ(8,"img",5),g.qZA(),g.qZA(),g._UZ(9,"br"),g.qZA(),g.TgZ(10,"ion-row"),g.TgZ(11,"ion-col",6),g.TgZ(12,"p",7),g._uU(13,"Upload Profile Picture"),g.qZA(),g.qZA(),g.TgZ(14,"ion-col",8),g.TgZ(15,"p",9),g.NdJ("click",function(){return t.skip()}),g._uU(16,"Skip"),g.qZA(),g.qZA(),g.qZA(),g._UZ(17,"br"),g._UZ(18,"br"),g.TgZ(19,"ion-row"),g.TgZ(20,"ion-col",10),g.TgZ(21,"div",11),g.YNc(22,f,1,0,"img",12),g.YNc(23,Z,1,1,"img",13),g.TgZ(24,"ion-icon",14),g.NdJ("click",function(){return t.openSelectImageOpt("img")}),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g._UZ(25,"br"),g._UZ(26,"br"),g._UZ(27,"br"),g._UZ(28,"br"),g.TgZ(29,"div",0),g.TgZ(30,"ion-row"),g.TgZ(31,"ion-col",15),g.TgZ(32,"ion-button",16),g.NdJ("click",function(){return t.back()}),g._uU(33,"Back"),g.qZA(),g.qZA(),g.TgZ(34,"ion-col",17),g.TgZ(35,"ion-button",18),g.NdJ("click",function(){return t.next()}),g._uU(36,"Next"),g.qZA(),g.qZA(),g.qZA(),g._UZ(37,"img",19),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.Q6J("ngClass",g.VKq(7,b,t.platform.width()<740)),g.xp6(2),g.Q6J("ngClass",g.VKq(9,_,t.platform.width()>740)),g.xp6(18),g.Q6J("size",12),g.xp6(2),g.Q6J("ngIf",""==t.userImg),g.xp6(1),g.Q6J("ngIf",""!=t.userImg),g.xp6(6),g.Q6J("ngClass",g.VKq(11,q,t.platform.width()<740)),g.xp6(6),g.Q6J("disabled",""==t.userImg))},directives:[a.W2,o.mk,a.Nd,a.wI,a.jY,o.O5,a.gu,a.YG],styles:[".col[_ngcontent-%COMP%]{text-align:end}.para[_ngcontent-%COMP%]{font-weight:700}.para[_ngcontent-%COMP%], .para1[_ngcontent-%COMP%]{color:#b01d22}.para1[_ngcontent-%COMP%]{text-align:end}.profile[_ngcontent-%COMP%]{width:140px;height:150px;padding:15px;position:relative;border:dotted;border-radius:71px;border-color:#b01d22}.banner_bg[_ngcontent-%COMP%]{margin-top:-66px;left:0;width:100%;display:block}.profile_image[_ngcontent-%COMP%]{width:150px}.simple[_ngcontent-%COMP%]{padding:0 0 0 12px}.simple1[_ngcontent-%COMP%]{padding:0 8px 0 0}.plushIcon[_ngcontent-%COMP%]{margin-top:-21px;color:#b01d22;font-size:3rem;border:dotted;border-radius:30px}.userImageUpload[_ngcontent-%COMP%]{border-radius:50%;height:150px;border:3px dotted #b01d22;-o-object-fit:cover;object-fit:cover}.hiddenDiv[_ngcontent-%COMP%]{display:none!important}"]}),e})()}];let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[s.Bz.forChild(v)],s.Bz]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[o.ez,n.u5,a.Pc,T]]}),e})()}}]);