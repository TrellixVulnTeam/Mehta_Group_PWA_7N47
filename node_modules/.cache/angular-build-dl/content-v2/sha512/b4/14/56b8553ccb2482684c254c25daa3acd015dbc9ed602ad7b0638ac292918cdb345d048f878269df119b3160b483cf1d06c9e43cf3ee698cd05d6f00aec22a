!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(self.webpackChunkMehta=self.webpackChunkMehta||[]).push([[6162],{68539:function(n,i,o){"use strict";o.r(i),o.d(i,{PurchasehistoryPageModule:function(){return A}});var r=o(38583),a=o(90665),s=o(47823),c=o(12234),l=o(64762),u=o(56544),p=o(88720),g=o(51532),f=o(21511),h=o(14303);function d(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"ion-back-button",9),p.NdJ("click",function(){return p.CHM(n),p.oxw().hometab()}),p.qZA()}}function m(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"ion-back-button",9),p.NdJ("click",function(){return p.CHM(n),p.oxw().goBack()}),p.qZA()}}function v(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"ion-back-button",9),p.NdJ("click",function(){return p.CHM(n),p.oxw().close()}),p.qZA()}}function _(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"ion-back-button",9),p.NdJ("click",function(){return p.CHM(n),p.oxw().back()}),p.qZA()}}function b(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"p",15),p._uU(1),p.TgZ(2,"span",9),p.NdJ("click",function(){p.CHM(n);var t=p.oxw().$implicit;return p.oxw().copy(null==t?null:t.tracking_val)}),p._uU(3),p._UZ(4,"ion-icon",19),p.qZA(),p.qZA()}if(2&t){var i=p.oxw().$implicit;p.xp6(1),p.hij("",null==i?null:i.tracking_id," "),p.xp6(2),p.Oqu(null==i?null:i.tracking_val)}}function k(t,e){if(1&t&&p._UZ(0,"p",20),2&t){var n=p.oxw().$implicit;p.Q6J("innerHTML",null==n?null:n.tracking_url,p.oJD)}}function x(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"ion-col",21),p.TgZ(1,"ion-button",22),p.NdJ("click",function(){p.CHM(n);var t=p.oxw().$implicit;return p.oxw().modalcall(t)}),p._uU(2),p.qZA(),p.qZA()}if(2&t){var i=p.oxw().$implicit;p.Q6J("size",4),p.xp6(2),p.Oqu(i.button_text)}}function Z(t,e){if(1&t&&(p.TgZ(0,"ion-row",10),p.TgZ(1,"ion-col",11),p._UZ(2,"img",12),p.qZA(),p.TgZ(3,"ion-col",13),p.TgZ(4,"p",14),p._uU(5),p.qZA(),p.TgZ(6,"p",15),p._uU(7),p.qZA(),p.TgZ(8,"p",15),p._uU(9),p.qZA(),p.TgZ(10,"p",15),p._uU(11),p.qZA(),p.TgZ(12,"p",15),p._uU(13),p.qZA(),p.YNc(14,b,5,2,"p",16),p.YNc(15,k,1,1,"p",17),p.qZA(),p.YNc(16,x,3,2,"ion-col",18),p.qZA()),2&t){var n=e.$implicit;p.xp6(1),p.Q6J("size",3),p.xp6(1),p.Q6J("src",n.media,p.LSH),p.xp6(1),p.Q6J("size",5),p.xp6(2),p.Oqu(n.goods_name),p.xp6(2),p.Oqu(null==n?null:n.order_txt),p.xp6(2),p.AsE("",null==n?null:n.quantity_str,": ",null==n?null:n.product_quantity,""),p.xp6(2),p.AsE("",null==n?null:n.point_str,": ",null==n?null:n.product_points,""),p.xp6(2),p.AsE("",null==n?null:n.sts_str,": ",n.status,""),p.xp6(1),p.Q6J("ngIf",""!=(null==n?null:n.tracking_val)),p.xp6(1),p.Q6J("ngIf",""!=(null==n?null:n.tracking_url)),p.xp6(1),p.Q6J("ngIf","true"==(null==n?null:n.button_applicable))}}function w(t,e){if(1&t&&(p.TgZ(0,"div"),p._UZ(1,"img",23),p.qZA()),2&t){var n=p.oxw();p.xp6(1),p.Q6J("src",n.errorImage,p.LSH)}}function y(t,e){if(1&t&&(p.TgZ(0,"div"),p.TgZ(1,"p",24),p._uU(2),p.qZA(),p.qZA()),2&t){var n=p.oxw();p.xp6(2),p.Oqu(n.errorMessage)}}function q(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"ion-infinite-scroll",25),p.NdJ("ionInfinite",function(t){return p.CHM(n),p.oxw().loadData(t)}),p._UZ(1,"ion-infinite-scroll-content",26),p.qZA()}}var z,T,I=[{path:"",component:(z=function(){function n(e,i,o,r,a,s,c){t(this,n),this.router=e,this.sendData=i,this.route=o,this._clipboardService=r,this.location=a,this.apiService=s,this.zone=c,this.arrr=[],this.value=0,this.infiniteScroll_call=!1,this.allocationData=this.sendData.alldata,console.log("all locationData==",this.allocationData),this.arrr=[],this.value=0,this.backKey=this.sendData.alldata.backKey,console.log("back button key==",this.backKey)}var i,o,r;return i=n,(o=[{key:"ionViewWillLeave",value:function(){this.sendData.itemDetails={product_id:"",quantity:""}}},{key:"ngOnInit",value:function(){this.purchaseHIst(null)}},{key:"copy",value:function(t){this._clipboardService.copy(t),this.apiService.showToastMessage("Copied","top",3e3,"greenBg")}},{key:"close",value:function(){var t=this;this.zone.run(function(){return(0,l.mG)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.route.navigate(["./customer-details"]);case 1:case"end":return t.stop()}},t,this)}))})}},{key:"hometab",value:function(){var t=this;this.zone.run(function(){return(0,l.mG)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.route.navigate(["./tabs/home"]);case 1:case"end":return t.stop()}},t,this)}))})}},{key:"goBack",value:function(){var t=this;this.zone.run(function(){return(0,l.mG)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.location.back();case 1:case"end":return t.stop()}},t,this)}))})}},{key:"modalcall",value:function(t){var e=this;console.log("itemss: ",t),this.zone.run(function(){return(0,l.mG)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.sendData.itemDetails={auto_id:t.product_id,request_page:this.allocationData.employee_type,request_for:this.allocationData.customer_id},""!=this.allocationData.customer_id?(this.sendData.redeem_for="other",this.sendData.cart_request="customer"):(this.sendData.redeem_for="self",this.sendData.cart_request="dealer"),console.log("798:",this.sendData.itemDetails),this.sendData.page_request_type="detail",this.router.navigate(["/itemdetail"]);case 1:case"end":return e.stop()}},e,this)}))})}},{key:"purchaseHIst",value:function(t){var e=this;null==t&&this.apiService.presentLoadingDefault(),this.apiService.presentLoadingDefault(),this.zone.run(function(){return(0,l.mG)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.apiService.apiCallWithLoginToken(u.n.PurchaseHistoryUrl,{value:this.value,request_page:this.allocationData.request_page,request_for:this.allocationData.customer_id}).subscribe(function(e){null==t?n.apiService.presentLoadingClose():t.target.complete(),n.apiService.presentLoadingClose(),n.title=e.page_title,1==e.success||"1"==e.success?(n.arrr=null==n.arrr?e.data:n.arrr.concat(e.data),n.errorMessage="",n.errorImage=""):0==n.value?n.errorImage=e.noDataImage:n.errorMessage=e.message,1==n.infiniteScroll_call&&n.stopInfiniteScroll()},function(t){n.apiService.showToastMessage(JSON.stringify(t),"top",3e3,"redBg"),1==n.infiniteScroll_call&&n.stopInfiniteScroll()});case 1:case"end":return e.stop()}},e,this)}))})}},{key:"doRefresh",value:function(t){console.log("Begin async operation"),this.purchaseHIst(t)}},{key:"back",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.zone.run(function(){return(0,l.mG)(e,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:""!=this.allocationData.customer_id?(this.sendData.alldata={customer_id:this.allocationData.customer_id,employee_type:this.allocationData.employee_type},this.router.navigateByUrl("/pointsgiftlist",{replaceUrl:!0})):(this.sendData.alldata={customer_id:"",employee_type:""},this.router.navigateByUrl("/pointsgiftlist",{replaceUrl:!0}));case 1:case"end":return t.stop()}},t,this)}))});case 1:case"end":return t.stop()}},t,this)}))}},{key:"loadData",value:function(t){var e=this;this.infiniteScroll_call=!0,this.infiniteScroll_val=t,setTimeout(function(){e.value=e.arrr.length,e.purchaseHIst(null)},500)}},{key:"stopInfiniteScroll",value:function(){1==this.infiniteScroll_call&&(this.infiniteScroll_call=!1,this.infiniteScroll_val.target.complete())}}])&&e(i.prototype,o),r&&e(i,r),n}(),z.\u0275fac=function(t){return new(t||z)(p.Y36(c.F0),p.Y36(g.b),p.Y36(c.F0),p.Y36(f.Yv),p.Y36(r.Ye),p.Y36(h.s),p.Y36(p.R0b))},z.\u0275cmp=p.Xpm({type:z,selectors:[["app-purchasehistory"]],decls:19,vars:10,consts:[["slot","start"],["tappable","",3,"click",4,"ngIf"],[1,"ion-padding"],["slot","fixed",3,"ionRefresh"],["sizexs","12","size-md","8","size-lg","8","push-md","2","push-lg","2",1,"whiteCol","ion-no-padding",3,"size"],[1,"bgWalletImage",2,"background-image","url('assets/Other Icons/Banner.svg')"],["class","borderBtmDiv",4,"ngFor","ngForOf"],[4,"ngIf"],["threshold","100px",3,"ionInfinite",4,"ngIf"],["tappable","",3,"click"],[1,"borderBtmDiv"],["sizexs","3","size-md","3","size-lg","3",3,"size"],["onerror","this.src='assets/watermark/watermark.png'",1,"imgcss",3,"src"],["sizexs","5","size-md","7","size-lg","7",1,"autoMargin",3,"size"],[1,"para","bo"],[1,"para"],["class","para",4,"ngIf"],["class","para","style","white-space: nowrap;",3,"innerHTML",4,"ngIf"],["sizexs","4","size-md","2","size-lg","2","class","autoMargin ion-text-center",3,"size",4,"ngIf"],["name","copy-outline"],[1,"para",2,"white-space","nowrap",3,"innerHTML"],["sizexs","4","size-md","2","size-lg","2",1,"autoMargin","ion-text-center",3,"size"],["tappable","","color","danger",1,"ionic_btn",2,"width","92%","font-size","12px",3,"click"],[3,"src"],[1,"ion-text-center"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."]],template:function(t,e){1&t&&(p.TgZ(0,"ion-header"),p.TgZ(1,"ion-toolbar"),p.TgZ(2,"ion-title"),p._uU(3),p.qZA(),p.TgZ(4,"ion-buttons",0),p.YNc(5,d,1,0,"ion-back-button",1),p.YNc(6,m,1,0,"ion-back-button",1),p.YNc(7,v,1,0,"ion-back-button",1),p.YNc(8,_,1,0,"ion-back-button",1),p.qZA(),p.qZA(),p.qZA(),p.TgZ(9,"ion-content",2),p.TgZ(10,"ion-refresher",3),p.NdJ("ionRefresh",function(t){return e.doRefresh(t)}),p._UZ(11,"ion-refresher-content"),p.qZA(),p.TgZ(12,"ion-row"),p.TgZ(13,"ion-col",4),p._UZ(14,"div",5),p.YNc(15,Z,17,14,"ion-row",6),p.YNc(16,w,2,1,"div",7),p.qZA(),p.qZA(),p.YNc(17,y,3,1,"div",7),p.YNc(18,q,2,0,"ion-infinite-scroll",8),p.qZA()),2&t&&(p.xp6(3),p.Oqu(e.title),p.xp6(2),p.Q6J("ngIf","home"==e.backKey),p.xp6(1),p.Q6J("ngIf","back2"==e.backKey),p.xp6(1),p.Q6J("ngIf","back1"==e.backKey),p.xp6(1),p.Q6J("ngIf","back"==e.backKey),p.xp6(5),p.Q6J("size",12),p.xp6(2),p.Q6J("ngForOf",e.arrr),p.xp6(1),p.Q6J("ngIf",""!=e.errorImage),p.xp6(1),p.Q6J("ngIf",""!=e.errorMessage),p.xp6(1),p.Q6J("ngIf",""==e.errorMessage))},directives:[s.Gu,s.sr,s.wd,s.Sm,r.O5,s.W2,s.nJ,s.Wo,s.Nd,s.wI,r.sg,s.oU,s.cs,s.gu,s.YG,s.ju,s.MB],styles:[".para[_ngcontent-%COMP%]{margin-top:3px;margin-bottom:3px;font-size:14px;-webkit-user-select:auto}.imgcss[_ngcontent-%COMP%]{height:100px;width:100%;-o-object-fit:contain;object-fit:contain}.purch[_ngcontent-%COMP%]{color:red;font-size:14px;padding-left:10px}.bo[_ngcontent-%COMP%], .purch[_ngcontent-%COMP%]{font-weight:700}.bgWalletImage[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:cover;padding:5px;background-position:50%}"]}),z)}],D=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[c.Bz.forChild(I)],c.Bz]}),e}(),A=((T=function e(){t(this,e)}).\u0275fac=function(t){return new(t||T)},T.\u0275mod=p.oAB({type:T}),T.\u0275inj=p.cJS({imports:[[r.ez,a.u5,s.Pc,D]]}),T)}}])}();