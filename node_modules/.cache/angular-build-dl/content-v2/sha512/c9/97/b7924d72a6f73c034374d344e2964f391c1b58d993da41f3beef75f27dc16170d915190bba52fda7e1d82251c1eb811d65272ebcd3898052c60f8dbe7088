!function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkMehta=self.webpackChunkMehta||[]).push([[7368],{87368:function(e,i,n){"use strict";n.r(i),n.d(i,{ModelCameraPageModule:function(){return d}});var o,a=n(38583),s=n(90665),r=n(47823),c=n(12234),l=n(39182),g=n(88720),p=[{path:"",component:l.b}],u=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[c.Bz.forChild(p)],c.Bz]}),e}(),d=((o=function e(){t(this,e)}).\u0275fac=function(e){return new(e||o)},o.\u0275mod=g.oAB({type:o}),o.\u0275inj=g.cJS({imports:[[a.ez,s.u5,r.Pc,u]]}),o)},39182:function(i,n,o){"use strict";o.d(n,{b:function(){return b}});var a=o(64762),s=o(91841),r=o(56544),c=o(88720),l=o(47823),g=o(14303),p=o(97905),u=o(20138),d=o(84267),f=o(39075),m=o(18345),h=o(38583);function v(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"input",16),c.NdJ("change",function(e){return c.CHM(i),c.oxw(2).captureImg(e)}),c.qZA()}}function y(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",17),c.NdJ("click",function(){return c.CHM(i),c.oxw(2).pickImage()}),c.qZA()}}function Z(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"ion-row"),c.TgZ(1,"ion-col"),c.TgZ(2,"label",8),c._UZ(3,"ion-icon",9),c.TgZ(4,"p",10),c._uU(5,"Take a Snapshot"),c.qZA(),c.YNc(6,v,1,0,"input",11),c.YNc(7,y,1,0,"div",12),c.qZA(),c.qZA(),c.TgZ(8,"ion-col",13),c.TgZ(9,"h1"),c._uU(10,"|"),c.qZA(),c.qZA(),c.TgZ(11,"ion-col"),c.TgZ(12,"label",8),c._UZ(13,"ion-icon",14),c.TgZ(14,"p",10),c._uU(15,"Select Image"),c.qZA(),c.TgZ(16,"input",15),c.NdJ("change",function(e){return c.CHM(i),c.oxw().captureImg(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(6),c.Q6J("ngIf",!(null!=n.platform&&n.platform.is("cordova"))),c.xp6(1),c.Q6J("ngIf",null==n.platform?null:n.platform.is("cordova"))}}function q(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"ion-col",19),c.TgZ(1,"ion-button",20),c.NdJ("click",function(){var e=c.CHM(i).$implicit;return c.oxw(2).pgShoW(e)}),c._uU(2),c.qZA(),c.qZA()}if(2&e){var n=t.$implicit;c.Q6J("size",6),c.xp6(2),c.Oqu(null==n?null:n.button_text)}}function w(e,t){if(1&e&&(c.TgZ(0,"ion-row"),c.YNc(1,q,3,2,"ion-col",18),c.qZA()),2&e){var i=c.oxw();c.xp6(1),c.Q6J("ngForOf",i.pgShow)}}var _=function(e){return{banner:e}},b=function(){var i=function(){function i(e,n,o,a,s,r,c,l,g){t(this,i),this.modalController=e,this.apiServices=n,this.navParam=o,this.transfer=a,this.platform=s,this.file=r,this.camera=c,this.sanitizer=l,this.localStorage=g,this.files=[],this.win=window,this.RegistrationData=this.navParam.data.data,console.log(" this.RegistrationData",this.RegistrationData),console.log(" this.RegistrationData",this.navParam.data.data),null!=this.RegistrationData||""!=this.RegistrationData?(this.RegistrationData.nulldata?this.flag=this.RegistrationData.flag:this.RegistrationData.show_popup?this.pgShow=this.RegistrationData.show_popup:this.flag="5",console.log("1"),console.log(" this.RegistrationData",this.navParam.data.data),this.RequestFor=this.RegistrationData.requestFor,this.RequestPage=this.RegistrationData.requestPage):(console.log("2"),this.RequestFor="",this.RequestPage=""),console.log("this registrationData from profile upload page",this.RegistrationData)}var n,o,c;return n=i,(o=[{key:"ngOnInit",value:function(){}},{key:"close",value:function(){this.modalController.dismiss({dismissed:!0})}},{key:"pickImage",value:function(){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("cordova calling"),this.camera.getPicture({quality:40,cameraDirection:1,correctOrientation:!0,destinationType:this.camera.DestinationType.FILE_URI,sourceType:this.camera.PictureSourceType.CAMERA,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(function(e){console.log("imagePath==",e),t.currentName=e;var i=t.currentName.split("/");if(t.fileName=i[i.length-1],t.platform.is("ios")){var n=t.sanitizer.bypassSecurityTrustResourceUrl(t.win.Ionic.WebView.convertFileSrc(e));console.log("ios imagePath==",n)}t.uploadImageonserver()},function(e){console.log("imagePath error==",e)});case 1:case"end":return e.stop()}},e,this)}))}},{key:"uploadImageonserver",value:function(){var e=this;this.apiServices.presentLoadingDefault(),this.localStorage.getStorage().then(function(t){var i=r.n.baseUrl+r.n.imageUploadUrl;console.log("url",i),(new Headers).append("Content-Type","application/json");var n=e.currentName,o={fileKey:"file",fileName:e.fileName,chunkedMode:!1,mimeType:"multipart/form-data",params:{file:n,client_id:r.q.clientId,device:e.apiServices.device,device_id:t.deviceId,app_version:r.q.app_version,employee_id:t.allStoreData.user_id,request_page:e.RequestPage,user_type:t.allStoreData.employee_type,media_type:"1",flag_type:e.flag,request_for:e.RequestFor}};console.log("options",o),console.log("passing key==",JSON.stringify(o)),e.transfer.create().upload(n,i,o).then(function(t){console.log("server res==",t);var i=JSON.parse(t.response);console.log("response==",t),console.log("response22==",i),e.apiServices.presentLoadingClose(),1==i.success?(e.modalController.dismiss({dismissed:!0,data:i.data}),e.apiServices.showToastMessage(i.message,"top",3e3,"greenBg")):console.log("message key==",i.message)},function(t){e.apiServices.presentLoadingClose(),console.log("err==",t),e.apiServices.showToastMessage(JSON.stringify(t),"top",3e3,"redBg")})})}},{key:"captureImg",value:function(e){var t=this;this.apiServices.presentLoadingDefault(),console.log("event1==>",e);var i=new FormData;if(e.target.files){var n=e.target.files[0];i.append("file",n),i.append("flag_type",this.flag),i.append("media_type","1"),i.append("request_for",this.RequestFor),i.append("request_page",this.RequestPage),console.log("formData==>",i),this.apiServices.mediaFileUpload(r.n.imageUploadUrl,i).subscribe(function(e){switch(console.log("Multi File upload res==> ",JSON.stringify(e)),e.type){case s.dt.Sent:console.log("Request has been made!");break;case s.dt.ResponseHeader:console.log("Response header has been received!");break;case s.dt.Response:var o=e.body,a=new FileReader;a.readAsDataURL(n),a.onload=function(){console.log(a.result),i.append("file",t.files),console.log("this.currentObj==>",t.currentObj),t.apiServices.presentLoadingClose(),t.modalController.dismiss({dismissed:!0,data:o.data})}}},function(e){t.apiServices.presentLoadingClose(),t.apiServices.showToastMessage(JSON.stringify(e),"top",3e3,"redBg")})}}},{key:"pgShoW",value:function(e){this.modalController.dismiss({dismissed:!0,data:e})}}])&&e(n.prototype,o),c&&e(n,c),i}();return i.\u0275fac=function(e){return new(e||i)(c.Y36(l.IN),c.Y36(g.s),c.Y36(l.X1),c.Y36(p.K),c.Y36(l.t4),c.Y36(u.$),c.Y36(d.V1),c.Y36(f.H7),c.Y36(m.n))},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-model-camera"]],decls:11,vars:5,consts:[[1,"content-bg"],[1,"ion-justify-content-center"],[1,"back"],[1,"circle"],["name","close",1,"circle_close",3,"click"],[4,"ngIf"],[3,"ngClass"],["src","assets/icon/Design 1.png",1,"banner_bg"],[1,"image-upload"],["name","camera-outline",1,"FooterCam","iconBorder"],[1,"activityClass"],["type","file","multiple","","accept","image/x-png,image/jpeg","capture","",3,"change",4,"ngIf"],["class","overDiv","tappable","",3,"click",4,"ngIf"],["size","2"],["name","images-outline",1,"FooterCam","iconBorder"],["type","file","accept","image/x-png,image/jpeg",3,"change"],["type","file","multiple","","accept","image/x-png,image/jpeg","capture","",3,"change"],["tappable","",1,"overDiv",3,"click"],[3,"size",4,"ngFor","ngForOf"],[3,"size"],[1,"pgSo",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"ion-content",0),c.TgZ(1,"ion-row",1),c.TgZ(2,"ion-col",2),c.TgZ(3,"ion-grid"),c.TgZ(4,"ion-row"),c.TgZ(5,"ion-col",3),c.TgZ(6,"ion-icon",4),c.NdJ("click",function(){return t.close()}),c.qZA(),c.qZA(),c.qZA(),c.YNc(7,Z,17,2,"ion-row",5),c.YNc(8,w,2,1,"ion-row",5),c.qZA(),c.TgZ(9,"div",6),c._UZ(10,"img",7),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Q6J("ngIf",!t.pgShow),c.xp6(1),c.Q6J("ngIf",t.pgShow),c.xp6(1),c.Q6J("ngClass",c.VKq(3,_,t.platform.width()<740)))},directives:[l.W2,l.Nd,l.wI,l.jY,l.gu,h.O5,h.mk,h.sg,l.YG],styles:[".image-upload[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none}.iconBorder[_ngcontent-%COMP%]{font-size:80px;color:#b01d22}ion-col[_ngcontent-%COMP%]{text-align:center}.circle[_ngcontent-%COMP%]{text-align:right;padding:0}.circle_close[_ngcontent-%COMP%]{font-size:30px;color:#b01d22}.back[_ngcontent-%COMP%], ion-grid[_ngcontent-%COMP%]{padding:0}h1[_ngcontent-%COMP%]{font-size:40px}.pgSo[_ngcontent-%COMP%]{width:100%;text-transform:capitalize;--border-radius:10px;--background:#b01d22}.overDiv[_ngcontent-%COMP%]{position:absolute;z-index:9;left:0;top:0;bottom:0;right:0}"]}),i}()}}])}();