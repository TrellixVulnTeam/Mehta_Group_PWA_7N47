(self.webpackChunkMehta=self.webpackChunkMehta||[]).push([[690],{40690:function(o,e,t){"use strict";t.r(e),t.d(e,{GeolocationPageModule:function(){return A}});var n=t(38583),i=t(90665),s=t(47823),r=t(12234),c=t(64762),l=t(56544),a=t(88720),g=t(87152),d=t(83046),u=t(14303),h=t(51532),p=t(34255);function Z(o,e){if(1&o&&(a.TgZ(0,"div"),a.TgZ(1,"ion-row"),a.TgZ(2,"ion-col"),a.TgZ(3,"p"),a._uU(4,"Your Location"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(5,"ion-row"),a.TgZ(6,"ion-col",18),a._UZ(7,"ion-icon",19),a.qZA(),a.TgZ(8,"ion-col",20),a._uU(9),a.qZA(),a.qZA(),a.qZA()),2&o){const o=a.oxw();a.xp6(9),a.Oqu(o.loc)}}const f=function(o){return{"content-bg":o}},m=function(o){return{boundary1:o}},q=function(o){return{banner:o}},b=[{path:"",component:(()=>{class o{constructor(o,e,t,n,i,s,r,c,l){this.zone=o,this.geolocation=e,this.route=t,this.platform=n,this.nativeGeocoder=i,this.apiService=s,this.sendData=r,this.diagnostic=c,this.alertController=l,this.profileAddCustomer=this.sendData.alldata,this.profileAddCustomer?(this.requestID=this.profileAddCustomer.requestFor,this.requestIDPage=this.profileAddCustomer.requestPage):(this.requestID="",this.requestIDPage=""),n.ready().then(()=>{console.log("Width: "+n.width()),console.log("Height: "+n.height())})}ngOnInit(){}locationAlert(){this.alertController.create({message:"Enable Location from device settings",backdropDismiss:!1,buttons:[{text:"ok",handler:()=>{console.log("Buy clicked")}}]}).then(o=>{o.present()})}getLocationFun(){return(0,c.mG)(this,void 0,void 0,function*(){this.platform.is("cordova")?this.diagnostic.isLocationEnabled().then(o=>{if(console.log("Location setting is enabled",o),!o)return console.log("The following error occurred: ",o),this.locationAlert(),!1;console.log("Location setting is "+(o?"enabled":"disabled")),console.log("The following enabled ",o),this.apiService.presentLoadingDefault(),this.zone.run(()=>(0,c.mG)(this,void 0,void 0,function*(){this.loc="",console.log("curr_pos4");let o=yield this.geolocation.getCurrentPosition();console.log("curr_pos",o.coords.latitude),console.log("curr_pos",o.coords.longitude),this.getGeoLocation(o.coords.latitude,o.coords.longitude)}))}):(this.apiService.presentLoadingDefault(),this.zone.run(()=>(0,c.mG)(this,void 0,void 0,function*(){this.loc="",console.log("curr_pos4");let o=yield this.geolocation.getCurrentPosition();console.log("curr_pos",o.coords.latitude),console.log("curr_pos",o.coords.longitude),this.getGeoLocation(o.coords.latitude,o.coords.longitude)})))})}getGeoLocation(o,e,t){return(0,c.mG)(this,void 0,void 0,function*(){if(this.apiService.presentLoadingClose(),navigator.geolocation){console.log("lat",o),console.log("lng",e),this.lat=o,this.lng=e;let n=yield new google.maps.Geocoder,i={latLng:yield new google.maps.LatLng(o,e)};yield n.geocode(i,(o,e)=>{if(console.log("main Array",o,e),e==google.maps.GeocoderStatus.OK){let e=o[0];this.userLocation=o[0],console.log("current Location",o[0]),console.log("loc: ",e.formatted_address),this.loc=e.formatted_address,this.zone.run(()=>{null!=e&&(this.userCity=e.formatted_address,"reverseGeocode"===t&&(this.latLngResult=e.formatted_address))})}})}})}reverseGeocode(o,e){this.platform.is("cordova")?this.nativeGeocoder.reverseGeocode(o,e,{useLocale:!0,maxResults:5}).then(o=>this.userLocationFromLatLng=o[0]).catch(o=>console.log(o)):this.getGeoLocation(o,e,"reverseGeocode")}forwardGeocode(o){this.platform.is("cordova")?this.nativeGeocoder.forwardGeocode(o,{useLocale:!0,maxResults:5}).then(o=>{this.zone.run(()=>{this.lat=o[0].latitude,this.lng=o[0].longitude})}).catch(o=>console.log(o)):(new google.maps.Geocoder).geocode({address:o},(o,e)=>{e==google.maps.GeocoderStatus.OK?this.zone.run(()=>{this.lat=o[0].geometry.location.lat(),this.lng=o[0].geometry.location.lng()}):alert("Error - "+o+" & Status - "+e)})}next(){this.zone.run(()=>{this.apiService.apiCallWithLoginToken(l.n.geoLocationUrl,{latitude:this.lat,longitude:this.lng,location_dump:this.userLocation,request_for:this.requestID,request_page:this.requestIDPage}).subscribe(o=>{1==o.success?this.route.navigate(["/tabs"]):this.apiService.showToastMessage(o.message,"top",3e3,"redBg")},o=>{this.apiService.showToastMessage(JSON.stringify(o),"top",3e3,"redBg")})})}}return o.\u0275fac=function(e){return new(e||o)(a.Y36(a.R0b),a.Y36(g.b),a.Y36(r.F0),a.Y36(s.t4),a.Y36(d.d),a.Y36(u.s),a.Y36(h.b),a.Y36(p.R),a.Y36(s.Br))},o.\u0275cmp=a.Xpm({type:o,selectors:[["app-geolocation"]],decls:36,vars:11,consts:[[3,"ngClass"],[1,"ion-justify-content-center"],["size-xl","6","size-md","8","size-xs","12",3,"ngClass"],["src","assets/icon/logo.svg",2,"width","150px"],[1,"col"],["src","assets/icon/abc.png",2,"width","130px","text-align","right"],[1,"para"],[1,"dev"],["tappable","",3,"click"],[1,"geoBox"],["size","1",1,"autoMargin"],["name","locate-outline",1,"geoIcon"],["size","11",1,"autoMargin"],[1,"detect","ion-no-margin"],[4,"ngIf"],[1,"ion-text-center"],["tappable","",1,"ionic_btn",3,"disabled","click"],["src","assets/icon/Design 1.png",1,"banner_bg"],["size","1"],["name","location-outline"],["size","11"]],template:function(o,e){1&o&&(a.TgZ(0,"ion-content",0),a.TgZ(1,"ion-row",1),a.TgZ(2,"ion-col",2),a.TgZ(3,"ion-grid"),a.TgZ(4,"ion-row"),a.TgZ(5,"ion-col"),a._UZ(6,"img",3),a.qZA(),a.TgZ(7,"ion-col",4),a._UZ(8,"img",5),a.qZA(),a.qZA(),a.qZA(),a.TgZ(9,"ion-row"),a.TgZ(10,"ion-col"),a.TgZ(11,"p",6),a.TgZ(12,"b"),a._uU(13,"Geo Location"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"ion-row"),a.TgZ(15,"ion-col"),a.TgZ(16,"p",7),a._uU(17,"Enable your device location "),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"ion-row",8),a.NdJ("click",function(){return e.getLocationFun()}),a.TgZ(19,"ion-col"),a.TgZ(20,"ion-row",9),a.TgZ(21,"ion-col",10),a._UZ(22,"ion-icon",11),a.qZA(),a.TgZ(23,"ion-col",12),a.TgZ(24,"p",13),a._uU(25,"Detect my location"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(26,Z,10,1,"div",14),a._UZ(27,"br"),a._UZ(28,"br"),a._UZ(29,"br"),a.TgZ(30,"div",0),a.TgZ(31,"ion-row"),a.TgZ(32,"ion-col",15),a.TgZ(33,"ion-button",16),a.NdJ("click",function(){return e.next()}),a._uU(34,"Next"),a.qZA(),a.qZA(),a.qZA(),a._UZ(35,"img",17),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&o&&(a.Q6J("ngClass",a.VKq(5,f,e.platform.width()<740)),a.xp6(2),a.Q6J("ngClass",a.VKq(7,m,e.platform.width()>740)),a.xp6(24),a.Q6J("ngIf",e.loc),a.xp6(4),a.Q6J("ngClass",a.VKq(9,q,e.platform.width()<740)),a.xp6(3),a.Q6J("disabled",!e.loc))},directives:[s.W2,n.mk,s.Nd,s.wI,s.jY,s.gu,n.O5,s.YG],styles:[".col[_ngcontent-%COMP%]{text-align:end}.para[_ngcontent-%COMP%]{margin-bottom:0;font-size:24px}.geoBox[_ngcontent-%COMP%]{border:1px solid var(--headerColor)}.geoIcon[_ngcontent-%COMP%]{font-size:20px}.detect[_ngcontent-%COMP%], .geoIcon[_ngcontent-%COMP%], .para[_ngcontent-%COMP%]{color:var(--headerColor)}.dev[_ngcontent-%COMP%]{font-size:19px}.banner_bg[_ngcontent-%COMP%]{left:0;width:100%;display:block;border-radius:10px}.blank[_ngcontent-%COMP%]{width:100%;height:100px}"]}),o})()}];let v=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({imports:[[r.Bz.forChild(b)],r.Bz]}),o})(),A=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({imports:[[n.ez,i.u5,s.Pc,v]]}),o})()}}]);