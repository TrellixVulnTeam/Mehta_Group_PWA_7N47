!function(){function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}(self.webpackChunkMehta=self.webpackChunkMehta||[]).push([[9727],{99727:function(e,i,o){"use strict";o.r(i),o.d(i,{CustomerAllocationPageModule:function(){return I}});var a=o(38583),r=o(90665),l=o(47823),s=o(12234),c=o(64762),u=o(56544),p=o(88720),f=o(14303),d=o(51532);function g(n,t){if(1&n){var e=p.EpF();p.TgZ(0,"ion-button",16),p.NdJ("click",function(){p.CHM(e);var n=p.oxw();return n.addCustomer(null==n.customerData||null==n.customerData.header_arr?null:n.customerData.header_arr.first_div)}),p._uU(1),p.qZA()}if(2&n){var i=p.oxw();p.xp6(1),p.hij(" ",null==i.customerData||null==i.customerData.header_arr||null==i.customerData.header_arr.first_div?null:i.customerData.header_arr.first_div.button_text,"")}}var m=function(n){return{widthtotalDiv:n}};function h(n,t){if(1&n){var e=p.EpF();p.TgZ(0,"ion-button",17),p.NdJ("click",function(){return p.CHM(e),p.oxw().transectionHistory()}),p._uU(1),p.qZA()}if(2&n){var i=p.oxw();p.Q6J("ngClass",p.VKq(2,m,null==i.platform?null:i.platform.is("mobile"))),p.xp6(1),p.Oqu(null==i.customerData||null==i.customerData.header_arr||null==i.customerData.header_arr.second_div?null:i.customerData.header_arr.second_div.button_text)}}function v(n,t){if(1&n&&p._UZ(0,"p",21),2&n){var e=p.oxw().$implicit;p.Q6J("innerHTML",null==e?null:e.remaining_points,p.oJD)}}function _(n,t){if(1&n){var e=p.EpF();p.TgZ(0,"ion-button",28),p.NdJ("click",function(){p.CHM(e);var n=p.oxw(2).$implicit;return p.oxw().view(n)}),p._uU(1),p.qZA()}if(2&n){var i=p.oxw(2).$implicit;p.xp6(1),p.Oqu(null==i?null:i.view_profile_btn)}}function x(n,t){if(1&n&&(p.TgZ(0,"ion-col",26),p.YNc(1,_,2,1,"ion-button",27),p.qZA()),2&n){var e=p.oxw().$implicit;p.xp6(1),p.Q6J("ngIf","1"==(null==e?null:e.view_profile_btn_applicable))}}function b(n,t){if(1&n){var e=p.EpF();p.TgZ(0,"ion-button",28),p.NdJ("click",function(){p.CHM(e);var n=p.oxw(2).$implicit;return p.oxw().allocated(n)}),p._uU(1),p.qZA()}if(2&n){var i=p.oxw(2).$implicit;p.xp6(1),p.Oqu(null==i?null:i.allocate_btn)}}function D(n,t){if(1&n&&(p.TgZ(0,"ion-col",26),p.YNc(1,b,2,1,"ion-button",27),p.qZA()),2&n){var e=p.oxw().$implicit;p.xp6(1),p.Q6J("ngIf","1"==(null==e?null:e.allocate_btn_applicable))}}function w(n,t){if(1&n){var e=p.EpF();p.TgZ(0,"ion-button",31),p.NdJ("click",function(){p.CHM(e);var n=p.oxw(2).$implicit;return p.oxw().view(n)}),p._uU(1),p.qZA()}if(2&n){var i=p.oxw(2).$implicit;p.xp6(1),p.Oqu(null==i?null:i.view_profile_btn)}}function Z(n,t){if(1&n){var e=p.EpF();p.TgZ(0,"ion-button",31),p.NdJ("click",function(){p.CHM(e);var n=p.oxw(2).$implicit;return p.oxw().allocated(n)}),p._uU(1),p.qZA()}if(2&n){var i=p.oxw(2).$implicit;p.xp6(1),p.Oqu(null==i?null:i.allocate_btn)}}function C(n,t){if(1&n&&(p.TgZ(0,"ion-col",29),p.YNc(1,w,2,1,"ion-button",30),p.YNc(2,Z,2,1,"ion-button",30),p.qZA()),2&n){var e=p.oxw().$implicit;p.Q6J("size",4),p.xp6(1),p.Q6J("ngIf","1"==(null==e?null:e.view_profile_btn_applicable)),p.xp6(1),p.Q6J("ngIf","1"==(null==e?null:e.allocate_btn_applicable))}}function z(n,t){if(1&n&&(p.TgZ(0,"ion-row",18),p.TgZ(1,"ion-col",19),p._UZ(2,"img",20),p.qZA(),p.TgZ(3,"ion-col",4),p._UZ(4,"p",21),p._UZ(5,"p",21),p.TgZ(6,"p",22),p._uU(7),p.qZA(),p.YNc(8,v,1,1,"p",23),p.qZA(),p.YNc(9,x,2,1,"ion-col",24),p.YNc(10,D,2,1,"ion-col",24),p.YNc(11,C,3,3,"ion-col",25),p.qZA()),2&n){var e=t.$implicit,i=p.oxw();p.xp6(1),p.Q6J("size",2),p.xp6(1),p.Q6J("src",null==e?null:e.user_image,p.LSH),p.xp6(1),p.Q6J("size",6),p.xp6(1),p.Q6J("innerHTML",null==e?null:e.full_name,p.oJD),p.xp6(1),p.Q6J("innerHTML",null==e?null:e.contact,p.oJD),p.xp6(2),p.AsE("",null==e?null:e.registration_sts,"",null==e?null:e.user_registration_status,""),p.xp6(1),p.Q6J("ngIf",""!=(null==e?null:e.remaining_points)),p.xp6(1),p.Q6J("ngIf",!(null!=i.platform&&i.platform.is("mobile"))),p.xp6(1),p.Q6J("ngIf",!(null!=i.platform&&i.platform.is("mobile"))),p.xp6(1),p.Q6J("ngIf",null==i.platform?null:i.platform.is("mobile"))}}function M(n,t){if(1&n&&(p.TgZ(0,"div"),p.TgZ(1,"p",32),p._uU(2),p.qZA(),p.qZA()),2&n){var e=p.oxw();p.xp6(2),p.Oqu(e.errorMessage)}}function J(n,t){if(1&n){var e=p.EpF();p.TgZ(0,"ion-infinite-scroll",33),p.NdJ("ionInfinite",function(n){return p.CHM(e),p.oxw().loadData(n)}),p._UZ(1,"ion-infinite-scroll-content",34),p.qZA()}}var T,k,q=[{path:"",component:(T=function(){function e(t,i,o,a,r,l,s){n(this,e),this.zone=t,this.modalCtrl=i,this.alertController=o,this.apiService=a,this.router=r,this.platform=l,this.sendData=s,this.searchString="",this.userData=[],this.infiniteScroll_call=!1,this.value=0}var i,o,a;return i=e,(o=[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){this.value=0,this.userData=[],this.customerAllocation(this.searchString)}},{key:"searchCustomer",value:function(n){console.log("ev",n),this.searchString=n.detail.value&&""!=n.detail.value?n.detail.value:"",console.log("ev",n),this.value=0,this.userData=[],this.customerAllocation(this.searchString)}},{key:"customerAllocation",value:function(n){var t=this;this.zone.run(function(){var e={search_str:n,value:t.value};console.log("login data response",e),t.apiService.apiCallWithLoginToken(u.n.customerAllocationUrl,e).subscribe(function(n){console.log("login data response",n),t.customerData=n,1==n.success?(t.userData=null==t.userData?n.data:t.userData.concat(n.data),t.errorMessage=""):t.errorMessage=n.message,1==t.infiniteScroll_call&&t.stopInfiniteScroll()},function(n){t.apiService.showToastMessage(JSON.stringify(n),"top",3e3,"redBg"),1==t.infiniteScroll_call&&t.stopInfiniteScroll()})})}},{key:"loadData",value:function(n){var t=this;this.infiniteScroll_call=!0,this.infiniteScroll_val=n,setTimeout(function(){t.value=t.userData.length,t.customerAllocation(t.searchString)},500)}},{key:"stopInfiniteScroll",value:function(){1==this.infiniteScroll_call&&(this.infiniteScroll_call=!1,this.infiniteScroll_val.target.complete())}},{key:"view",value:function(n){var t=this;this.zone.run(function(){t.sendData.alldata=n,t.sendData.myParam="customerCheck",t.router.navigate(["/customer-details"])})}},{key:"allocated",value:function(n){var t=this;this.zone.run(function(){t.sendData.alldata=n,t.router.navigate(["/allocate-point-form"])})}},{key:"transectionHistory",value:function(){var n=this;this.zone.run(function(){n.sendData.alldata={requestType:"dealer"},n.router.navigate(["./redemption-report"])})}},{key:"addCustomer",value:function(n){return(0,c.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.zone.run(function(){e.sendData.alldata={show_popup:["",n]},e.sendData.loginKey={type:"Register",requestPage:"dealer"},e.router.navigate(["/mobile"])});case 1:case"end":return t.stop()}},t,this)}))}}])&&t(i.prototype,o),a&&t(i,a),e}(),T.\u0275fac=function(n){return new(n||T)(p.Y36(p.R0b),p.Y36(l.IN),p.Y36(l.Br),p.Y36(f.s),p.Y36(s.F0),p.Y36(l.t4),p.Y36(d.b))},T.\u0275cmp=p.Xpm({type:T,selectors:[["app-customer-allocation"]],decls:21,vars:13,consts:[[1,"container1"],["size-sm","12","size-md","8","size-lg","8","push-lg","2","push-md","2",1,"whiteCol","ion-padding",3,"size"],[1,"fixedData"],[1,"customerPDiv",3,"innerHTML"],["size-sm","6","size-md","6","size-lg","6",3,"size"],[1,"act","ion-text-center"],[1,"ion-no-margin","fontTDiv",3,"innerHTML"],[1,"totalCount","ion-no-margin",3,"innerHTML"],["fill","outline","class","btnCustomer","shape","round","size","small","tappable","",3,"click",4,"ngIf"],["onerror","this.src='./assets/watermark/watermark.png'",1,"imgIcon",3,"src"],["tappable","","fill","outline","class","btnCustomer","shape","round","size","small",3,"ngClass","click",4,"ngIf"],[1,"borderBtmDiv","padd10"],["placeholder","Search Customer",3,"ngModel","ngModelChange","ionChange"],["class","borderBtmDiv",4,"ngFor","ngForOf"],[4,"ngIf"],["threshold","100px",3,"ionInfinite",4,"ngIf"],["fill","outline","shape","round","size","small","tappable","",1,"btnCustomer",3,"click"],["tappable","","fill","outline","shape","round","size","small",1,"btnCustomer",3,"ngClass","click"],[1,"borderBtmDiv"],["size-sm","2","size-md","2","size-lg","2",3,"size"],["onerror","this.src='./assets/watermark/watermark.png'",1,"userImageCss",3,"src"],[1,"ion-no-margin","fontDiv",3,"innerHTML"],[1,"ion-no-margin","fontDiv"],["class","ion-no-margin fontDiv",3,"innerHTML",4,"ngIf"],["size-md","2","size-lg","2","class","ion-text-center ion-no-padding autoMargin",4,"ngIf"],["size-sm","4","size-md","2","size-lg","2","class","ion-text-center ion-no-padding",3,"size",4,"ngIf"],["size-md","2","size-lg","2",1,"ion-text-center","ion-no-padding","autoMargin"],["class","viewButton","tappable","","size","small","color","danger",3,"click",4,"ngIf"],["tappable","","size","small","color","danger",1,"viewButton",3,"click"],["size-sm","4","size-md","2","size-lg","2",1,"ion-text-center","ion-no-padding",3,"size"],["class","viewButton widthtotalDiv","tappable","","color","danger","size","small",3,"click",4,"ngIf"],["tappable","","color","danger","size","small",1,"viewButton","widthtotalDiv",3,"click"],[1,"ion-text-center"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."]],template:function(n,t){1&n&&(p.TgZ(0,"ion-content"),p.TgZ(1,"div",0),p.TgZ(2,"ion-row"),p.TgZ(3,"ion-col",1),p.TgZ(4,"div",2),p._UZ(5,"p",3),p.TgZ(6,"ion-row"),p.TgZ(7,"ion-col",4),p.TgZ(8,"div",5),p._UZ(9,"p",6),p._UZ(10,"p",7),p.YNc(11,g,2,1,"ion-button",8),p.qZA(),p.qZA(),p.TgZ(12,"ion-col",4),p.TgZ(13,"div",5),p._UZ(14,"img",9),p.YNc(15,h,2,4,"ion-button",10),p.qZA(),p.qZA(),p.qZA(),p.TgZ(16,"div",11),p.TgZ(17,"ion-searchbar",12),p.NdJ("ngModelChange",function(n){return t.searchString=n})("ionChange",function(n){return t.searchCustomer(n)}),p.qZA(),p.qZA(),p.qZA(),p.YNc(18,z,12,11,"ion-row",13),p.qZA(),p.qZA(),p.YNc(19,M,3,1,"div",14),p.YNc(20,J,2,0,"ion-infinite-scroll",15),p.qZA(),p.qZA()),2&n&&(p.xp6(3),p.Q6J("size",12),p.xp6(2),p.Q6J("innerHTML",null==t.customerData?null:t.customerData.header_title,p.oJD),p.xp6(2),p.Q6J("size",6),p.xp6(2),p.Q6J("innerHTML",null==t.customerData||null==t.customerData.header_arr||null==t.customerData.header_arr.first_div?null:t.customerData.header_arr.first_div.title,p.oJD),p.xp6(1),p.Q6J("innerHTML",null==t.customerData||null==t.customerData.header_arr||null==t.customerData.header_arr.first_div?null:t.customerData.header_arr.first_div.total_customers,p.oJD),p.xp6(1),p.Q6J("ngIf",1==(null==t.customerData||null==t.customerData.header_arr||null==t.customerData.header_arr.first_div?null:t.customerData.header_arr.first_div.button_applicable)),p.xp6(1),p.Q6J("size",6),p.xp6(2),p.Q6J("src",null==t.customerData||null==t.customerData.header_arr||null==t.customerData.header_arr.second_div?null:t.customerData.header_arr.second_div.icon,p.LSH),p.xp6(1),p.Q6J("ngIf",1==(null==t.customerData||null==t.customerData.header_arr||null==t.customerData.header_arr.second_div?null:t.customerData.header_arr.second_div.button_applicable)),p.xp6(2),p.Q6J("ngModel",t.searchString),p.xp6(1),p.Q6J("ngForOf",t.userData),p.xp6(1),p.Q6J("ngIf",""!=t.errorMessage),p.xp6(1),p.Q6J("ngIf",""==t.errorMessage))},directives:[l.W2,l.Nd,l.wI,a.O5,l.VI,l.j9,r.JJ,r.On,a.sg,l.YG,a.mk,l.ju,l.MB],styles:[".act[_ngcontent-%COMP%]{background:linear-gradient(195deg,#bb2929 57%,var(--headerColor) 33%)!important;border-radius:8px;padding:10px;height:105px}.act[_ngcontent-%COMP%], .btnCustomer[_ngcontent-%COMP%]{text-transform:none;width:100%;color:#fff}.btnCustomer[_ngcontent-%COMP%]{font-size:12px;--border-color:#fff}.totalCount[_ngcontent-%COMP%]{font-weight:700;font-size:25px;letter-spacing:2px}.customerPDiv[_ngcontent-%COMP%]{color:var(--headerColor);margin-top:0}.imgIcon[_ngcontent-%COMP%]{height:40px;width:50px;-o-object-fit:contain;object-fit:contain;margin:auto;display:block}ion-icon[_ngcontent-%COMP%]{color:var(--headerColor);font-weight:700;font-size:20px}.viewButton[_ngcontent-%COMP%]{color:#fff;letter-spacing:0;text-transform:none}.userImageCss[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;-o-object-fit:cover;object-fit:cover;display:block;margin:auto}.fontDiv[_ngcontent-%COMP%]{font-size:13px;line-height:18px}ion-searchbar[_ngcontent-%COMP%]{--border-radius:20px;padding:2px;--box-shadow:0px 0px 7px 2px #d6d1d1}.padd10[_ngcontent-%COMP%]{padding:10px 0}.fontTDiv[_ngcontent-%COMP%]{font-size:16px}.container1[_ngcontent-%COMP%]{width:100%;margin:70px auto 0}"]}),T)}],A=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[s.Bz.forChild(q)],s.Bz]}),t}(),I=((k=function t(){n(this,t)}).\u0275fac=function(n){return new(n||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[[a.ez,r.u5,l.Pc,A]]}),k)}}])}();