!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(self.webpackChunkMehta=self.webpackChunkMehta||[]).push([[2490],{39182:function(t,i,o){"use strict";o.d(i,{b:function(){return w}});var a=o(64762),r=o(91841),s=o(56544),c=o(88720),l=o(47823),g=o(14303),p=o(97905),u=o(20138),d=o(84267),h=o(39075),f=o(18345),m=o(38583);function v(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"input",16),c.NdJ("change",function(e){return c.CHM(n),c.oxw(2).captureImg(e)}),c.qZA()}}function Z(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",17),c.NdJ("click",function(){return c.CHM(n),c.oxw(2).pickImage()}),c.qZA()}}function b(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"ion-row"),c.TgZ(1,"ion-col"),c.TgZ(2,"label",8),c._UZ(3,"ion-icon",9),c.TgZ(4,"p",10),c._uU(5,"Take a Snapshot"),c.qZA(),c.YNc(6,v,1,0,"input",11),c.YNc(7,Z,1,0,"div",12),c.qZA(),c.qZA(),c.TgZ(8,"ion-col",13),c.TgZ(9,"h1"),c._uU(10,"|"),c.qZA(),c.qZA(),c.TgZ(11,"ion-col"),c.TgZ(12,"label",8),c._UZ(13,"ion-icon",14),c.TgZ(14,"p",10),c._uU(15,"Select Image"),c.qZA(),c.TgZ(16,"input",15),c.NdJ("change",function(e){return c.CHM(n),c.oxw().captureImg(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(6),c.Q6J("ngIf",!(null!=i.platform&&i.platform.is("cordova"))),c.xp6(1),c.Q6J("ngIf",null==i.platform?null:i.platform.is("cordova"))}}function y(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"ion-col",19),c.TgZ(1,"ion-button",20),c.NdJ("click",function(){var e=c.CHM(n).$implicit;return c.oxw(2).pgShoW(e)}),c._uU(2),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.Q6J("size",6),c.xp6(2),c.Oqu(null==i?null:i.button_text)}}function _(e,t){if(1&e&&(c.TgZ(0,"ion-row"),c.YNc(1,y,3,2,"ion-col",18),c.qZA()),2&e){var n=c.oxw();c.xp6(1),c.Q6J("ngForOf",n.pgShow)}}var q=function(e){return{banner:e}},w=function(){var t=function(){function t(n,i,o,a,r,s,c,l,g){e(this,t),this.modalController=n,this.apiServices=i,this.navParam=o,this.transfer=a,this.platform=r,this.file=s,this.camera=c,this.sanitizer=l,this.localStorage=g,this.files=[],this.win=window,this.RegistrationData=this.navParam.data.data,console.log(" this.RegistrationData",this.RegistrationData),console.log(" this.RegistrationData",this.navParam.data.data),null!=this.RegistrationData||""!=this.RegistrationData?(this.RegistrationData.nulldata?this.flag=this.RegistrationData.flag:this.RegistrationData.show_popup?this.pgShow=this.RegistrationData.show_popup:this.flag="5",console.log("1"),console.log(" this.RegistrationData",this.navParam.data.data),this.RequestFor=this.RegistrationData.requestFor,this.RequestPage=this.RegistrationData.requestPage):(console.log("2"),this.RequestFor="",this.RequestPage=""),console.log("this registrationData from profile upload page",this.RegistrationData)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"close",value:function(){this.modalController.dismiss({dismissed:!0})}},{key:"pickImage",value:function(){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("cordova calling"),this.camera.getPicture({quality:40,cameraDirection:1,correctOrientation:!0,destinationType:this.camera.DestinationType.FILE_URI,sourceType:this.camera.PictureSourceType.CAMERA,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(function(e){console.log("imagePath==",e),t.currentName=e;var n=t.currentName.split("/");if(t.fileName=n[n.length-1],t.platform.is("ios")){var i=t.sanitizer.bypassSecurityTrustResourceUrl(t.win.Ionic.WebView.convertFileSrc(e));console.log("ios imagePath==",i)}t.uploadImageonserver()},function(e){console.log("imagePath error==",e)});case 1:case"end":return e.stop()}},e,this)}))}},{key:"uploadImageonserver",value:function(){var e=this;this.apiServices.presentLoadingDefault(),this.localStorage.getStorage().then(function(t){var n=s.n.baseUrl+s.n.imageUploadUrl;console.log("url",n),(new Headers).append("Content-Type","application/json");var i=e.currentName,o={fileKey:"file",fileName:e.fileName,chunkedMode:!1,mimeType:"multipart/form-data",params:{file:i,client_id:s.q.clientId,device:e.apiServices.device,device_id:t.deviceId,app_version:s.q.app_version,employee_id:t.allStoreData.user_id,request_page:e.RequestPage,user_type:t.allStoreData.employee_type,media_type:"1",flag_type:e.flag,request_for:e.RequestFor}};console.log("options",o),console.log("passing key==",JSON.stringify(o)),e.transfer.create().upload(i,n,o).then(function(t){console.log("server res==",t);var n=JSON.parse(t.response);console.log("response==",t),console.log("response22==",n),e.apiServices.presentLoadingClose(),1==n.success?(e.modalController.dismiss({dismissed:!0,data:n.data}),e.apiServices.showToastMessage(n.message,"top",3e3,"greenBg")):console.log("message key==",n.message)},function(t){e.apiServices.presentLoadingClose(),console.log("err==",t),e.apiServices.showToastMessage(JSON.stringify(t),"top",3e3,"redBg")})})}},{key:"captureImg",value:function(e){var t=this;this.apiServices.presentLoadingDefault(),console.log("event1==>",e);var n=new FormData;if(e.target.files){var i=e.target.files[0];n.append("file",i),n.append("flag_type",this.flag),n.append("media_type","1"),n.append("request_for",this.RequestFor),n.append("request_page",this.RequestPage),console.log("formData==>",n),this.apiServices.mediaFileUpload(s.n.imageUploadUrl,n).subscribe(function(e){switch(console.log("Multi File upload res==> ",JSON.stringify(e)),e.type){case r.dt.Sent:console.log("Request has been made!");break;case r.dt.ResponseHeader:console.log("Response header has been received!");break;case r.dt.Response:var o=e.body,a=new FileReader;a.readAsDataURL(i),a.onload=function(){console.log(a.result),n.append("file",t.files),console.log("this.currentObj==>",t.currentObj),t.apiServices.presentLoadingClose(),t.modalController.dismiss({dismissed:!0,data:o.data})}}},function(e){t.apiServices.presentLoadingClose(),t.apiServices.showToastMessage(JSON.stringify(e),"top",3e3,"redBg")})}}},{key:"pgShoW",value:function(e){this.modalController.dismiss({dismissed:!0,data:e})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Y36(l.IN),c.Y36(g.s),c.Y36(l.X1),c.Y36(p.K),c.Y36(l.t4),c.Y36(u.$),c.Y36(d.V1),c.Y36(h.H7),c.Y36(f.n))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-model-camera"]],decls:11,vars:5,consts:[[1,"content-bg"],[1,"ion-justify-content-center"],[1,"back"],[1,"circle"],["name","close",1,"circle_close",3,"click"],[4,"ngIf"],[3,"ngClass"],["src","assets/icon/Design 1.png",1,"banner_bg"],[1,"image-upload"],["name","camera-outline",1,"FooterCam","iconBorder"],[1,"activityClass"],["type","file","multiple","","accept","image/*","capture","",3,"change",4,"ngIf"],["class","overDiv","tappable","",3,"click",4,"ngIf"],["size","2"],["name","images-outline",1,"FooterCam","iconBorder"],["type","file","accept","image/*",3,"change"],["type","file","multiple","","accept","image/*","capture","",3,"change"],["tappable","",1,"overDiv",3,"click"],[3,"size",4,"ngFor","ngForOf"],[3,"size"],[1,"pgSo",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"ion-content",0),c.TgZ(1,"ion-row",1),c.TgZ(2,"ion-col",2),c.TgZ(3,"ion-grid"),c.TgZ(4,"ion-row"),c.TgZ(5,"ion-col",3),c.TgZ(6,"ion-icon",4),c.NdJ("click",function(){return t.close()}),c.qZA(),c.qZA(),c.qZA(),c.YNc(7,b,17,2,"ion-row",5),c.YNc(8,_,2,1,"ion-row",5),c.qZA(),c.TgZ(9,"div",6),c._UZ(10,"img",7),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Q6J("ngIf",!t.pgShow),c.xp6(1),c.Q6J("ngIf",t.pgShow),c.xp6(1),c.Q6J("ngClass",c.VKq(3,q,t.platform.width()<740)))},directives:[l.W2,l.Nd,l.wI,l.jY,l.gu,m.O5,m.mk,m.sg,l.YG],styles:[".image-upload[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none}.iconBorder[_ngcontent-%COMP%]{font-size:80px;color:#b01d22}ion-col[_ngcontent-%COMP%]{text-align:center}.circle[_ngcontent-%COMP%]{text-align:right;padding:0}.circle_close[_ngcontent-%COMP%]{font-size:30px;color:#b01d22}.back[_ngcontent-%COMP%], ion-grid[_ngcontent-%COMP%]{padding:0}h1[_ngcontent-%COMP%]{font-size:40px}.pgSo[_ngcontent-%COMP%]{width:100%;text-transform:capitalize;--border-radius:10px;--background:#b01d22}.overDiv[_ngcontent-%COMP%]{position:absolute;z-index:9;left:0;top:0;bottom:0;right:0}"]}),t}()},2490:function(t,i,o){"use strict";o.r(i),o.d(i,{ProfileUploadPageModule:function(){return k}});var a=o(38583),r=o(90665),s=o(47823),c=o(12234),l=o(64762),g=o(39182),p=o(56544),u=o(88720),d=o(84267),h=o(20138),f=o(59865),m=o(14303),v=o(51532);function Z(e,t){1&e&&u._UZ(0,"img",20)}function b(e,t){if(1&e&&u._UZ(0,"img",21),2&e){var n=u.oxw();u.Q6J("src",n.userImg,u.LSH)}}var y,_,q=function(e){return{"content-bg":e}},w=function(e){return{boundary1:e}},T=function(e){return{banner:e}},x=[{path:"",component:(y=function(){function t(n,i,o,a,r,s,c,l,g,p,u,d){e(this,t),this.camera=n,this.actionSheetController=i,this.file=o,this.zone=a,this.location=r,this.route=s,this.platform=c,this.filePath=l,this.apiService=g,this.modalCtrl=p,this.sendData=u,this.toastController=d,this.win=window,this.userImg="",this.files=[],this.croppedImagePath="",this.isLoading=!1,this.formData=[],this.imagePickerOptions={maximumImagesCount:1,quality:50},this.showImgOption=!1,this.registrationData=this.sendData.alldata,this.registrationData.requestFor="dealer"==this.registrationData.requestPage?this.registrationData.requestFor:"",console.log("1",this.registrationData),c.ready().then(function(){console.log("Width: "+c.width()),console.log("Height: "+c.height())})}return n(t,[{key:"ngOnInit",value:function(){}},{key:"next",value:function(){"dealer"==this.registrationData.requestPage?(this.sendData.alldata=this.registrationData,this.route.navigate(["/geolocation"])):this.route.navigate(["/tabs"])}},{key:"skip",value:function(){var e=this;this.zone.run(function(){e.apiService.apiCallWithLoginToken(p.n.SkipUrl,{request_page:e.registrationData.requestPage,requested_module:"profile",request_for:e.registrationData.requestFor}).subscribe(function(t){1==t.success?"dealer"==e.registrationData.requestPage?(e.sendData.alldata=e.registrationData,e.route.navigate(["/geolocation"])):(console.log("gotoHome"),e.route.navigateByUrl("/tabs")):e.apiService.showToastMessage(t.message,"top",3e3,"redBg")},function(t){e.apiService.showToastMessage(JSON.stringify(t),"top",3e3,"redBg")})})}},{key:"back",value:function(){var e=this,t={request_page:this.registrationData.requestPage,frompage:"back"};this.sendData.alldata=this.registrationData.requestFor,this.sendData.registrationType=t,setTimeout(function(){e.location.back()},1e3)}},{key:"pickImage",value:function(e){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,o,a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={quality:100,sourceType:e,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE},t.next=3,this.camera.getPicture(n);case 3:return i=t.sent,o=i.substr(i.lastIndexOf("/")+1),a=i.substr(0,i.lastIndexOf("/")+1),r=this.file.dataDirectory,t.next=9,this.file.copyFile(a,o,r,o);case 9:this.win.ionic.webview.convertFileSrc(r+o);case 10:case"end":return t.stop()}},t,this)}))}},{key:"selectImage",value:function(e){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("selectImage cordova"),this.currentObj=e,t.next=3,this.actionSheetController.create({header:"Select Image source",buttons:[{text:"Load from Library",handler:function(){i.pickImage(i.camera.PictureSourceType.PHOTOLIBRARY)}},{text:"Use Camera",handler:function(){i.pickImage(i.camera.PictureSourceType.CAMERA)}},{text:"Cancel",role:"cancel"}]});case 3:return n=t.sent,t.next=6,n.present();case 6:case"end":return t.stop()}},t,this)}))}},{key:"openSelectImageOpt",value:function(e){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("selectImage browser"),this.currentObj=e,0!=this.showImgOption){t.next=9;break}return this.showImgOption=!0,t.next=4,this.modalCtrl.create({component:g.b,componentProps:{data:this.registrationData},cssClass:"my-custom-class"});case 4:return(n=t.sent).onDidDismiss().then(function(e){null!==e?(i.UplaodData=e.data,i.dataReturned=e.data.data,console.log(" this.dataReturned:",i.dataReturned),i.userImg=i.dataReturned.filebaseUrl,null==i.userImg&&(i.userImg=""),console.log("data:",i.userImg)):i.userImg=""}),t.next=8,n.present();case 8:return t.abrupt("return",t.sent);case 9:this.showImgOption=!1;case 10:case"end":return t.stop()}},t,this)}))}}]),t}(),y.\u0275fac=function(e){return new(e||y)(u.Y36(d.V1),u.Y36(s.BX),u.Y36(h.$),u.Y36(u.R0b),u.Y36(a.Ye),u.Y36(c.F0),u.Y36(s.t4),u.Y36(f.y),u.Y36(m.s),u.Y36(s.IN),u.Y36(v.b),u.Y36(s.yF))},y.\u0275cmp=u.Xpm({type:y,selectors:[["app-profile-upload"]],decls:38,vars:13,consts:[[3,"ngClass"],[1,"ion-justify-content-center"],["size-xl","6","size-md","8","size-xs","12",3,"ngClass"],["src","assets/icon/Bandhan Logo.png",2,"width","150px"],[1,"col"],["src","assets/icon/abc.png",2,"width","130px","text-align","right"],["size","8",1,"simple"],[1,"para"],["size","4",1,"simple1"],[1,"para1",3,"click"],[3,"size"],[1,"relativeDiv"],["class","profile_image centerData","src","assets/icon/Group 14078.png",4,"ngIf"],["class","profile_image centerData dottedBorder userImageUpload",3,"src",4,"ngIf"],["name","add-circle","tappable","",1,"plushIcon","centerData",3,"click"],[2,"text-align","right","padding","20px"],[1,"ionic_btn","butt",3,"click"],[2,"text-align","left","padding","20px"],[1,"ionic_btn",3,"disabled","click"],["src","assets/icon/Design 1.png",1,"banner_bg"],["src","assets/icon/Group 14078.png",1,"profile_image","centerData"],[1,"profile_image","centerData","dottedBorder","userImageUpload",3,"src"]],template:function(e,t){1&e&&(u.TgZ(0,"ion-content",0),u.TgZ(1,"ion-row",1),u.TgZ(2,"ion-col",2),u.TgZ(3,"ion-grid"),u.TgZ(4,"ion-row"),u.TgZ(5,"ion-col"),u._UZ(6,"img",3),u.qZA(),u.TgZ(7,"ion-col",4),u._UZ(8,"img",5),u.qZA(),u.qZA(),u._UZ(9,"br"),u.qZA(),u.TgZ(10,"ion-row"),u.TgZ(11,"ion-col",6),u.TgZ(12,"p",7),u._uU(13,"Upload Profile Picture"),u.qZA(),u.qZA(),u.TgZ(14,"ion-col",8),u.TgZ(15,"p",9),u.NdJ("click",function(){return t.skip()}),u._uU(16,"Skip"),u.qZA(),u.qZA(),u.qZA(),u._UZ(17,"br"),u._UZ(18,"br"),u.TgZ(19,"ion-row"),u.TgZ(20,"ion-col",10),u.TgZ(21,"div",11),u.YNc(22,Z,1,0,"img",12),u.YNc(23,b,1,1,"img",13),u.TgZ(24,"ion-icon",14),u.NdJ("click",function(){return t.openSelectImageOpt("img")}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u._UZ(25,"br"),u._UZ(26,"br"),u._UZ(27,"br"),u._UZ(28,"br"),u.TgZ(29,"div",0),u.TgZ(30,"ion-row"),u.TgZ(31,"ion-col",15),u.TgZ(32,"ion-button",16),u.NdJ("click",function(){return t.back()}),u._uU(33,"Back"),u.qZA(),u.qZA(),u.TgZ(34,"ion-col",17),u.TgZ(35,"ion-button",18),u.NdJ("click",function(){return t.next()}),u._uU(36,"Next"),u.qZA(),u.qZA(),u.qZA(),u._UZ(37,"img",19),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.Q6J("ngClass",u.VKq(7,q,t.platform.width()<740)),u.xp6(2),u.Q6J("ngClass",u.VKq(9,w,t.platform.width()>740)),u.xp6(18),u.Q6J("size",12),u.xp6(2),u.Q6J("ngIf",""==t.userImg),u.xp6(1),u.Q6J("ngIf",""!=t.userImg),u.xp6(6),u.Q6J("ngClass",u.VKq(11,T,t.platform.width()<740)),u.xp6(6),u.Q6J("disabled",""==t.userImg))},directives:[s.W2,a.mk,s.Nd,s.wI,s.jY,a.O5,s.gu,s.YG],styles:[".col[_ngcontent-%COMP%]{text-align:end}.para[_ngcontent-%COMP%]{font-weight:700}.para[_ngcontent-%COMP%], .para1[_ngcontent-%COMP%]{color:#b01d22}.para1[_ngcontent-%COMP%]{text-align:end}.profile[_ngcontent-%COMP%]{width:140px;height:150px;padding:15px;position:relative;border:dotted;border-radius:71px;border-color:#b01d22}.banner_bg[_ngcontent-%COMP%]{margin-top:-66px;left:0;width:100%;display:block}.profile_image[_ngcontent-%COMP%]{width:150px}.simple[_ngcontent-%COMP%]{padding:0 0 0 12px}.simple1[_ngcontent-%COMP%]{padding:0 8px 0 0}.plushIcon[_ngcontent-%COMP%]{margin-top:-21px;color:#b01d22;font-size:3rem;border:dotted;border-radius:30px}.userImageUpload[_ngcontent-%COMP%]{border-radius:50%;height:150px;border:3px dotted #b01d22;-o-object-fit:cover;object-fit:cover}.hiddenDiv[_ngcontent-%COMP%]{display:none!important}"]}),y)}],I=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[c.Bz.forChild(x)],c.Bz]}),t}(),k=((_=function t(){e(this,t)}).\u0275fac=function(e){return new(e||_)},_.\u0275mod=u.oAB({type:_}),_.\u0275inj=u.cJS({imports:[[a.ez,r.u5,s.Pc,I]]}),_)}}])}();