(self.webpackChunkMehta=self.webpackChunkMehta||[]).push([[3714],{43714:function(t,e,i){"use strict";i.r(e),i.d(e,{BuyitemPageModule:function(){return C}});var s=i(38583),o=i(90665),n=i(47823),a=i(12234),r=i(64762),l=i(26023),d=i(56544),c=i(88720),u=i(51532),p=i(14303);function g(t,e){if(1&t&&(c.TgZ(0,"ion-row"),c.TgZ(1,"ion-col",9),c.TgZ(2,"p",10),c._uU(3),c.qZA(),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(1),c.Q6J("size",12),c.xp6(2),c.Oqu(null==t.addres||null==t.addres.data?null:t.addres.data.title)}}function h(t,e){if(1&t&&(c.TgZ(0,"ion-col",9),c.TgZ(1,"p",12),c._uU(2),c.qZA(),c.TgZ(3,"p",12),c._uU(4),c.qZA(),c.TgZ(5,"p",12),c._uU(6),c.qZA(),c._UZ(7,"br"),c.qZA()),2&t){const t=c.oxw().$implicit;c.Q6J("size",12),c.xp6(2),c.Oqu(null==t?null:t.address_line1),c.xp6(2),c.Oqu(null==t?null:t.address_line2),c.xp6(2),c.AsE("",null==t?null:t.city,"-",null==t?null:t.pin_code,"")}}function _(t,e){if(1&t&&(c.TgZ(0,"ion-row"),c.YNc(1,h,8,5,"ion-col",11),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.Q6J("ngIf","1"==(null==t?null:t.is_primary))}}function m(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",7),c.TgZ(1,"ion-button",13),c.NdJ("click",function(){return c.CHM(t),c.oxw().changeAddress()}),c._uU(2),c.qZA(),c._UZ(3,"br"),c.qZA()}if(2&t){const t=c.oxw();c.xp6(2),c.Oqu(null==t.addres||null==t.addres.data?null:t.addres.data.btn_text)}}function f(t,e){1&t&&(c.TgZ(0,"ion-row"),c.TgZ(1,"ion-col",14),c.TgZ(2,"p",10),c._uU(3,"Item redeemed"),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(1),c.Q6J("size",12))}function q(t,e){if(1&t&&(c.TgZ(0,"ion-row"),c.TgZ(1,"ion-col",7),c.TgZ(2,"h5",15),c._uU(3),c.qZA(),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(3),c.Oqu(t.msg)}}function b(t,e){if(1&t&&(c.TgZ(0,"ion-col",19),c._UZ(1,"img",20),c.qZA()),2&t){const t=c.oxw().$implicit;c.Q6J("size",3),c.xp6(1),c.Q6J("src",null==t?null:t.good_image,c.LSH)}}function Z(t,e){if(1&t&&(c.TgZ(0,"ion-col",21),c.TgZ(1,"p",12),c._uU(2),c.qZA(),c.TgZ(3,"p",12),c._uU(4),c.qZA(),c.qZA()),2&t){const t=c.oxw().$implicit;c.Q6J("size",9),c.xp6(2),c.Oqu(null==t?null:t.goods_name),c.xp6(2),c.Oqu(null==t?null:t.good_point)}}function x(t,e){if(1&t&&(c.TgZ(0,"ion-row",16),c.YNc(1,b,2,2,"ion-col",17),c.YNc(2,Z,5,3,"ion-col",18),c.qZA()),2&t){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",""==t.msg),c.xp6(1),c.Q6J("ngIf",""==t.msg)}}function y(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-button",22),c.NdJ("click",function(){return c.CHM(t),c.oxw().doneUpdate()}),c._uU(1,"Done"),c.qZA()}}function w(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-button",22),c.NdJ("click",function(){return c.CHM(t),c.oxw().modalcall()}),c._uU(1,"Redeem"),c.qZA()}}const z=[{path:"",component:(()=>{class t{constructor(t,e,i,s,o,n,a){this.modalCtrl=t,this.alertController=e,this.popoverController=i,this.sendData=s,this.route=o,this.apiService=n,this.zone=a,this.num=1,this.showDonebutt=0,this.cart_detail=[]}ionViewWillEnter(){this.cart_req=this.sendData.cart_request,this.showAddress(),this.buyitem(this.item_details)}ionViewWillLeave(){}ngOnInit(){this.redeem_for=this.sendData.redeem_for,console.log("redeem_for",this.redeem_for),this.allocationData=this.sendData.alldata,this.item_details=this.sendData.itemDetails,console.log("this.allocationData",this.allocationData),console.log("this.item_details",this.item_details)}minus(t){0!=t.quantity&&(t.quantity=JSON.parse(t.quantity),t.quantity=t.quantity-1,this.cart_req="buy",this.showDonebutt=1)}plus(t){t.quantity=parseInt(t.quantity)+1,this.cart_req="buy",this.showDonebutt=1}buyitem(t){this.zone.run(()=>(0,r.mG)(this,void 0,void 0,function*(){let e={request_page:"dealer",redeem_for:this.redeem_for,cart_request:this.cart_req,request_for:this.allocationData.customer_id,request_user_type:this.allocationData.employee_type,product_arr:[{product_id:t.product_id,count:t.quantity}]};console.log("item.product_id ,item.quantity ",t.quantity,t.quantity),this.apiService.apiCallWithLoginToken(d.n.CartUrl,e).subscribe(t=>{1==t.success?(this.cart_details=t.data,console.log("this is ",this.cart_details),this.msg=""):this.msg=t.message},t=>{this.apiService.showToastMessage(JSON.stringify(t),"top",3e3,"redBg")})}))}itemDetailsShow(){this.zone.run(()=>(0,r.mG)(this,void 0,void 0,function*(){this.apiService.apiCallWithLoginToken(d.n.ProductDetailUrl,{request_page:"dealer",redeem_for:this.redeem_for,product_id:this.item_details.auto_id,page_request_type:this.sendData.page_request_type}).subscribe(t=>{this.temparray=t.data,1==t.success||this.apiService.showToastMessage(t.message,"top",3e3,"redBg")},t=>{this.apiService.showToastMessage(JSON.stringify(t),"top",3e3,"redBg")})}))}modalcall(){this.sendData.cartDetails=this.cart_details,console.log(" this.cart_details",this.cart_detail),0!=this.addres.data.data.length?(this.sendData.address_id=this.addres.data.data[0].auto_id,this.presentAlertConfirm()):this.apiService.showToastMessage("Address is Required","top",2e3,"redBg")}callModal(){return(0,r.mG)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:l.f,cssClass:"my-custom-class"});return t.onDidDismiss().then(t=>{console.log("data returned after dismiss modal==",t),null!==t&&this.route.navigate(["/purchasehistory"])}),this.sendData.alldata={request_for:this.allocationData.customer_id,request_user_type:this.allocationData.employee_type},this.sendData.item=this.redeem_for,yield t.present()})}presentAlertConfirm(){return(0,r.mG)(this,void 0,void 0,function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",message:"Are you sure, you want to redeem?",buttons:[{text:"No",role:"cancel",cssClass:"secondary",handler:t=>{console.log("Confirm Cancel: blah")}},{text:"Yes",handler:()=>{this.callModal(),console.log("Confirm Okay")}}]});yield t.present()})}showAddress(){this.apiService.presentLoadingDefault(),this.zone.run(()=>{this.apiService.apiCallWithLoginToken(d.n.AddressUrl,{address_fetch_type:"deliver",redeem_for:this.redeem_for,request_page:"dealer",request_for:this.allocationData.customer_id,request_user_type:this.allocationData.employee_type}).subscribe(t=>{console.log("AddressUrl: ",t),this.apiService.presentLoadingClose(),this.addres=t},t=>{this.apiService.presentLoadingClose(),this.apiService.showToastMessage(JSON.stringify(t),"top",3e3,"redBg")})})}changeAddress(){""==this.allocationData.customer_id?(this.sendData.alldata={customer_id:"",request_page:this.redeem_for,employee_type:""},this.route.navigate(["/change-address"])):(this.sendData.alldata={customer_id:this.allocationData.customer_id,request_page:this.redeem_for,employee_type:this.allocationData.employee_type},this.route.navigate(["/change-address"]))}doneUpdate(){this.apiService.presentLoadingDefault(),this.cart_detail=[];for(let t=0;t<this.cart_details.length;t++)this.cart_details[t].count=this.cart_details[t].quantity,this.cart_detail.push(this.cart_details[t]);this.zone.run(()=>(0,r.mG)(this,void 0,void 0,function*(){let t={request_page:"dealer",redeem_for:this.redeem_for,cart_request:this.cart_req,product_arr:this.cart_detail,request_for:this.allocationData.customer_id,request_user_type:this.allocationData.employee_type};console.log("apikey : ",t),console.log("product_arr:",this.cart_detail),this.apiService.apiCallWithLoginToken(d.n.CartUrl,t).subscribe(t=>{this.apiService.presentLoadingClose(),1==t.success?(this.showDonebutt=0,this.cart_details=t.data,this.msg=""):(this.msg=t.message,this.cart_details=[])},t=>{this.apiService.presentLoadingClose(),this.apiService.showToastMessage(JSON.stringify(t),"top",3e3,"redBg")})}))}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(n.IN),c.Y36(n.Br),c.Y36(n.Dh),c.Y36(u.b),c.Y36(a.F0),c.Y36(p.s),c.Y36(c.R0b))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-buyitem"]],decls:21,vars:9,consts:[["slot","start"],[1,"ion-padding"],["sizexs","12","size-md","8","size-lg","8","push-md","2","push-lg","2",1,"whiteCol","ion-no-padding",3,"size"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","ion-text-center",4,"ngIf"],["class","brbottom",4,"ngFor","ngForOf"],[1,"ion-text-center"],["class","ionic_btn1",3,"click",4,"ngIf"],["sizexs","12","size-md","12","size-lg","12",1,"brbottom",3,"size"],[1,"para"],["sizexs","12","size-md","12","size-lg","12","class","brbottom",3,"size",4,"ngIf"],[1,"para1"],[1,"ionic_btnic",3,"click"],["size-xs","12","size-md","12","size-lg","12",1,"brbottom",3,"size"],[1,"no-margin",2,"color","#B01D22"],[1,"brbottom"],["sizexs","3","size-md","3","size-lg","3",3,"size",4,"ngIf"],["sizexs","9","size-md","9","size-lg","9",3,"size",4,"ngIf"],["sizexs","3","size-md","3","size-lg","3",3,"size"],["onerror","this.src='assets/watermark/watermark.png'",1,"imgcss",3,"src"],["sizexs","9","size-md","9","size-lg","9",3,"size"],[1,"ionic_btn1",3,"click"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-title"),c._uU(3,"Redeem"),c.qZA(),c.TgZ(4,"ion-buttons",0),c._UZ(5,"ion-back-button"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"ion-content",1),c.TgZ(7,"ion-row"),c.TgZ(8,"ion-col",2),c.YNc(9,g,4,2,"ion-row",3),c.YNc(10,_,2,1,"ion-row",4),c._UZ(11,"br"),c.YNc(12,m,4,1,"div",5),c.YNc(13,f,4,1,"ion-row",3),c.YNc(14,q,4,1,"ion-row",3),c.YNc(15,x,3,2,"ion-row",6),c._UZ(16,"br"),c.TgZ(17,"div",7),c.YNc(18,y,2,0,"ion-button",8),c.YNc(19,w,2,0,"ion-button",8),c.qZA(),c._UZ(20,"br"),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(8),c.Q6J("size",12),c.xp6(1),c.Q6J("ngIf",""!=(null==e.addres||null==e.addres.data?null:e.addres.data.title)),c.xp6(1),c.Q6J("ngForOf",null==e.addres||null==e.addres.data?null:e.addres.data.data),c.xp6(2),c.Q6J("ngIf",1==(null==e.addres||null==e.addres.data?null:e.addres.data.show_btn)),c.xp6(1),c.Q6J("ngIf",(null==e.cart_details?null:e.cart_details.length)>0),c.xp6(1),c.Q6J("ngIf",e.msg),c.xp6(1),c.Q6J("ngForOf",e.cart_details),c.xp6(3),c.Q6J("ngIf",1==e.showDonebutt&&!e.msg),c.xp6(1),c.Q6J("ngIf",0==e.showDonebutt&&!e.msg))},directives:[n.Gu,n.sr,n.wd,n.Sm,n.oU,n.cs,n.W2,n.Nd,n.wI,s.O5,s.sg,n.YG],styles:[".para[_ngcontent-%COMP%]{color:gray;font-weight:700;font-size:17px}.para[_ngcontent-%COMP%], .para1[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:4px}.para1[_ngcontent-%COMP%]{font-size:12px}.para2[_ngcontent-%COMP%]{font-size:16px;color:red;margin-top:4px;margin-bottom:4px}.brbottom[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3}.numcss[_ngcontent-%COMP%]{border:1px solid red;border-radius:10px;text-align:center;font-size:14px;padding:1px 15px}.txtend[_ngcontent-%COMP%]{text-align:end}.mrauto[_ngcontent-%COMP%]{margin:auto}.ionic_btnic[_ngcontent-%COMP%]{--background:#f7d716;--border-radius:5px;width:auto;text-transform:capitalize}.ionic_btn1[_ngcontent-%COMP%], .ionic_btnic[_ngcontent-%COMP%]{height:30px;font-size:14px;color:#000;font-weight:700}.ionic_btn1[_ngcontent-%COMP%]{--background:#9ff1ff;--border-radius:5px;width:30%;text-transform:none}"]}),t})()}];let A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[a.Bz.forChild(z)],a.Bz]}),t})(),C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[s.ez,o.u5,n.Pc,A]]}),t})()}}]);