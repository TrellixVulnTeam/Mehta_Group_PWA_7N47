{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { URLS } from 'src/assets/constant';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"src/app/provider/api.service\";\nimport * as i3 from \"src/app/services/data-transfer.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"src/app/services/local-storage.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\n\nconst _c0 = function (a0, a1) {\n  return {\n    \"mobilecss\": a0,\n    \"desktopcss\": a1\n  };\n};\n\nexport let RedeemotpPage = /*#__PURE__*/(() => {\n  class RedeemotpPage {\n    constructor(modalController, apiServices, platform, sendData, zone, router, localStorage) {\n      this.modalController = modalController;\n      this.apiServices = apiServices;\n      this.platform = platform;\n      this.sendData = sendData;\n      this.zone = zone;\n      this.router = router;\n      this.localStorage = localStorage;\n      this.FirstOtp = \"\";\n      this.SecondOtp = \"\";\n      this.ThirdOtp = \"\";\n      this.FourthOtp = \"\";\n      this.key = 0;\n      this.cart_details = this.sendData.cartDetails;\n      this.redeem_for = this.sendData.redeem_for;\n      this.addres_id = this.sendData.address_id;\n      this.req = this.sendData.alldata;\n      this.red = this.sendData.item;\n      this.localStorage.getStorage().then(storedData => {\n        this.userTypeAll = storedData.allStoreData;\n      });\n    }\n\n    ngOnInit() {\n      // if(this.key == 1){\n      //   this.getOtpDetails();\n      // }\n      this.getOtpDetails();\n    }\n\n    ionViewWillEnter() {\n      this.zone.run(() => {\n        if (this.platform.is('mobile')) {\n          // this.postSlider={speed:\"500\",initialSlide:0,slidesPerView:2.3,spaceBetween:7};\n          // // this.postSlider.initialSlide=2.3;\n          this.val = true;\n          console.log(\"this.val\", this.val);\n        } else {\n          // this.postSlider={speed:\"500\",initialSlide:0,slidesPerView:4.3,spaceBetween:7};\n          // this.postSlider.initialSlide=4.3;\n          this.val = false;\n          console.log(\"this.val111\", this.val);\n        }\n      });\n    }\n\n    getkey(otpfirts77, ev) {\n      console.log(\"tttt111\", ev);\n      console.log(\"tttt111\", otpfirts77);\n      console.log(\"tttt\", this.otpfirts);\n    }\n\n    getOtpDetails() {\n      this.apiServices.presentLoadingDefault();\n      this.zone.run(() => __awaiter(this, void 0, void 0, function* () {\n        let apiKey = {\n          \"send_type\": \"redeem\",\n          \"request_page\": \"dealer\",\n          \"redeem_for\": this.red,\n          \"request_for\": this.req.request_for,\n          \"request_user_type\": this.req.request_user_type\n        };\n        this.apiServices.apiCallWithLoginToken(URLS.otpGetUrl, apiKey).subscribe(result => {\n          this.temparray = result.data;\n          this.apiServices.presentLoadingClose();\n\n          if (result.success == 1 || result.success == '1') {\n            this.apiServices.showToastMessage(result.message, 'top', 2000, 'greenBg');\n          } else {\n            this.apiServices.showToastMessage(result.message, 'top', 2000, 'redBg');\n          }\n        });\n      }));\n    }\n\n    moveFocus1(nextElement, val, index) {\n      console.log(\"val\", val);\n    }\n\n    moveFocus(nextElement, val, index) {\n      console.log(\"val\", val);\n\n      if (index < 4) {\n        if (this.SecondOtp == undefined || this.SecondOtp == \"\") {\n          nextElement.setFocus();\n        } else if (this.ThirdOtp == undefined || this.ThirdOtp == \"\") {\n          nextElement.setFocus();\n        } else if (this.FourthOtp == undefined || this.FourthOtp == \"\") {\n          nextElement.setFocus();\n        }\n      } else {}\n    }\n\n    close() {\n      this.modalController.dismiss({\n        'dismissed': true\n      });\n    }\n\n    checkFocus(index) {\n      console.log('otp:', this.FirstOtp);\n      console.log(\"********\", index);\n\n      if (index == 1) {\n        this.FirstOtp = \"\";\n      } else if (index == 2) {\n        this.SecondOtp = \"\";\n      } else if (index == 3) {\n        this.ThirdOtp = \"\";\n      } else if (index == 4) {\n        this.FourthOtp = \"\";\n      }\n\n      console.log('otp:', this.FirstOtp, this.SecondOtp, this.ThirdOtp, this.FourthOtp);\n    }\n\n    gotohistory() {\n      console.log('otp1223', this.otpfirts); //this.addres_id=this.addres.data.data[0].auto_id;\n\n      this.zone.run(() => __awaiter(this, void 0, void 0, function* () {\n        let apiKey = {\n          \"request_page\": \"dealer\",\n          \"redeem_for\": this.redeem_for,\n          \"address_id\": this.addres_id,\n          \"cart_id\": this.cart_details[0].cart_id,\n          \"otp\": this.FirstOtp.trim() + this.SecondOtp.trim() + this.ThirdOtp.trim() + this.FourthOtp.trim(),\n          \"otp_type\": this.temparray.type,\n          \"request_for\": this.req.request_for,\n          \"request_user_type\": this.req.request_user_type\n        };\n        this.apiServices.apiCallWithLoginToken(URLS.BuyUrl, apiKey).subscribe(result => {\n          // this.temparray = result.data;\n          if (result.success == 1 || result.success == '1') {\n            this.modalController.dismiss({\n              'dismissed': true\n            });\n            this.apiServices.showToastMessage(result.message, 'top', 2000, 'greenBg');\n            this.sendData.page_request_type = 'detail'; //this.sendData.backKey='back';\n\n            if (this.userTypeAll.employee_type == 1) {\n              this.sendData.alldata = {\n                'customer_id': '',\n                'request_page': 'self',\n                'backKey': 'back'\n              };\n            } else {\n              if (this.req.request_for == '') {\n                this.sendData.alldata = {\n                  'customer_id': '',\n                  'request_page': 'self',\n                  'backKey': 'back'\n                };\n              } else {\n                this.sendData.alldata = {\n                  'customer_id': this.req.request_for,\n                  'request_page': 'other',\n                  'backKey': 'back'\n                };\n              }\n            }\n\n            this.router.navigate(['/purchasehistory']); //this.callModal();\n          } else {\n            this.apiServices.showToastMessage(result.message, 'top', 2000, 'redBg');\n          }\n        });\n      }));\n    }\n\n  }\n\n  RedeemotpPage.ɵfac = function RedeemotpPage_Factory(t) {\n    return new (t || RedeemotpPage)(i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i1.Platform), i0.ɵɵdirectiveInject(i3.DataTransferService), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.LocalStorageService));\n  };\n\n  RedeemotpPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RedeemotpPage,\n    selectors: [[\"app-redeemotp\"]],\n    decls: 29,\n    vars: 18,\n    consts: [[2, \"--background\", \"rgba(255,255,255,0.5)\"], [1, \"circle\"], [\"name\", \"close\", 1, \"circle_close\", 3, \"click\"], [1, \"inputfiled\", 3, \"ngClass\"], [1, \"ion-no-padding\", 3, \"size\"], [1, \"otpcss\"], [\"type\", \"tel\", \"placeholder\", \"*\", \"maxlength\", \"1\", 1, \"bodBottom\", 2, \"padding\", \"0px !important\", 3, \"ngModel\", \"ionFocus\", \"keyup\", \"ngModelChange\"], [\"otp1\", \"\"], [\"otp2\", \"\"], [\"otp3\", \"\"], [\"otp4\", \"\"], [3, \"size\"], [1, \"resend\", 3, \"click\"], [1, \"txtcentr\"], [1, \"ionic_btn\", 3, \"click\"]],\n    template: function RedeemotpPage_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r4 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"ion-content\", 0);\n        i0.ɵɵelementStart(1, \"ion-row\");\n        i0.ɵɵelementStart(2, \"ion-col\", 1);\n        i0.ɵɵelementStart(3, \"ion-icon\", 2);\n        i0.ɵɵlistener(\"click\", function RedeemotpPage_Template_ion_icon_click_3_listener() {\n          return ctx.close();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵelementStart(5, \"ion-row\");\n        i0.ɵɵelementStart(6, \"ion-col\", 4);\n        i0.ɵɵelementStart(7, \"p\", 5);\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"ion-row\");\n        i0.ɵɵelementStart(10, \"ion-col\", 4);\n        i0.ɵɵelementStart(11, \"ion-input\", 6, 7);\n        i0.ɵɵlistener(\"ionFocus\", function RedeemotpPage_Template_ion_input_ionFocus_11_listener() {\n          return ctx.checkFocus(1);\n        })(\"keyup\", function RedeemotpPage_Template_ion_input_keyup_11_listener() {\n          i0.ɵɵrestoreView(_r4);\n\n          const _r1 = i0.ɵɵreference(15);\n\n          return ctx.moveFocus(_r1, ctx.FirstOtp, \"1\");\n        })(\"ngModelChange\", function RedeemotpPage_Template_ion_input_ngModelChange_11_listener($event) {\n          return ctx.FirstOtp = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"ion-col\", 4);\n        i0.ɵɵelementStart(14, \"ion-input\", 6, 8);\n        i0.ɵɵlistener(\"ionFocus\", function RedeemotpPage_Template_ion_input_ionFocus_14_listener() {\n          return ctx.checkFocus(2);\n        })(\"keyup\", function RedeemotpPage_Template_ion_input_keyup_14_listener() {\n          i0.ɵɵrestoreView(_r4);\n\n          const _r2 = i0.ɵɵreference(18);\n\n          return ctx.moveFocus(_r2, ctx.SecondOtp, \"2\");\n        })(\"ngModelChange\", function RedeemotpPage_Template_ion_input_ngModelChange_14_listener($event) {\n          return ctx.SecondOtp = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"ion-col\", 4);\n        i0.ɵɵelementStart(17, \"ion-input\", 6, 9);\n        i0.ɵɵlistener(\"ionFocus\", function RedeemotpPage_Template_ion_input_ionFocus_17_listener() {\n          return ctx.checkFocus(3);\n        })(\"keyup\", function RedeemotpPage_Template_ion_input_keyup_17_listener() {\n          i0.ɵɵrestoreView(_r4);\n\n          const _r3 = i0.ɵɵreference(21);\n\n          return ctx.moveFocus(_r3, ctx.ThirdOtp, \"3\");\n        })(\"ngModelChange\", function RedeemotpPage_Template_ion_input_ngModelChange_17_listener($event) {\n          return ctx.ThirdOtp = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"ion-col\", 4);\n        i0.ɵɵelementStart(20, \"ion-input\", 6, 10);\n        i0.ɵɵlistener(\"ionFocus\", function RedeemotpPage_Template_ion_input_ionFocus_20_listener() {\n          return ctx.checkFocus(4);\n        })(\"keyup\", function RedeemotpPage_Template_ion_input_keyup_20_listener() {\n          i0.ɵɵrestoreView(_r4);\n\n          const _r3 = i0.ɵɵreference(21);\n\n          return ctx.moveFocus(_r3, ctx.FourthOtp, \"4\");\n        })(\"ngModelChange\", function RedeemotpPage_Template_ion_input_ngModelChange_20_listener($event) {\n          return ctx.FourthOtp = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"ion-row\");\n        i0.ɵɵelementStart(23, \"ion-col\", 11);\n        i0.ɵɵelementStart(24, \"p\", 12);\n        i0.ɵɵlistener(\"click\", function RedeemotpPage_Template_p_click_24_listener() {\n          return ctx.getOtpDetails();\n        });\n        i0.ɵɵtext(25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 13);\n        i0.ɵɵelementStart(27, \"ion-button\", 14);\n        i0.ɵɵlistener(\"click\", function RedeemotpPage_Template_ion_button_click_27_listener() {\n          return ctx.gotohistory();\n        });\n        i0.ɵɵtext(28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(15, _c0, ctx.val == true, ctx.val == false));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"size\", 12);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.temparray == null ? null : ctx.temparray.FirstMsg);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"size\", 3);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.FirstOtp);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"size\", 3);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.SecondOtp);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"size\", 3);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.ThirdOtp);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"size\", 3);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.FourthOtp);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"size\", 12);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate2(\"\", ctx.temparray == null ? null : ctx.temparray.ThirdMsg, \"\\u00A0\", ctx.temparray == null ? null : ctx.temparray.resendText, \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.temparray == null ? null : ctx.temparray.buttonText);\n      }\n    },\n    directives: [i1.IonContent, i1.IonRow, i1.IonCol, i1.IonIcon, i6.NgClass, i1.IonInput, i1.TextValueAccessor, i7.MaxLengthValidator, i7.NgControlStatus, i7.NgModel, i1.IonButton],\n    styles: [\".inputfiled[_ngcontent-%COMP%]{padding:0 20px}.inputfiled[_ngcontent-%COMP%]   .bodBottom[_ngcontent-%COMP%]{border:2px solid red;border-radius:10px;text-align:center;font-size:18px;font-weight:700;padding-right:10px!important;width:85%;height:50px;margin:auto;color:red}.resendText[_ngcontent-%COMP%]{color:red;font-size:12px;margin:0}.otpcss[_ngcontent-%COMP%]{font-weight:700;font-size:15px}.resend[_ngcontent-%COMP%]{font-size:10px;color:red}.desktopcss[_ngcontent-%COMP%]{background:#fff}.txtcentr[_ngcontent-%COMP%]{text-align:center}.circle[_ngcontent-%COMP%]{text-align:end;padding:0}.circle_close[_ngcontent-%COMP%]{font-size:30px;color:#b01d22}.sure[_ngcontent-%COMP%]{font-size:20px;color:#b01d22}.ok_but[_ngcontent-%COMP%]{--background:#b01d22}\"]\n  });\n  return RedeemotpPage;\n})();","map":null,"metadata":{},"sourceType":"module"}