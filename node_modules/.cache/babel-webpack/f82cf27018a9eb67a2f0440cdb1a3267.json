{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { URLS } from '../../../src/assets/constant';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/local-storage.service\";\nimport * as i3 from \"../provider/api.service\";\nimport * as i4 from \"../services/data-transfer.service\";\nimport * as i5 from \"@ionic/angular\";\nimport * as i6 from \"@angular/common\";\n\nconst _c0 = function (a0, a1) {\n  return {\n    colorchange: a0,\n    colorsame: a1\n  };\n};\n\nfunction RedeemfilterPage_ion_row_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-row\", 11);\n    i0.ɵɵlistener(\"click\", function RedeemfilterPage_ion_row_13_Template_ion_row_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const Data_r2 = restoredCtx.$implicit;\n      const i_r3 = restoredCtx.index;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.applydata(Data_r2, i_r3);\n    });\n    i0.ɵɵelementStart(1, \"ion-col\", 12);\n    i0.ɵɵelementStart(2, \"p\", 13);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const Data_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"size\", 12)(\"ngClass\", i0.ɵɵpureFunction2(3, _c0, ctx_r0.changecolorcheck == i_r3, ctx_r0.changecolorcheck != i_r3));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(Data_r2 == null ? null : Data_r2.name);\n  }\n}\n\nconst _c1 = function (a0) {\n  return {\n    colorchange1: a0\n  };\n};\n\nfunction RedeemfilterPage_ion_row_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-row\", 14);\n    i0.ɵɵlistener(\"click\", function RedeemfilterPage_ion_row_15_Template_ion_row_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const seconddata_r6 = restoredCtx.$implicit;\n      const j_r7 = restoredCtx.index;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.select(seconddata_r6, j_r7);\n    });\n    i0.ɵɵelementStart(1, \"ion-col\", 15);\n    i0.ɵɵelementStart(2, \"p\", 16);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const seconddata_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(3, _c1, (seconddata_r6 == null ? null : seconddata_r6.is_selected) == 1));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"size\", 12);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(seconddata_r6.category_name);\n  }\n}\n\nexport let RedeemfilterPage = /*#__PURE__*/(() => {\n  class RedeemfilterPage {\n    constructor(router, storageService, zone, apiservices, sendData, modalCtrl, navParam) {\n      this.router = router;\n      this.storageService = storageService;\n      this.zone = zone;\n      this.apiservices = apiservices;\n      this.sendData = sendData;\n      this.modalCtrl = modalCtrl;\n      this.navParam = navParam;\n      this.changecolorcheck = 0;\n      this.clickcolor = true;\n      this.clickcolor2 = false;\n      this.showdata = false;\n      this.value = 0;\n      this.showFilterDiv = false;\n      this.errorMessage = \"\";\n      this.myinfiniteScrollCall = false;\n      this.categoryAuto_Arr = {};\n      this.categoryAuto_id = [];\n      this.categoryAuto_id1 = [];\n      this.categoryAuto_id2 = [];\n    }\n\n    applydata(applydata, i) {\n      this.zone.run(() => {\n        //  this.categoryAuto_id=[];\n        console.log('category data', applydata);\n        console.log('categor index', i);\n        this.selectedindex = undefined;\n        this.changecolorcheck = i;\n        this.branddata = applydata;\n\n        if (applydata.is_dependent == 1) {\n          // this.categoryAuto_id1=[];\n          this.filterSubCateFun();\n        } else {\n          console.log('categor index', i);\n          this.applydataarr = applydata.options;\n        }\n      });\n    }\n\n    select(selecteddata, j) {\n      console.log('selecteddata data', selecteddata);\n      console.log('selecteddata index', j);\n      this.selectedindex = j;\n\n      if (selecteddata.alias_name == 'category') {\n        console.log('selecteddata alias_name', selecteddata.alias_name);\n        var index = this.categoryAuto_id.indexOf(parseInt(selecteddata.auto_id));\n\n        if (index >= 0) {\n          selecteddata.is_selected = 0;\n          this.categoryAuto_id.splice(index, 1);\n          this.uniqueString = [...new Set(this.categoryAuto_id)].join(',');\n          console.log('this.uniqueString1', this.uniqueString);\n        } else {\n          selecteddata.is_selected = 1;\n          this.categoryAuto_id.push(parseInt(selecteddata.auto_id));\n          this.uniqueString = [...new Set(this.categoryAuto_id)].join(',');\n          console.log(' this.uniqueString', this.uniqueString);\n        }\n\n        this.categoryAuto_Arr[selecteddata.alias_name] = this.uniqueString;\n      } else if (selecteddata.alias_name == 'sub_category') {\n        console.log('selecteddata alias_name', selecteddata.alias_name);\n        var index1 = this.categoryAuto_id1.indexOf(parseInt(selecteddata.auto_id));\n\n        if (index1 >= 0) {\n          selecteddata.is_selected = 0;\n          this.categoryAuto_id1.splice(index1, 1);\n          this.uniqueString = [...new Set(this.categoryAuto_id1)].join(',');\n          console.log('this.uniqueString1', this.uniqueString);\n        } else {\n          selecteddata.is_selected = 1;\n          this.categoryAuto_id1.push(parseInt(selecteddata.auto_id));\n          this.uniqueString = [...new Set(this.categoryAuto_id1)].join(',');\n        }\n\n        console.log(' this.uniqueString', this.uniqueString);\n        this.categoryAuto_Arr[selecteddata.alias_name] = this.uniqueString;\n      } else if (selecteddata.alias_name == 'brands') {\n        console.log('selecteddata alias_name', selecteddata.alias_name);\n        var index2 = this.categoryAuto_id2.indexOf(parseInt(selecteddata.auto_id));\n\n        if (index2 >= 0) {\n          selecteddata.is_selected = 0;\n          this.categoryAuto_id2.splice(index2, 1);\n          this.uniqueString = [...new Set(this.categoryAuto_id2)].join(',');\n          console.log('this.uniqueString1', this.uniqueString);\n        } else {\n          selecteddata.is_selected = 1;\n          this.categoryAuto_id2.push(parseInt(selecteddata.auto_id));\n          this.uniqueString = [...new Set(this.categoryAuto_id2)].join(',');\n        }\n\n        console.log(' this.uniqueString', this.uniqueString);\n        this.categoryAuto_Arr[selecteddata.alias_name] = this.uniqueString;\n      }\n\n      console.log('categoryAuto_id data', this.uniqueString);\n      console.log('categoryAuto_Arr data', this.categoryAuto_Arr);\n    } // ionViewWillLeave(){\n    //   this.filterDataArr=this.categoryAuto_Arr;\n    //   console.log('categoryAuto_Arr data',this.filterDataArr);\n    // }\n\n\n    ngOnInit() {\n      // this.allocationData=this.sendData.alldata;\n      this.allocationData = this.navParam.data.data;\n      this.Arr = this.navParam.data;\n\n      if (this.Arr.filterPre == undefined) {\n        this.filterArr = {\n          'category': '',\n          'sub_category': '',\n          'brands': ''\n        };\n      } else {\n        this.filterArr = this.navParam.data.filterPre;\n      }\n\n      console.log('previous filter data', this.allocationData);\n      console.log('previous filter data', this.filterArr);\n      this.filterListFun();\n    }\n\n    filterSubCateFun() {\n      this.zone.run(() => __awaiter(this, void 0, void 0, function* () {\n        let apiKey = {\n          category_id: this.categoryAuto_Arr['category'] || '',\n          filter: this.categoryAuto_Arr\n        };\n        this.apiservices.apiCallWithLoginToken(URLS.filterSubCategoryApi, apiKey).subscribe(result => {\n          if (result.success == 1) {\n            this.applydataarr = result.data[0].options; // for (let ind = 0; ind < this.applydataarr.length; ind++) {\n            //   this.applydataarr[ind].checkCss=false;\n            // } \n\n            console.log('this.applydataarr', this.applydataarr);\n          } else {}\n        }, err => {\n          this.apiservices.showToastMessage(JSON.stringify(err), 'top', 3000, 'redBg');\n        });\n      }));\n    }\n\n    filterListFun() {\n      this.zone.run(() => __awaiter(this, void 0, void 0, function* () {\n        let apiKey = {\n          \"filter\": this.filterArr\n        };\n        this.apiservices.apiCallWithLoginToken(URLS.filterProductApi, apiKey).subscribe(result => {\n          if (result.success == 1) {\n            this.filterData = result.data;\n            this.applydataarr = this.filterData[0].options; // for (let ind = 0; ind < this.applydataarr.length; ind++) {\n            //   this.applydataarr[ind].checkCss=false;\n            // }\n\n            console.log('this.applydataarr', this.applydataarr);\n            this.errorImage = '';\n          } else {// this.errorMessage=result.message;\n            // this.apiService.showToastMessage(result.message, 'top', 3000, 'redBg');\n          }\n        }, err => {\n          this.apiservices.showToastMessage(JSON.stringify(err), 'top', 3000, 'redBg'); // this.apiService.presentLoadingClose();\n        });\n      }));\n    }\n\n    gotoBack() {\n      this.modalCtrl.dismiss({\n        'dismissed': true,\n        'data': '',\n        'filter': ''\n      });\n    }\n\n    clearFilter() {\n      this.categoryAuto_id = [];\n      this.categoryAuto_id1 = [];\n      this.categoryAuto_id2 = [];\n      this.filterArr = {\n        'category': '',\n        'sub_category': '',\n        'brands': ''\n      };\n      this.categoryAuto_Arr = {\n        'category': '',\n        'sub_category': '',\n        'brands': ''\n      };\n      this.filterData.forEach(element => {\n        element.options.forEach(ele => {\n          console.log('element', ele);\n          ele.is_selected = 0;\n        });\n      });\n      console.log('filterData', this.categoryAuto_Arr);\n      console.log('filterData', this.filterArr);\n    }\n\n    applyfun() {\n      this.zone.run(() => {\n        this.apiservices.presentLoadingDefault();\n        this.zone.run(() => __awaiter(this, void 0, void 0, function* () {\n          let apiKey = {\n            \"request_page\": this.allocationData.request_page,\n            \"search_str\": '',\n            \"redeem_for\": this.allocationData.redeem_for,\n            \"request_for\": this.allocationData.customer_id,\n            \"request_user_type\": this.allocationData.employee_type,\n            \"filter\": this.categoryAuto_Arr\n          };\n          this.apiservices.apiCallWithLoginToken(URLS.ProductListUrl, apiKey).subscribe(result => {\n            this.apiservices.presentLoadingClose();\n\n            if (result.success == 1) {\n              console.log('filter data', result.data);\n\n              if (result.data.length == 0) {\n                this.apiservices.showToastMessage(result.message, 'top', 3000, 'redBg');\n              } else {\n                this.modalCtrl.dismiss({\n                  'dismissed': true,\n                  'data': result.data,\n                  'filter': this.categoryAuto_Arr\n                });\n              }\n\n              this.errorImage = '';\n            } else {\n              // this.errorMessage=result.message;\n              this.errorImage = result.error_image; // this.apiService.showToastMessage(result.message, 'top', 3000, 'redBg');\n            }\n          }, err => {\n            this.apiservices.showToastMessage(JSON.stringify(err), 'top', 3000, 'redBg');\n            this.apiservices.presentLoadingClose();\n          });\n        }));\n      });\n    }\n\n  }\n\n  RedeemfilterPage.ɵfac = function RedeemfilterPage_Factory(t) {\n    return new (t || RedeemfilterPage)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.LocalStorageService), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(i3.ApiService), i0.ɵɵdirectiveInject(i4.DataTransferService), i0.ɵɵdirectiveInject(i5.ModalController), i0.ɵɵdirectiveInject(i5.NavParams));\n  };\n\n  RedeemfilterPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RedeemfilterPage,\n    selectors: [[\"app-redeemfilter\"]],\n    decls: 26,\n    vars: 6,\n    consts: [[\"slot\", \"start\", 3, \"click\"], [\"slot\", \"end\"], [2, \"color\", \"white\", 3, \"click\"], [1, \"leftDiv\"], [1, \"padd\", 3, \"size\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"newCol8\", 3, \"size\"], [3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"tempBtnDiv\"], [1, \"ion-text-center\", 3, \"size\"], [\"tappable\", \"\", 1, \"ionic_btn\", 3, \"click\"], [3, \"click\"], [3, \"size\", \"ngClass\"], [1, \"parasize\", \"cntr\"], [3, \"ngClass\", \"click\"], [1, \"mrauto\", 3, \"size\"], [1, \"parasize\"]],\n    template: function RedeemfilterPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\");\n        i0.ɵɵelementStart(1, \"ion-toolbar\");\n        i0.ɵɵelementStart(2, \"ion-title\");\n        i0.ɵɵtext(3, \"Filter\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-buttons\", 0);\n        i0.ɵɵlistener(\"click\", function RedeemfilterPage_Template_ion_buttons_click_4_listener() {\n          return ctx.gotoBack();\n        });\n        i0.ɵɵelement(5, \"ion-back-button\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"ion-buttons\", 1);\n        i0.ɵɵelementStart(7, \"ion-button\", 2);\n        i0.ɵɵlistener(\"click\", function RedeemfilterPage_Template_ion_button_click_7_listener() {\n          return ctx.clearFilter();\n        });\n        i0.ɵɵtext(8, \" Clear\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"ion-content\");\n        i0.ɵɵelementStart(10, \"div\", 3);\n        i0.ɵɵelementStart(11, \"ion-row\");\n        i0.ɵɵelementStart(12, \"ion-col\", 4);\n        i0.ɵɵtemplate(13, RedeemfilterPage_ion_row_13_Template, 4, 6, \"ion-row\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"ion-col\", 6);\n        i0.ɵɵtemplate(15, RedeemfilterPage_ion_row_15_Template, 4, 5, \"ion-row\", 7);\n        i0.ɵɵelement(16, \"br\");\n        i0.ɵɵelement(17, \"br\");\n        i0.ɵɵelement(18, \"br\");\n        i0.ɵɵelement(19, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 8);\n        i0.ɵɵelementStart(21, \"ion-row\");\n        i0.ɵɵelement(22, \"ion-col\", 9);\n        i0.ɵɵelementStart(23, \"ion-col\", 9);\n        i0.ɵɵelementStart(24, \"ion-button\", 10);\n        i0.ɵɵlistener(\"click\", function RedeemfilterPage_Template_ion_button_click_24_listener() {\n          return ctx.applyfun();\n        });\n        i0.ɵɵtext(25, \"Apply\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"size\", 4);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.filterData);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"size\", 8);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.applydataarr);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"size\", 4);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"size\", 8);\n      }\n    },\n    directives: [i5.IonHeader, i5.IonToolbar, i5.IonTitle, i5.IonButtons, i5.IonBackButton, i5.IonBackButtonDelegate, i5.IonButton, i5.IonContent, i5.IonRow, i5.IonCol, i6.NgForOf, i6.NgClass],\n    styles: [\".leftDiv[_ngcontent-%COMP%]{width:100%;background:#e5e5e8;overflow:auto}.newCol8[_ngcontent-%COMP%]{background:#fff!important;position:absolute;right:0;top:0;bottom:0;min-height:-webkit-fill-available;height:-webkit-max-content;height:-moz-max-content;height:max-content}.rightDiv[_ngcontent-%COMP%]{width:66.7%;right:0;background:#fff}.leftDiv[_ngcontent-%COMP%], .rightDiv[_ngcontent-%COMP%]{display:inline-block;position:absolute;top:0;z-index:-1;bottom:0;min-height:-webkit-fit-content;min-height:-moz-fit-content;min-height:fit-content;height:100%}.parasize[_ngcontent-%COMP%]{font-size:15px;margin-bottom:3px;margin-top:3px}.colorchange[_ngcontent-%COMP%]{background:#add8e6;font-weight:700}.colorsame[_ngcontent-%COMP%]{background:transparent}.padd[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.cntr[_ngcontent-%COMP%]{text-align:center}.imgcss[_ngcontent-%COMP%]{height:32px;width:32px;-o-object-fit:contain;object-fit:contain}.mrauto[_ngcontent-%COMP%]{margin:0 auto auto}.colorchange1[_ngcontent-%COMP%]{background:#d3d3d3}.bottombton[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0}.tempBtnDiv[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0}\"]\n  });\n  return RedeemfilterPage;\n})();","map":null,"metadata":{},"sourceType":"module"}