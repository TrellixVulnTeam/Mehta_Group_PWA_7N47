{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { ModelCameraPage } from '../model-camera/model-camera.page';\nimport { URLS } from 'src/assets/constant';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic-native/camera/ngx\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@ionic-native/file/ngx\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@ionic-native/file-path/ngx\";\nimport * as i7 from \"src/app/provider/api.service\";\nimport * as i8 from \"src/app/services/data-transfer.service\";\n\nfunction ProfileUploadPage_img_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 18);\n  }\n}\n\nfunction ProfileUploadPage_img_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 19);\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r1.userImg, i0.ɵɵsanitizeUrl);\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"content-bg\": a0\n  };\n};\n\nconst _c1 = function (a0) {\n  return {\n    \"boundary1\": a0\n  };\n};\n\nconst _c2 = function (a0) {\n  return {\n    \"banner\": a0\n  };\n}; // import { WebView } from '@ionic-native/ionic-webview/ngx';\n\n\nexport let ProfileUploadPage = /*#__PURE__*/(() => {\n  class ProfileUploadPage {\n    constructor(camera, actionSheetController, file, zone, location, // private webview: WebView,\n    route, platform, filePath, apiService, modalCtrl, sendData, toastController) {\n      this.camera = camera;\n      this.actionSheetController = actionSheetController;\n      this.file = file;\n      this.zone = zone;\n      this.location = location;\n      this.route = route;\n      this.platform = platform;\n      this.filePath = filePath;\n      this.apiService = apiService;\n      this.modalCtrl = modalCtrl;\n      this.sendData = sendData;\n      this.toastController = toastController;\n      this.win = window;\n      this.userImg = \"\";\n      this.files = [];\n      this.croppedImagePath = \"\";\n      this.isLoading = false;\n      this.formData = [];\n      this.imagePickerOptions = {\n        maximumImagesCount: 1,\n        quality: 50\n      };\n      this.showImgOption = false;\n      this.registrationData = this.sendData.alldata;\n\n      if (this.registrationData.requestPage == 'dealer') {\n        this.registrationData.requestFor = this.registrationData.requestFor;\n      } else {\n        this.registrationData.requestFor = '';\n      }\n\n      console.log('1', this.registrationData);\n      platform.ready().then(() => {\n        console.log('Width: ' + platform.width());\n        console.log('Height: ' + platform.height());\n      });\n    }\n\n    ngOnInit() {}\n\n    next() {\n      if (this.registrationData.requestPage == 'dealer') {\n        this.sendData.alldata = this.registrationData;\n        this.route.navigate(['/geolocation']);\n      } else {\n        this.route.navigate(['/tabs']);\n      }\n    }\n\n    skip() {\n      this.zone.run(() => {\n        let apiKey = {\n          \"request_page\": this.registrationData.requestPage,\n          \"requested_module\": \"profile\",\n          \"request_for\": this.registrationData.requestFor\n        };\n        this.apiService.apiCallWithLoginToken(URLS.SkipUrl, apiKey).subscribe(result => {\n          if (result.success == 1) {\n            if (this.registrationData.requestPage == 'dealer') {\n              this.sendData.alldata = this.registrationData;\n              this.route.navigate(['/geolocation']);\n            } else {\n              console.log('gotoHome');\n              this.route.navigateByUrl('/tabs');\n            }\n          } else {\n            this.apiService.showToastMessage(result.message, 'top', 3000, 'redBg');\n          }\n        }, err => {\n          this.apiService.showToastMessage(JSON.stringify(err), 'top', 3000, 'redBg');\n        });\n      });\n    } // back(){\n    //   let obj={\n    //     'request_page':this.registrationData.requestPage,\n    //     'frompage':'back'\n    //   }\n    //   this.sendData.alldata = this.registrationData.requestFor;\n    //   this.sendData.registrationType=obj;\n    //   setTimeout(() => {\n    //     // this.route.navigate(['./registration']);\n    //     this.location.back();\n    //   }, 1000);\n    // }\n\n\n    pickImage(sourceType) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const options = {\n          quality: 100,\n          sourceType: sourceType,\n          destinationType: this.camera.DestinationType.FILE_URI,\n          encodingType: this.camera.EncodingType.JPEG,\n          mediaType: this.camera.MediaType.PICTURE\n        };\n        const tempImage = yield this.camera.getPicture(options);\n        const tempFilename = tempImage.substr(tempImage.lastIndexOf('/') + 1);\n        const tempBaseFilesystemPath = tempImage.substr(0, tempImage.lastIndexOf('/') + 1);\n        const newBaseFilesystemPath = this.file.dataDirectory;\n        yield this.file.copyFile(tempBaseFilesystemPath, tempFilename, newBaseFilesystemPath, tempFilename);\n        const storedPhoto = newBaseFilesystemPath + tempFilename;\n        const displayImage = this.win.ionic.webview.convertFileSrc(storedPhoto);\n      });\n    }\n\n    selectImage(obj) {\n      return __awaiter(this, void 0, void 0, function* () {\n        console.log('selectImage cordova');\n        this.currentObj = obj;\n        const actionSheet = yield this.actionSheetController.create({\n          header: \"Select Image source\",\n          buttons: [{\n            text: 'Load from Library',\n            handler: () => {\n              this.pickImage(this.camera.PictureSourceType.PHOTOLIBRARY);\n            }\n          }, {\n            text: 'Use Camera',\n            handler: () => {\n              this.pickImage(this.camera.PictureSourceType.CAMERA);\n            }\n          }, {\n            text: 'Cancel',\n            role: 'cancel'\n          }]\n        });\n        yield actionSheet.present();\n      });\n    }\n\n    openSelectImageOpt(obj) {\n      return __awaiter(this, void 0, void 0, function* () {\n        console.log('selectImage browser');\n        this.currentObj = obj;\n\n        if (this.showImgOption == false) {\n          this.showImgOption = true;\n          const modal = yield this.modalCtrl.create({\n            component: ModelCameraPage,\n            componentProps: {\n              data: this.registrationData\n            },\n            cssClass: 'my-custom-class'\n          });\n          modal.onDidDismiss().then(dataReturned => {\n            if (dataReturned !== null) {\n              this.UplaodData = dataReturned.data;\n              this.dataReturned = dataReturned.data.data; // this.currentObj.answer = this.dataReturned.data;\n\n              console.log(\" this.dataReturned:\", this.dataReturned); // this.userImg = this.dataReturned.data;\n\n              this.userImg = this.dataReturned.filebaseUrl;\n\n              if (this.userImg == undefined) {\n                this.userImg = '';\n              }\n\n              console.log(\"data:\", this.userImg); //alert('Modal Sent Data :'+ dataReturned);\n            } else {\n              this.userImg = '';\n            }\n          });\n          return yield modal.present();\n        } else {\n          this.showImgOption = false;\n        }\n      });\n    }\n\n  }\n\n  ProfileUploadPage.ɵfac = function ProfileUploadPage_Factory(t) {\n    return new (t || ProfileUploadPage)(i0.ɵɵdirectiveInject(i1.Camera), i0.ɵɵdirectiveInject(i2.ActionSheetController), i0.ɵɵdirectiveInject(i3.File), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(i4.Location), i0.ɵɵdirectiveInject(i5.Router), i0.ɵɵdirectiveInject(i2.Platform), i0.ɵɵdirectiveInject(i6.FilePath), i0.ɵɵdirectiveInject(i7.ApiService), i0.ɵɵdirectiveInject(i2.ModalController), i0.ɵɵdirectiveInject(i8.DataTransferService), i0.ɵɵdirectiveInject(i2.ToastController));\n  };\n\n  ProfileUploadPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProfileUploadPage,\n    selectors: [[\"app-profile-upload\"]],\n    decls: 35,\n    vars: 13,\n    consts: [[3, \"ngClass\"], [1, \"ion-justify-content-center\"], [\"size-xl\", \"6\", \"size-md\", \"8\", \"size-xs\", \"12\", 3, \"ngClass\"], [\"src\", \"assets/icon/Bandhan Logo.png\", 2, \"width\", \"150px\"], [1, \"col\"], [\"src\", \"assets/icon/abc.png\", 2, \"width\", \"130px\", \"text-align\", \"right\"], [\"size\", \"8\", 1, \"simple\"], [1, \"para\"], [\"size\", \"4\", 1, \"simple1\"], [1, \"para1\", 3, \"click\"], [3, \"size\"], [1, \"relativeDiv\"], [\"class\", \"profile_image centerData\", \"src\", \"assets/icon/Group 14078.png\", 4, \"ngIf\"], [\"class\", \"profile_image centerData dottedBorder userImageUpload\", 3, \"src\", 4, \"ngIf\"], [\"name\", \"add-circle\", \"tappable\", \"\", 1, \"plushIcon\", \"centerData\", 3, \"click\"], [1, \"ion-text-center\", 2, \"padding\", \"20px\"], [1, \"ionic_btn\", 3, \"disabled\", \"click\"], [\"src\", \"assets/icon/Design 1.png\", 1, \"banner_bg\"], [\"src\", \"assets/icon/Group 14078.png\", 1, \"profile_image\", \"centerData\"], [1, \"profile_image\", \"centerData\", \"dottedBorder\", \"userImageUpload\", 3, \"src\"]],\n    template: function ProfileUploadPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-content\", 0);\n        i0.ɵɵelementStart(1, \"ion-row\", 1);\n        i0.ɵɵelementStart(2, \"ion-col\", 2);\n        i0.ɵɵelementStart(3, \"ion-grid\");\n        i0.ɵɵelementStart(4, \"ion-row\");\n        i0.ɵɵelementStart(5, \"ion-col\");\n        i0.ɵɵelement(6, \"img\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"ion-col\", 4);\n        i0.ɵɵelement(8, \"img\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"ion-row\");\n        i0.ɵɵelementStart(11, \"ion-col\", 6);\n        i0.ɵɵelementStart(12, \"p\", 7);\n        i0.ɵɵtext(13, \"Upload Profile Picture\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"ion-col\", 8);\n        i0.ɵɵelementStart(15, \"p\", 9);\n        i0.ɵɵlistener(\"click\", function ProfileUploadPage_Template_p_click_15_listener() {\n          return ctx.skip();\n        });\n        i0.ɵɵtext(16, \"Skip\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"br\");\n        i0.ɵɵelement(18, \"br\");\n        i0.ɵɵelementStart(19, \"ion-row\");\n        i0.ɵɵelementStart(20, \"ion-col\", 10);\n        i0.ɵɵelementStart(21, \"div\", 11);\n        i0.ɵɵtemplate(22, ProfileUploadPage_img_22_Template, 1, 0, \"img\", 12);\n        i0.ɵɵtemplate(23, ProfileUploadPage_img_23_Template, 1, 1, \"img\", 13);\n        i0.ɵɵelementStart(24, \"ion-icon\", 14);\n        i0.ɵɵlistener(\"click\", function ProfileUploadPage_Template_ion_icon_click_24_listener() {\n          return ctx.openSelectImageOpt(\"img\");\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(25, \"br\");\n        i0.ɵɵelementStart(26, \"ion-row\");\n        i0.ɵɵelementStart(27, \"ion-col\", 15);\n        i0.ɵɵelementStart(28, \"ion-button\", 16);\n        i0.ɵɵlistener(\"click\", function ProfileUploadPage_Template_ion_button_click_28_listener() {\n          return ctx.next();\n        });\n        i0.ɵɵtext(29, \"Next\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(30, \"br\");\n        i0.ɵɵelement(31, \"br\");\n        i0.ɵɵelement(32, \"br\");\n        i0.ɵɵelementStart(33, \"div\", 0);\n        i0.ɵɵelement(34, \"img\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c0, ctx.platform.width() < 740));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(9, _c1, ctx.platform.width() > 740));\n        i0.ɵɵadvance(18);\n        i0.ɵɵproperty(\"size\", 12);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.userImg == \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.userImg != \"\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"disabled\", ctx.userImg == \"\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(11, _c2, ctx.platform.width() < 740));\n      }\n    },\n    directives: [i2.IonContent, i4.NgClass, i2.IonRow, i2.IonCol, i2.IonGrid, i4.NgIf, i2.IonIcon, i2.IonButton],\n    styles: [\".col[_ngcontent-%COMP%]{text-align:end}.para[_ngcontent-%COMP%]{font-weight:700}.para[_ngcontent-%COMP%], .para1[_ngcontent-%COMP%]{color:#b01d22}.para1[_ngcontent-%COMP%]{text-align:end}.profile[_ngcontent-%COMP%]{width:140px;height:150px;padding:15px;position:relative;border:dotted;border-radius:71px;border-color:#b01d22}.banner_bg[_ngcontent-%COMP%]{margin-top:-66px;left:0;width:100%;display:block}.profile_image[_ngcontent-%COMP%]{width:150px}.simple[_ngcontent-%COMP%]{padding:0 0 0 12px}.simple1[_ngcontent-%COMP%]{padding:0 8px 0 0}.plushIcon[_ngcontent-%COMP%]{margin-top:-21px;color:#b01d22;font-size:3rem;border:dotted;border-radius:30px}.userImageUpload[_ngcontent-%COMP%]{border-radius:50%;height:150px;border:3px dotted #b01d22;-o-object-fit:cover;object-fit:cover}.hiddenDiv[_ngcontent-%COMP%]{display:none!important}\"]\n  });\n  return ProfileUploadPage;\n})();","map":null,"metadata":{},"sourceType":"module"}