!function(){function o(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function e(o,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}(self.webpackChunkMehta=self.webpackChunkMehta||[]).push([[690],{40690:function(t,n,i){"use strict";i.r(n),i.d(n,{GeolocationPageModule:function(){return T}});var r=i(38583),c=i(90665),s=i(47823),a=i(12234),l=i(64762),u=i(56544),g=i(88720),d=i(87152),f=i(83046),p=i(14303),h=i(51532),Z=i(34255);function m(o,e){if(1&o&&(g.TgZ(0,"div"),g.TgZ(1,"ion-row"),g.TgZ(2,"ion-col"),g.TgZ(3,"p"),g._uU(4,"Your Location"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(5,"ion-row"),g.TgZ(6,"ion-col",18),g._UZ(7,"ion-icon",19),g.qZA(),g.TgZ(8,"ion-col",20),g._uU(9),g.qZA(),g.qZA(),g.qZA()),2&o){var t=g.oxw();g.xp6(9),g.Oqu(t.loc)}}var v,b,q=function(o){return{"content-bg":o}},w=function(o){return{boundary1:o}},A=function(o){return{banner:o}},_=[{path:"",component:(v=function(){function t(e,n,i,r,c,s,a,l,u){o(this,t),this.zone=e,this.geolocation=n,this.route=i,this.platform=r,this.nativeGeocoder=c,this.apiService=s,this.sendData=a,this.diagnostic=l,this.alertController=u,this.profileAddCustomer=this.sendData.alldata,this.profileAddCustomer?(this.requestID=this.profileAddCustomer.requestFor,this.requestIDPage=this.profileAddCustomer.requestPage):(this.requestID="",this.requestIDPage=""),r.ready().then(function(){console.log("Width: "+r.width()),console.log("Height: "+r.height())})}var n,i,r;return n=t,(i=[{key:"ngOnInit",value:function(){}},{key:"locationAlert",value:function(){this.alertController.create({message:"Enable Location from device settings",backdropDismiss:!1,buttons:[{text:"ok",handler:function(){console.log("Buy clicked")}}]}).then(function(o){o.present()})}},{key:"getLocationFun",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var e=this;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:this.platform.is("cordova")?this.diagnostic.isLocationEnabled().then(function(o){if(console.log("Location setting is enabled",o),!o)return console.log("The following error occurred: ",o),e.locationAlert(),!1;console.log("Location setting is "+(o?"enabled":"disabled")),console.log("The following enabled ",o),e.apiService.presentLoadingDefault(),e.zone.run(function(){return(0,l.mG)(e,void 0,void 0,regeneratorRuntime.mark(function o(){var e;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.loc="",console.log("curr_pos4"),o.next=3,this.geolocation.getCurrentPosition();case 3:e=o.sent,console.log("curr_pos",e.coords.latitude),console.log("curr_pos",e.coords.longitude),this.getGeoLocation(e.coords.latitude,e.coords.longitude);case 5:case"end":return o.stop()}},o,this)}))})}):(this.apiService.presentLoadingDefault(),this.zone.run(function(){return(0,l.mG)(e,void 0,void 0,regeneratorRuntime.mark(function o(){var e;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.loc="",console.log("curr_pos4"),o.next=3,this.geolocation.getCurrentPosition();case 3:e=o.sent,console.log("curr_pos",e.coords.latitude),console.log("curr_pos",e.coords.longitude),this.getGeoLocation(e.coords.latitude,e.coords.longitude);case 5:case"end":return o.stop()}},o,this)}))}));case 1:case"end":return o.stop()}},o,this)}))}},{key:"getGeoLocation",value:function(o,e,t){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i,r,c=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.apiService.presentLoadingClose(),!navigator.geolocation){n.next=11;break}return console.log("lat",o),console.log("lng",e),this.lat=o,this.lng=e,n.next=4,new google.maps.Geocoder;case 4:return i=n.sent,n.next=7,new google.maps.LatLng(o,e);case 7:return n.t0=n.sent,r={latLng:n.t0},n.next=11,i.geocode(r,function(o,e){if(console.log("main Array",o,e),e==google.maps.GeocoderStatus.OK){var n=o[0];c.userLocation=o[0],console.log("current Location",o[0]),console.log("loc: ",n.formatted_address),c.loc=n.formatted_address,c.zone.run(function(){null!=n&&(c.userCity=n.formatted_address,"reverseGeocode"===t&&(c.latLngResult=n.formatted_address))})}});case 11:case"end":return n.stop()}},n,this)}))}},{key:"reverseGeocode",value:function(o,e){var t=this;this.platform.is("cordova")?this.nativeGeocoder.reverseGeocode(o,e,{useLocale:!0,maxResults:5}).then(function(o){return t.userLocationFromLatLng=o[0]}).catch(function(o){return console.log(o)}):this.getGeoLocation(o,e,"reverseGeocode")}},{key:"forwardGeocode",value:function(o){var e=this;this.platform.is("cordova")?this.nativeGeocoder.forwardGeocode(o,{useLocale:!0,maxResults:5}).then(function(o){e.zone.run(function(){e.lat=o[0].latitude,e.lng=o[0].longitude})}).catch(function(o){return console.log(o)}):(new google.maps.Geocoder).geocode({address:o},function(o,t){t==google.maps.GeocoderStatus.OK?e.zone.run(function(){e.lat=o[0].geometry.location.lat(),e.lng=o[0].geometry.location.lng()}):alert("Error - "+o+" & Status - "+t)})}},{key:"next",value:function(){var o=this;this.zone.run(function(){o.apiService.apiCallWithLoginToken(u.n.geoLocationUrl,{latitude:o.lat,longitude:o.lng,location_dump:o.userLocation,request_for:o.requestID,request_page:o.requestIDPage}).subscribe(function(e){1==e.success?o.route.navigate(["/tabs"]):o.apiService.showToastMessage(e.message,"top",3e3,"redBg")},function(e){o.apiService.showToastMessage(JSON.stringify(e),"top",3e3,"redBg")})})}}])&&e(n.prototype,i),r&&e(n,r),t}(),v.\u0275fac=function(o){return new(o||v)(g.Y36(g.R0b),g.Y36(d.b),g.Y36(a.F0),g.Y36(s.t4),g.Y36(f.d),g.Y36(p.s),g.Y36(h.b),g.Y36(Z.R),g.Y36(s.Br))},v.\u0275cmp=g.Xpm({type:v,selectors:[["app-geolocation"]],decls:36,vars:11,consts:[[3,"ngClass"],[1,"ion-justify-content-center"],["size-xl","6","size-md","8","size-xs","12",3,"ngClass"],["src","assets/icon/logo.svg",2,"width","150px"],[1,"col"],["src","assets/icon/abc.png",2,"width","130px","text-align","right"],[1,"para"],[1,"dev"],["tappable","",3,"click"],[1,"geoBox"],["size","1",1,"autoMargin"],["name","locate-outline",1,"geoIcon"],["size","11",1,"autoMargin"],[1,"detect","ion-no-margin"],[4,"ngIf"],[1,"ion-text-center"],["tappable","",1,"ionic_btn",3,"disabled","click"],["src","assets/icon/Design 1.png",1,"banner_bg"],["size","1"],["name","location-outline"],["size","11"]],template:function(o,e){1&o&&(g.TgZ(0,"ion-content",0),g.TgZ(1,"ion-row",1),g.TgZ(2,"ion-col",2),g.TgZ(3,"ion-grid"),g.TgZ(4,"ion-row"),g.TgZ(5,"ion-col"),g._UZ(6,"img",3),g.qZA(),g.TgZ(7,"ion-col",4),g._UZ(8,"img",5),g.qZA(),g.qZA(),g.qZA(),g.TgZ(9,"ion-row"),g.TgZ(10,"ion-col"),g.TgZ(11,"p",6),g.TgZ(12,"b"),g._uU(13,"Geo Location"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(14,"ion-row"),g.TgZ(15,"ion-col"),g.TgZ(16,"p",7),g._uU(17,"Enable your device location "),g.qZA(),g.qZA(),g.qZA(),g.TgZ(18,"ion-row",8),g.NdJ("click",function(){return e.getLocationFun()}),g.TgZ(19,"ion-col"),g.TgZ(20,"ion-row",9),g.TgZ(21,"ion-col",10),g._UZ(22,"ion-icon",11),g.qZA(),g.TgZ(23,"ion-col",12),g.TgZ(24,"p",13),g._uU(25,"Detect my location"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.YNc(26,m,10,1,"div",14),g._UZ(27,"br"),g._UZ(28,"br"),g._UZ(29,"br"),g.TgZ(30,"div",0),g.TgZ(31,"ion-row"),g.TgZ(32,"ion-col",15),g.TgZ(33,"ion-button",16),g.NdJ("click",function(){return e.next()}),g._uU(34,"Next"),g.qZA(),g.qZA(),g.qZA(),g._UZ(35,"img",17),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&o&&(g.Q6J("ngClass",g.VKq(5,q,e.platform.width()<740)),g.xp6(2),g.Q6J("ngClass",g.VKq(7,w,e.platform.width()>740)),g.xp6(24),g.Q6J("ngIf",e.loc),g.xp6(4),g.Q6J("ngClass",g.VKq(9,A,e.platform.width()<740)),g.xp6(3),g.Q6J("disabled",!e.loc))},directives:[s.W2,r.mk,s.Nd,s.wI,s.jY,s.gu,r.O5,s.YG],styles:[".col[_ngcontent-%COMP%]{text-align:end}.para[_ngcontent-%COMP%]{margin-bottom:0;font-size:24px}.geoBox[_ngcontent-%COMP%]{border:1px solid var(--headerColor)}.geoIcon[_ngcontent-%COMP%]{font-size:20px}.detect[_ngcontent-%COMP%], .geoIcon[_ngcontent-%COMP%], .para[_ngcontent-%COMP%]{color:var(--headerColor)}.dev[_ngcontent-%COMP%]{font-size:19px}.banner_bg[_ngcontent-%COMP%]{left:0;width:100%;display:block;border-radius:10px}.blank[_ngcontent-%COMP%]{width:100%;height:100px}"]}),v)}],x=function(){var e=function e(){o(this,e)};return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[a.Bz.forChild(_)],a.Bz]}),e}(),T=((b=function e(){o(this,e)}).\u0275fac=function(o){return new(o||b)},b.\u0275mod=g.oAB({type:b}),b.\u0275inj=g.cJS({imports:[[r.ez,c.u5,s.Pc,x]]}),b)}}])}();