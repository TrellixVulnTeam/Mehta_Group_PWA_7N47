(self.webpackChunkMehta=self.webpackChunkMehta||[]).push([[6162],{68539:function(t,i,n){"use strict";n.r(i),n.d(i,{PurchasehistoryPageModule:function(){return T}});var e=n(38583),o=n(90665),s=n(47823),a=n(12234),r=n(64762),c=n(56544),l=n(88720),u=n(51532),p=n(21511),g=n(14303);function h(t,i){if(1&t){const t=l.EpF();l.TgZ(0,"ion-back-button",9),l.NdJ("click",function(){return l.CHM(t),l.oxw().hometab()}),l.qZA()}}function d(t,i){if(1&t){const t=l.EpF();l.TgZ(0,"ion-back-button",9),l.NdJ("click",function(){return l.CHM(t),l.oxw().goBack()}),l.qZA()}}function f(t,i){if(1&t){const t=l.EpF();l.TgZ(0,"ion-back-button",9),l.NdJ("click",function(){return l.CHM(t),l.oxw().close()}),l.qZA()}}function m(t,i){if(1&t){const t=l.EpF();l.TgZ(0,"ion-back-button",9),l.NdJ("click",function(){return l.CHM(t),l.oxw().back()}),l.qZA()}}function _(t,i){if(1&t){const t=l.EpF();l.TgZ(0,"p",15),l._uU(1),l.TgZ(2,"span",9),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit;return l.oxw().copy(null==i?null:i.tracking_val)}),l._uU(3),l._UZ(4,"ion-icon",19),l.qZA(),l.qZA()}if(2&t){const t=l.oxw().$implicit;l.xp6(1),l.hij("",null==t?null:t.tracking_id," "),l.xp6(2),l.Oqu(null==t?null:t.tracking_val)}}function b(t,i){if(1&t&&l._UZ(0,"p",20),2&t){const t=l.oxw().$implicit;l.Q6J("innerHTML",null==t?null:t.tracking_url,l.oJD)}}function Z(t,i){if(1&t){const t=l.EpF();l.TgZ(0,"ion-col",21),l.TgZ(1,"ion-button",22),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit;return l.oxw().modalcall(i)}),l._uU(2),l.qZA(),l.qZA()}if(2&t){const t=l.oxw().$implicit;l.Q6J("size",4),l.xp6(2),l.Oqu(t.button_text)}}function x(t,i){if(1&t&&(l.TgZ(0,"ion-row",10),l.TgZ(1,"ion-col",11),l._UZ(2,"img",12),l.qZA(),l.TgZ(3,"ion-col",13),l.TgZ(4,"p",14),l._uU(5),l.qZA(),l.TgZ(6,"p",15),l._uU(7),l.qZA(),l.TgZ(8,"p",15),l._uU(9),l.qZA(),l.TgZ(10,"p",15),l._uU(11),l.qZA(),l.TgZ(12,"p",15),l._uU(13),l.qZA(),l.YNc(14,_,5,2,"p",16),l.YNc(15,b,1,1,"p",17),l.qZA(),l.YNc(16,Z,3,2,"ion-col",18),l.qZA()),2&t){const t=i.$implicit;l.xp6(1),l.Q6J("size",3),l.xp6(1),l.Q6J("src",t.media,l.LSH),l.xp6(1),l.Q6J("size",5),l.xp6(2),l.Oqu(t.goods_name),l.xp6(2),l.Oqu(null==t?null:t.order_txt),l.xp6(2),l.AsE("",null==t?null:t.quantity_str,": ",null==t?null:t.product_quantity,""),l.xp6(2),l.AsE("",null==t?null:t.point_str,": ",null==t?null:t.product_points,""),l.xp6(2),l.AsE("",null==t?null:t.sts_str,": ",t.status,""),l.xp6(1),l.Q6J("ngIf",""!=(null==t?null:t.tracking_val)),l.xp6(1),l.Q6J("ngIf",""!=(null==t?null:t.tracking_url)),l.xp6(1),l.Q6J("ngIf","true"==(null==t?null:t.button_applicable))}}function v(t,i){if(1&t&&(l.TgZ(0,"div"),l._UZ(1,"img",23),l.qZA()),2&t){const t=l.oxw();l.xp6(1),l.Q6J("src",t.errorImage,l.LSH)}}function k(t,i){if(1&t&&(l.TgZ(0,"div"),l.TgZ(1,"p",24),l._uU(2),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(2),l.Oqu(t.errorMessage)}}function q(t,i){if(1&t){const t=l.EpF();l.TgZ(0,"ion-infinite-scroll",25),l.NdJ("ionInfinite",function(i){return l.CHM(t),l.oxw().loadData(i)}),l._UZ(1,"ion-infinite-scroll-content",26),l.qZA()}}const z=[{path:"",component:(()=>{class t{constructor(t,i,n,e,o,s,a){this.router=t,this.sendData=i,this.route=n,this._clipboardService=e,this.location=o,this.apiService=s,this.zone=a,this.arrr=[],this.value=0,this.infiniteScroll_call=!1,this.allocationData=this.sendData.alldata,console.log("all locationData==",this.allocationData),this.arrr=[],this.value=0,this.backKey=this.sendData.alldata.backKey,console.log("back button key==",this.backKey)}ngOnInit(){this.purchaseHIst(null)}copy(t){this._clipboardService.copy(t),this.apiService.showToastMessage("Copied","top",3e3,"greenBg")}close(){this.zone.run(()=>(0,r.mG)(this,void 0,void 0,function*(){this.route.navigate(["./customer-details"])}))}hometab(){this.zone.run(()=>(0,r.mG)(this,void 0,void 0,function*(){this.route.navigate(["./tabs/home"])}))}goBack(){this.zone.run(()=>(0,r.mG)(this,void 0,void 0,function*(){this.location.back()}))}modalcall(t){console.log("itemss: ",t),this.zone.run(()=>(0,r.mG)(this,void 0,void 0,function*(){this.sendData.itemDetails={auto_id:t.product_id,request_page:this.allocationData.employee_type,request_for:this.allocationData.customer_id},""==this.allocationData.customer_id?(this.sendData.redeem_for="self",this.sendData.cart_request="dealer"):(this.sendData.redeem_for="other",this.sendData.cart_request="customer"),console.log("798:",this.sendData.itemDetails),this.sendData.page_request_type="detail",this.router.navigate(["/itemdetail"])}))}purchaseHIst(t){null==t&&this.apiService.presentLoadingDefault(),this.apiService.presentLoadingDefault(),this.zone.run(()=>(0,r.mG)(this,void 0,void 0,function*(){this.apiService.apiCallWithLoginToken(c.n.PurchaseHistoryUrl,{value:this.value,request_page:this.allocationData.request_page,request_for:this.allocationData.customer_id}).subscribe(i=>{null==t?this.apiService.presentLoadingClose():t.target.complete(),this.apiService.presentLoadingClose(),this.title=i.page_title,1==i.success||"1"==i.success?(this.arrr=null==this.arrr?i.data:this.arrr.concat(i.data),this.errorMessage="",this.errorImage=""):0==this.value?this.errorImage=i.noDataImage:this.errorMessage=i.message,1==this.infiniteScroll_call&&this.stopInfiniteScroll()},t=>{this.apiService.showToastMessage(JSON.stringify(t),"top",3e3,"redBg"),1==this.infiniteScroll_call&&this.stopInfiniteScroll()})}))}doRefresh(t){console.log("Begin async operation"),this.purchaseHIst(t)}back(){return(0,r.mG)(this,void 0,void 0,function*(){this.zone.run(()=>(0,r.mG)(this,void 0,void 0,function*(){""!=this.allocationData.customer_id?(this.sendData.alldata={customer_id:this.allocationData.customer_id,employee_type:this.allocationData.employee_type},this.router.navigateByUrl("/pointsgiftlist",{replaceUrl:!0})):(this.sendData.alldata={customer_id:"",employee_type:""},this.router.navigateByUrl("/pointsgiftlist",{replaceUrl:!0}))}))})}loadData(t){this.infiniteScroll_call=!0,this.infiniteScroll_val=t,setTimeout(()=>{this.value=this.arrr.length,this.purchaseHIst(null)},500)}stopInfiniteScroll(){1==this.infiniteScroll_call&&(this.infiniteScroll_call=!1,this.infiniteScroll_val.target.complete())}}return t.\u0275fac=function(i){return new(i||t)(l.Y36(a.F0),l.Y36(u.b),l.Y36(a.F0),l.Y36(p.Yv),l.Y36(e.Ye),l.Y36(g.s),l.Y36(l.R0b))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-purchasehistory"]],decls:19,vars:10,consts:[["slot","start"],["tappable","",3,"click",4,"ngIf"],[1,"ion-padding"],["slot","fixed",3,"ionRefresh"],["sizexs","12","size-md","8","size-lg","8","push-md","2","push-lg","2",1,"whiteCol","ion-no-padding",3,"size"],[1,"underLineBorder"],["class","borderBtmDiv",4,"ngFor","ngForOf"],[4,"ngIf"],["threshold","100px",3,"ionInfinite",4,"ngIf"],["tappable","",3,"click"],[1,"borderBtmDiv"],["sizexs","3","size-md","3","size-lg","3",3,"size"],["onerror","this.src='assets/watermark/watermark.png'",1,"imgcss",3,"src"],["sizexs","5","size-md","7","size-lg","7",1,"autoMargin",3,"size"],[1,"para","bo"],[1,"para"],["class","para",4,"ngIf"],["class","para","style","white-space: nowrap;",3,"innerHTML",4,"ngIf"],["sizexs","4","size-md","2","size-lg","2","class","autoMargin ion-text-center",3,"size",4,"ngIf"],["name","copy-outline"],[1,"para",2,"white-space","nowrap",3,"innerHTML"],["sizexs","4","size-md","2","size-lg","2",1,"autoMargin","ion-text-center",3,"size"],["tappable","","color","danger",1,"ionic_btn",2,"width","92%","font-size","12px",3,"click"],[3,"src"],[1,"ion-text-center"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."]],template:function(t,i){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-title"),l._uU(3),l.qZA(),l.TgZ(4,"ion-buttons",0),l.YNc(5,h,1,0,"ion-back-button",1),l.YNc(6,d,1,0,"ion-back-button",1),l.YNc(7,f,1,0,"ion-back-button",1),l.YNc(8,m,1,0,"ion-back-button",1),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"ion-content",2),l.TgZ(10,"ion-refresher",3),l.NdJ("ionRefresh",function(t){return i.doRefresh(t)}),l._UZ(11,"ion-refresher-content"),l.qZA(),l.TgZ(12,"ion-row"),l.TgZ(13,"ion-col",4),l._UZ(14,"div",5),l.YNc(15,x,17,14,"ion-row",6),l.YNc(16,v,2,1,"div",7),l.qZA(),l.qZA(),l.YNc(17,k,3,1,"div",7),l.YNc(18,q,2,0,"ion-infinite-scroll",8),l.qZA()),2&t&&(l.xp6(3),l.Oqu(i.title),l.xp6(2),l.Q6J("ngIf","home"==i.backKey),l.xp6(1),l.Q6J("ngIf","back2"==i.backKey),l.xp6(1),l.Q6J("ngIf","back1"==i.backKey),l.xp6(1),l.Q6J("ngIf","back"==i.backKey),l.xp6(5),l.Q6J("size",12),l.xp6(2),l.Q6J("ngForOf",i.arrr),l.xp6(1),l.Q6J("ngIf",""!=i.errorImage),l.xp6(1),l.Q6J("ngIf",""!=i.errorMessage),l.xp6(1),l.Q6J("ngIf",""==i.errorMessage))},directives:[s.Gu,s.sr,s.wd,s.Sm,e.O5,s.W2,s.nJ,s.Wo,s.Nd,s.wI,e.sg,s.oU,s.cs,s.gu,s.YG,s.ju,s.MB],styles:[".para[_ngcontent-%COMP%]{margin-top:3px;margin-bottom:3px;font-size:14px;-webkit-user-select:auto}.imgcss[_ngcontent-%COMP%]{height:100px;width:100%;-o-object-fit:contain;object-fit:contain}.purch[_ngcontent-%COMP%]{color:red;font-size:14px;padding-left:10px}.bo[_ngcontent-%COMP%], .purch[_ngcontent-%COMP%]{font-weight:700}.bgWalletImage[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:cover;padding:5px;background-position:50%}"]}),t})()}];let w=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[a.Bz.forChild(z)],a.Bz]}),t})(),T=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[e.ez,o.u5,s.Pc,w]]}),t})()}}]);