!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(self.webpackChunkMehta=self.webpackChunkMehta||[]).push([[3714],{43714:function(i,n,o){"use strict";o.r(n),o.d(n,{BuyitemPageModule:function(){return J}});var s=o(38583),a=o(90665),r=o(47823),c=o(12234),l=o(64762),u=o(26023),d=o(56544),p=o(88720),g=o(51532),h=o(14303);function m(e,t){if(1&e&&(p.TgZ(0,"ion-row"),p.TgZ(1,"ion-col",9),p.TgZ(2,"p",10),p._uU(3),p.qZA(),p.qZA(),p.qZA()),2&e){var i=p.oxw();p.xp6(1),p.Q6J("size",12),p.xp6(2),p.Oqu(null==i.addres||null==i.addres.data?null:i.addres.data.title)}}function f(e,t){if(1&e&&(p.TgZ(0,"ion-col",9),p.TgZ(1,"p",12),p._uU(2),p.qZA(),p.TgZ(3,"p",12),p._uU(4),p.qZA(),p.TgZ(5,"p",12),p._uU(6),p.qZA(),p._UZ(7,"br"),p.qZA()),2&e){var i=p.oxw().$implicit;p.Q6J("size",12),p.xp6(2),p.Oqu(null==i?null:i.address_line1),p.xp6(2),p.Oqu(null==i?null:i.address_line2),p.xp6(2),p.AsE("",null==i?null:i.city,"-",null==i?null:i.pin_code,"")}}function _(e,t){if(1&e&&(p.TgZ(0,"ion-row"),p.YNc(1,f,8,5,"ion-col",11),p.qZA()),2&e){var i=t.$implicit;p.xp6(1),p.Q6J("ngIf","1"==(null==i?null:i.is_primary))}}function v(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"div",7),p.TgZ(1,"ion-button",13),p.NdJ("click",function(){return p.CHM(i),p.oxw().changeAddress()}),p._uU(2),p.qZA(),p._UZ(3,"br"),p.qZA()}if(2&e){var n=p.oxw();p.xp6(2),p.Oqu(null==n.addres||null==n.addres.data?null:n.addres.data.btn_text)}}function x(e,t){1&e&&(p.TgZ(0,"ion-row"),p.TgZ(1,"ion-col",14),p.TgZ(2,"p",10),p._uU(3,"Item purchased"),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(1),p.Q6J("size",12))}function Z(e,t){if(1&e&&(p.TgZ(0,"ion-row"),p.TgZ(1,"ion-col",7),p.TgZ(2,"h5",15),p._uU(3),p.qZA(),p.qZA(),p.qZA()),2&e){var i=p.oxw();p.xp6(3),p.Oqu(i.msg)}}function q(e,t){if(1&e&&(p.TgZ(0,"ion-col",20),p._UZ(1,"img",21),p.qZA()),2&e){var i=p.oxw().$implicit;p.Q6J("size",3),p.xp6(1),p.Q6J("src",null==i?null:i.good_image,p.LSH)}}function y(e,t){if(1&e&&(p.TgZ(0,"ion-col",22),p.TgZ(1,"p",12),p._uU(2),p.qZA(),p.TgZ(3,"p",12),p._uU(4),p.qZA(),p.qZA()),2&e){var i=p.oxw().$implicit;p.Q6J("size",5),p.xp6(2),p.Oqu(null==i?null:i.goods_name),p.xp6(2),p.Oqu(null==i?null:i.good_point)}}function b(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"ion-col",23),p.TgZ(1,"ion-row"),p.TgZ(2,"ion-col",24),p.TgZ(3,"div"),p.TgZ(4,"ion-icon",25),p.NdJ("click",function(){p.CHM(i);var e=p.oxw().$implicit;return p.oxw().minus(e)}),p.qZA(),p.qZA(),p.qZA(),p.TgZ(5,"ion-col",26),p.TgZ(6,"span",27),p._uU(7),p.qZA(),p.qZA(),p.TgZ(8,"ion-col",20),p.TgZ(9,"div"),p.TgZ(10,"ion-icon",28),p.NdJ("click",function(){p.CHM(i);var e=p.oxw().$implicit;return p.oxw().plus(e)}),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()}if(2&e){var n=p.oxw().$implicit;p.Q6J("size",4),p.xp6(2),p.Q6J("size",3),p.xp6(3),p.Q6J("size",6),p.xp6(2),p.Oqu(n.quantity),p.xp6(1),p.Q6J("size",3)}}function w(e,t){if(1&e&&(p.TgZ(0,"ion-row",16),p.YNc(1,q,2,2,"ion-col",17),p.YNc(2,y,5,3,"ion-col",18),p.YNc(3,b,11,5,"ion-col",19),p.qZA()),2&e){var i=p.oxw();p.xp6(1),p.Q6J("ngIf",""==i.msg),p.xp6(1),p.Q6J("ngIf",""==i.msg),p.xp6(1),p.Q6J("ngIf",""==i.msg)}}function z(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"ion-button",29),p.NdJ("click",function(){return p.CHM(i),p.oxw().doneUpdate()}),p._uU(1,"Done"),p.qZA()}}function A(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"ion-button",29),p.NdJ("click",function(){return p.CHM(i),p.oxw().modalcall()}),p._uU(1,"Buy"),p.qZA()}}var T,C,D=[{path:"",component:(T=function(){function i(t,n,o,s,a,r,c){e(this,i),this.modalCtrl=t,this.alertController=n,this.popoverController=o,this.sendData=s,this.route=a,this.apiService=r,this.zone=c,this.num=1,this.showDonebutt=0,this.cart_detail=[]}var n,o,s;return n=i,(o=[{key:"ionViewWillEnter",value:function(){this.cart_req=this.sendData.cart_request,this.showAddress(),this.buyitem(this.item_details)}},{key:"ionViewWillLeave",value:function(){}},{key:"ngOnInit",value:function(){this.redeem_for=this.sendData.redeem_for,console.log("redeem_for",this.redeem_for),this.allocationData=this.sendData.alldata,this.item_details=this.sendData.itemDetails,console.log("this.allocationData",this.allocationData),console.log("this.item_details",this.item_details)}},{key:"minus",value:function(e){0!=e.quantity&&(e.quantity=JSON.parse(e.quantity),e.quantity=e.quantity-1,this.cart_req="buy",this.showDonebutt=1)}},{key:"plus",value:function(e){e.quantity=parseInt(e.quantity)+1,this.cart_req="buy",this.showDonebutt=1}},{key:"buyitem",value:function(e){var t=this;this.apiService.presentLoadingDefault(),this.zone.run(function(){return(0,l.mG)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var i,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i={request_page:"dealer",redeem_for:this.redeem_for,cart_request:this.cart_req,request_for:this.allocationData.customer_id,request_user_type:this.allocationData.employee_type,product_arr:[{product_id:e.product_id,count:e.quantity}]},console.log("item.product_id ,item.quantity ",e.quantity,e.quantity),this.apiService.apiCallWithLoginToken(d.n.CartUrl,i).subscribe(function(e){n.apiService.presentLoadingClose(),1==e.success?(n.cart_details=e.data,console.log("this is ",n.cart_details),n.msg=""):n.msg=e.message},function(e){n.apiService.presentLoadingClose(),n.apiService.showToastMessage(JSON.stringify(e),"top",3e3,"redBg")});case 2:case"end":return t.stop()}},t,this)}))})}},{key:"itemDetailsShow",value:function(){var e=this;this.zone.run(function(){return(0,l.mG)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.apiService.apiCallWithLoginToken(d.n.ProductDetailUrl,{request_page:"dealer",redeem_for:this.redeem_for,product_id:this.item_details.auto_id,page_request_type:this.sendData.page_request_type}).subscribe(function(e){t.temparray=e.data,1==e.success||t.apiService.showToastMessage(e.message,"top",3e3,"redBg")},function(e){t.apiService.showToastMessage(JSON.stringify(e),"top",3e3,"redBg")});case 1:case"end":return e.stop()}},e,this)}))})}},{key:"modalcall",value:function(){this.sendData.cartDetails=this.cart_details,console.log(" this.cart_details",this.cart_detail),0!=this.addres.data.data.length?(this.sendData.address_id=this.addres.data.data[0].auto_id,this.presentAlertConfirm()):this.apiService.showToastMessage("Address is Required","top",2e3,"redBg")}},{key:"callModal",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:u.f,cssClass:"my-custom-class"});case 2:return(t=e.sent).onDidDismiss().then(function(e){console.log("data returned after dismiss modal==",e),null!==e&&i.route.navigate(["/purchasehistory"])}),this.sendData.alldata={request_for:this.allocationData.customer_id,request_user_type:this.allocationData.employee_type},this.sendData.item=this.redeem_for,e.next=8,t.present();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}))}},{key:"presentAlertConfirm",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"my-custom-class",message:"Are you sure, you want to buy?",buttons:[{text:"No",role:"cancel",cssClass:"secondary",handler:function(e){console.log("Confirm Cancel: blah")}},{text:"Yes",handler:function(){i.callModal(),console.log("Confirm Okay")}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"showAddress",value:function(){var e=this;this.apiService.presentLoadingDefault(),this.zone.run(function(){e.apiService.apiCallWithLoginToken(d.n.AddressUrl,{address_fetch_type:"deliver",redeem_for:e.redeem_for,request_page:"dealer",request_for:e.allocationData.customer_id,request_user_type:e.allocationData.employee_type}).subscribe(function(t){console.log("AddressUrl: ",t),e.apiService.presentLoadingClose(),e.addres=t},function(t){e.apiService.presentLoadingClose(),e.apiService.showToastMessage(JSON.stringify(t),"top",3e3,"redBg")})})}},{key:"changeAddress",value:function(){""==this.allocationData.customer_id?(this.sendData.alldata={customer_id:"",request_page:this.redeem_for,employee_type:""},this.route.navigate(["/change-address"])):(this.sendData.alldata={customer_id:this.allocationData.customer_id,request_page:this.redeem_for,employee_type:this.allocationData.employee_type},this.route.navigate(["/change-address"]))}},{key:"doneUpdate",value:function(){var e=this;this.apiService.presentLoadingDefault(),this.cart_detail=[];for(var t=0;t<this.cart_details.length;t++)this.cart_details[t].count=this.cart_details[t].quantity,this.cart_detail.push(this.cart_details[t]);this.zone.run(function(){return(0,l.mG)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={request_page:"dealer",redeem_for:this.redeem_for,cart_request:this.cart_req,product_arr:this.cart_detail,request_for:this.allocationData.customer_id,request_user_type:this.allocationData.employee_type},console.log("apikey : ",t),console.log("product_arr:",this.cart_detail),this.apiService.apiCallWithLoginToken(d.n.CartUrl,t).subscribe(function(e){i.apiService.presentLoadingClose(),1==e.success?(i.showDonebutt=0,i.cart_details=e.data,i.msg=""):(i.msg=e.message,i.cart_details=[])},function(e){i.apiService.presentLoadingClose(),i.apiService.showToastMessage(JSON.stringify(e),"top",3e3,"redBg")});case 2:case"end":return e.stop()}},e,this)}))})}}])&&t(n.prototype,o),s&&t(n,s),i}(),T.\u0275fac=function(e){return new(e||T)(p.Y36(r.IN),p.Y36(r.Br),p.Y36(r.Dh),p.Y36(g.b),p.Y36(c.F0),p.Y36(h.s),p.Y36(p.R0b))},T.\u0275cmp=p.Xpm({type:T,selectors:[["app-buyitem"]],decls:22,vars:9,consts:[["slot","start"],[1,"ion-padding"],["sizexs","12","size-md","8","size-lg","8","push-md","2","push-lg","2",1,"whiteCol","ion-no-padding",3,"size"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","ion-text-center",4,"ngIf"],["class","brbottom",4,"ngFor","ngForOf"],[1,"ion-text-center"],["class","ionic_btn",3,"click",4,"ngIf"],["sizexs","12","size-md","12","size-lg","12",1,"brbottom",3,"size"],[1,"para"],["sizexs","12","size-md","12","size-lg","12","class","brbottom",3,"size",4,"ngIf"],[1,"para1"],[1,"ionic_btnic",3,"click"],["size-xs","12","size-md","12","size-lg","12",1,"brbottom",3,"size"],[1,"no-margin",2,"color","#B01D22"],[1,"brbottom"],["sizexs","3","size-md","3","size-lg","3",3,"size",4,"ngIf"],["sizexs","5","size-md","5","size-lg","5",3,"size",4,"ngIf"],["sizexs","4","size-md","4","size-lg","4","class","mrauto",3,"size",4,"ngIf"],["sizexs","3","size-md","3","size-lg","3",3,"size"],["onerror","this.src='assets/watermark/watermark.png'",1,"imgcss",3,"src"],["sizexs","5","size-md","5","size-lg","5",3,"size"],["sizexs","4","size-md","4","size-lg","4",1,"mrauto",3,"size"],["sizexs","3","size-md","3","size-lg","3",1,"txtend",3,"size"],["name","remove-outline",2,"color","red",3,"click"],["sizexs","6","size-md","3","size-lg","3",1,"ion-text-center",3,"size"],[1,"numcss"],["name","add-outline","tappable","",2,"color","red",3,"click"],[1,"ionic_btn",3,"click"]],template:function(e,t){1&e&&(p.TgZ(0,"ion-header"),p.TgZ(1,"ion-toolbar"),p.TgZ(2,"ion-title"),p._uU(3,"Redeem"),p.qZA(),p.TgZ(4,"ion-buttons",0),p._UZ(5,"ion-back-button"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(6,"ion-content",1),p.TgZ(7,"ion-row"),p.TgZ(8,"ion-col",2),p.YNc(9,m,4,2,"ion-row",3),p.YNc(10,_,2,1,"ion-row",4),p._UZ(11,"br"),p.YNc(12,v,4,1,"div",5),p.YNc(13,x,4,1,"ion-row",3),p.YNc(14,Z,4,1,"ion-row",3),p.YNc(15,w,4,3,"ion-row",6),p._UZ(16,"br"),p._UZ(17,"br"),p.TgZ(18,"div",7),p.YNc(19,z,2,0,"ion-button",8),p.YNc(20,A,2,0,"ion-button",8),p.qZA(),p._UZ(21,"br"),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(8),p.Q6J("size",12),p.xp6(1),p.Q6J("ngIf",""!=(null==t.addres||null==t.addres.data?null:t.addres.data.title)),p.xp6(1),p.Q6J("ngForOf",null==t.addres||null==t.addres.data?null:t.addres.data.data),p.xp6(2),p.Q6J("ngIf",1==(null==t.addres||null==t.addres.data?null:t.addres.data.show_btn)),p.xp6(1),p.Q6J("ngIf",(null==t.cart_details?null:t.cart_details.length)>0),p.xp6(1),p.Q6J("ngIf",t.msg),p.xp6(1),p.Q6J("ngForOf",t.cart_details),p.xp6(4),p.Q6J("ngIf",1==t.showDonebutt&&!t.msg),p.xp6(1),p.Q6J("ngIf",0==t.showDonebutt&&!t.msg))},directives:[r.Gu,r.sr,r.wd,r.Sm,r.oU,r.cs,r.W2,r.Nd,r.wI,s.O5,s.sg,r.YG,r.gu],styles:[".para[_ngcontent-%COMP%]{color:red;font-weight:700}.para[_ngcontent-%COMP%], .para1[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:4px}.para1[_ngcontent-%COMP%]{font-size:12px}.para2[_ngcontent-%COMP%]{font-size:16px;color:red;margin-top:4px;margin-bottom:4px}.brbottom[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3}.numcss[_ngcontent-%COMP%]{border:1px solid red;border-radius:10px;text-align:center;font-size:14px;padding:1px 15px}.txtend[_ngcontent-%COMP%]{text-align:end}.mrauto[_ngcontent-%COMP%]{margin:auto}.ionic_btnic[_ngcontent-%COMP%]{--background:var(--headerColor);--border-radius:14px;width:auto;text-transform:capitalize;height:30px;font-size:14px}"]}),T)}],k=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[c.Bz.forChild(D)],c.Bz]}),t}(),J=((C=function t(){e(this,t)}).\u0275fac=function(e){return new(e||C)},C.\u0275mod=p.oAB({type:C}),C.\u0275inj=p.cJS({imports:[[s.ez,a.u5,r.Pc,k]]}),C)}}])}();