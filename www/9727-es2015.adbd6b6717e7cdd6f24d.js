(self.webpackChunkMehta=self.webpackChunkMehta||[]).push([[9727],{99727:function(t,n,i){"use strict";i.r(n),i.d(n,{CustomerAllocationPageModule:function(){return T}});var e=i(38583),o=i(90665),l=i(47823),a=i(12234),r=i(64762),s=i(56544),c=i(88720),u=i(14303),p=i(51532);function d(t,n){if(1&t){const t=c.EpF();c.TgZ(0,"ion-button",16),c.NdJ("click",function(){c.CHM(t);const n=c.oxw();return n.addCustomer(null==n.customerData||null==n.customerData.header_arr?null:n.customerData.header_arr.first_div)}),c._uU(1),c.qZA()}if(2&t){const t=c.oxw();c.xp6(1),c.hij(" ",null==t.customerData||null==t.customerData.header_arr||null==t.customerData.header_arr.first_div?null:t.customerData.header_arr.first_div.button_text,"")}}const g=function(t){return{widthtotalDiv:t}};function f(t,n){if(1&t){const t=c.EpF();c.TgZ(0,"ion-button",17),c.NdJ("click",function(){return c.CHM(t),c.oxw().transectionHistory()}),c._uU(1),c.qZA()}if(2&t){const t=c.oxw();c.Q6J("ngClass",c.VKq(2,g,null==t.platform?null:t.platform.is("mobile"))),c.xp6(1),c.Oqu(null==t.customerData||null==t.customerData.header_arr||null==t.customerData.header_arr.second_div?null:t.customerData.header_arr.second_div.button_text)}}function m(t,n){if(1&t&&c._UZ(0,"p",21),2&t){const t=c.oxw().$implicit;c.Q6J("innerHTML",null==t?null:t.remaining_points,c.oJD)}}function h(t,n){if(1&t){const t=c.EpF();c.TgZ(0,"ion-button",28),c.NdJ("click",function(){c.CHM(t);const n=c.oxw(2).$implicit;return c.oxw().view(n)}),c._uU(1),c.qZA()}if(2&t){const t=c.oxw(2).$implicit;c.xp6(1),c.Oqu(null==t?null:t.view_profile_btn)}}function _(t,n){if(1&t&&(c.TgZ(0,"ion-col",26),c.YNc(1,h,2,1,"ion-button",27),c.qZA()),2&t){const t=c.oxw().$implicit;c.xp6(1),c.Q6J("ngIf","1"==(null==t?null:t.view_profile_btn_applicable))}}function x(t,n){if(1&t){const t=c.EpF();c.TgZ(0,"ion-button",28),c.NdJ("click",function(){c.CHM(t);const n=c.oxw(2).$implicit;return c.oxw().allocated(n)}),c._uU(1),c.qZA()}if(2&t){const t=c.oxw(2).$implicit;c.xp6(1),c.Oqu(null==t?null:t.allocate_btn)}}function v(t,n){if(1&t&&(c.TgZ(0,"ion-col",26),c.YNc(1,x,2,1,"ion-button",27),c.qZA()),2&t){const t=c.oxw().$implicit;c.xp6(1),c.Q6J("ngIf","1"==(null==t?null:t.allocate_btn_applicable))}}function b(t,n){if(1&t){const t=c.EpF();c.TgZ(0,"ion-button",31),c.NdJ("click",function(){c.CHM(t);const n=c.oxw(2).$implicit;return c.oxw().view(n)}),c._uU(1),c.qZA()}if(2&t){const t=c.oxw(2).$implicit;c.xp6(1),c.Oqu(null==t?null:t.view_profile_btn)}}function D(t,n){if(1&t){const t=c.EpF();c.TgZ(0,"ion-button",31),c.NdJ("click",function(){c.CHM(t);const n=c.oxw(2).$implicit;return c.oxw().allocated(n)}),c._uU(1),c.qZA()}if(2&t){const t=c.oxw(2).$implicit;c.xp6(1),c.Oqu(null==t?null:t.allocate_btn)}}function Z(t,n){if(1&t&&(c.TgZ(0,"ion-col",29),c.YNc(1,b,2,1,"ion-button",30),c.YNc(2,D,2,1,"ion-button",30),c.qZA()),2&t){const t=c.oxw().$implicit;c.Q6J("size",4),c.xp6(1),c.Q6J("ngIf","1"==(null==t?null:t.view_profile_btn_applicable)),c.xp6(1),c.Q6J("ngIf","1"==(null==t?null:t.allocate_btn_applicable))}}function w(t,n){if(1&t&&(c.TgZ(0,"ion-row",18),c.TgZ(1,"ion-col",19),c._UZ(2,"img",20),c.qZA(),c.TgZ(3,"ion-col",4),c._UZ(4,"p",21),c._UZ(5,"p",21),c.TgZ(6,"p",22),c._uU(7),c.qZA(),c.YNc(8,m,1,1,"p",23),c.qZA(),c.YNc(9,_,2,1,"ion-col",24),c.YNc(10,v,2,1,"ion-col",24),c.YNc(11,Z,3,3,"ion-col",25),c.qZA()),2&t){const t=n.$implicit,i=c.oxw();c.xp6(1),c.Q6J("size",2),c.xp6(1),c.Q6J("src",null==t?null:t.user_image,c.LSH),c.xp6(1),c.Q6J("size",6),c.xp6(1),c.Q6J("innerHTML",null==t?null:t.full_name,c.oJD),c.xp6(1),c.Q6J("innerHTML",null==t?null:t.contact,c.oJD),c.xp6(2),c.AsE("",null==t?null:t.registration_sts,"",null==t?null:t.user_registration_status,""),c.xp6(1),c.Q6J("ngIf",""!=(null==t?null:t.remaining_points)),c.xp6(1),c.Q6J("ngIf",!(null!=i.platform&&i.platform.is("mobile"))),c.xp6(1),c.Q6J("ngIf",!(null!=i.platform&&i.platform.is("mobile"))),c.xp6(1),c.Q6J("ngIf",null==i.platform?null:i.platform.is("mobile"))}}function C(t,n){if(1&t&&(c.TgZ(0,"div"),c.TgZ(1,"p",32),c._uU(2),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(2),c.Oqu(t.errorMessage)}}function z(t,n){if(1&t){const t=c.EpF();c.TgZ(0,"ion-infinite-scroll",33),c.NdJ("ionInfinite",function(n){return c.CHM(t),c.oxw().loadData(n)}),c._UZ(1,"ion-infinite-scroll-content",34),c.qZA()}}const M=[{path:"",component:(()=>{class t{constructor(t,n,i,e,o,l,a){this.zone=t,this.modalCtrl=n,this.alertController=i,this.apiService=e,this.router=o,this.platform=l,this.sendData=a,this.searchString="",this.userData=[],this.infiniteScroll_call=!1,this.value=0}ngOnInit(){}ionViewWillEnter(){this.value=0,this.userData=[],this.customerAllocation(this.searchString)}searchCustomer(t){console.log("ev",t),this.searchString=t.detail.value&&""!=t.detail.value?t.detail.value:"",console.log("ev",t),this.value=0,this.userData=[],this.customerAllocation(this.searchString)}customerAllocation(t){this.zone.run(()=>{let n={search_str:t,value:this.value};console.log("login data response",n),this.apiService.apiCallWithLoginToken(s.n.customerAllocationUrl,n).subscribe(t=>{console.log("login data response",t),this.customerData=t,1==t.success?(this.userData=null==this.userData?t.data:this.userData.concat(t.data),this.errorMessage=""):this.errorMessage=t.message,1==this.infiniteScroll_call&&this.stopInfiniteScroll()},t=>{this.apiService.showToastMessage(JSON.stringify(t),"top",3e3,"redBg"),1==this.infiniteScroll_call&&this.stopInfiniteScroll()})})}loadData(t){this.infiniteScroll_call=!0,this.infiniteScroll_val=t,setTimeout(()=>{this.value=this.userData.length,this.customerAllocation(this.searchString)},500)}stopInfiniteScroll(){1==this.infiniteScroll_call&&(this.infiniteScroll_call=!1,this.infiniteScroll_val.target.complete())}view(t){this.zone.run(()=>{this.sendData.alldata=t,this.sendData.myParam="customerCheck",this.router.navigate(["/customer-details"])})}allocated(t){this.zone.run(()=>{this.sendData.alldata=t,this.router.navigate(["/allocate-point-form"])})}transectionHistory(){this.zone.run(()=>{this.sendData.alldata={requestType:"dealer"},this.router.navigate(["./redemption-report"])})}addCustomer(t){return(0,r.mG)(this,void 0,void 0,function*(){this.zone.run(()=>{this.sendData.alldata=t,this.sendData.loginKey={type:"Register",requestPage:"dealer"},this.router.navigate(["/mobile"])})})}}return t.\u0275fac=function(n){return new(n||t)(c.Y36(c.R0b),c.Y36(l.IN),c.Y36(l.Br),c.Y36(u.s),c.Y36(a.F0),c.Y36(l.t4),c.Y36(p.b))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-customer-allocation"]],decls:21,vars:13,consts:[[1,"container1"],["size-sm","12","size-md","8","size-lg","8","push-lg","2","push-md","2",1,"whiteCol","ion-padding",3,"size"],[1,"fixedData"],[1,"customerPDiv",3,"innerHTML"],["size-sm","6","size-md","6","size-lg","6",3,"size"],[1,"act","ion-text-center"],[1,"ion-no-margin","fontTDiv",3,"innerHTML"],[1,"totalCount","ion-no-margin",3,"innerHTML"],["fill","outline","class","btnCustomer","shape","round","size","small","tappable","",3,"click",4,"ngIf"],["onerror","this.src='./assets/watermark/watermark.png'",1,"imgIcon",3,"src"],["tappable","","fill","outline","class","btnCustomer","shape","round","size","small",3,"ngClass","click",4,"ngIf"],[1,"borderBtmDiv","padd10"],["placeholder","Search Customer",3,"ngModel","ngModelChange","ionChange"],["class","borderBtmDiv",4,"ngFor","ngForOf"],[4,"ngIf"],["threshold","100px",3,"ionInfinite",4,"ngIf"],["fill","outline","shape","round","size","small","tappable","",1,"btnCustomer",3,"click"],["tappable","","fill","outline","shape","round","size","small",1,"btnCustomer",3,"ngClass","click"],[1,"borderBtmDiv"],["size-sm","2","size-md","2","size-lg","2",3,"size"],["onerror","this.src='./assets/watermark/watermark.png'",1,"userImageCss",3,"src"],[1,"ion-no-margin","fontDiv",3,"innerHTML"],[1,"ion-no-margin","fontDiv"],["class","ion-no-margin fontDiv",3,"innerHTML",4,"ngIf"],["size-md","2","size-lg","2","class","ion-text-center ion-no-padding autoMargin",4,"ngIf"],["size-sm","4","size-md","2","size-lg","2","class","ion-text-center ion-no-padding",3,"size",4,"ngIf"],["size-md","2","size-lg","2",1,"ion-text-center","ion-no-padding","autoMargin"],["class","viewButton","tappable","","size","small","color","danger",3,"click",4,"ngIf"],["tappable","","size","small","color","danger",1,"viewButton",3,"click"],["size-sm","4","size-md","2","size-lg","2",1,"ion-text-center","ion-no-padding",3,"size"],["class","viewButton widthtotalDiv","tappable","","color","danger","size","small",3,"click",4,"ngIf"],["tappable","","color","danger","size","small",1,"viewButton","widthtotalDiv",3,"click"],[1,"ion-text-center"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."]],template:function(t,n){1&t&&(c.TgZ(0,"ion-content"),c.TgZ(1,"div",0),c.TgZ(2,"ion-row"),c.TgZ(3,"ion-col",1),c.TgZ(4,"div",2),c._UZ(5,"p",3),c.TgZ(6,"ion-row"),c.TgZ(7,"ion-col",4),c.TgZ(8,"div",5),c._UZ(9,"p",6),c._UZ(10,"p",7),c.YNc(11,d,2,1,"ion-button",8),c.qZA(),c.qZA(),c.TgZ(12,"ion-col",4),c.TgZ(13,"div",5),c._UZ(14,"img",9),c.YNc(15,f,2,4,"ion-button",10),c.qZA(),c.qZA(),c.qZA(),c.TgZ(16,"div",11),c.TgZ(17,"ion-searchbar",12),c.NdJ("ngModelChange",function(t){return n.searchString=t})("ionChange",function(t){return n.searchCustomer(t)}),c.qZA(),c.qZA(),c.qZA(),c.YNc(18,w,12,11,"ion-row",13),c.qZA(),c.qZA(),c.YNc(19,C,3,1,"div",14),c.YNc(20,z,2,0,"ion-infinite-scroll",15),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.Q6J("size",12),c.xp6(2),c.Q6J("innerHTML",null==n.customerData?null:n.customerData.header_title,c.oJD),c.xp6(2),c.Q6J("size",6),c.xp6(2),c.Q6J("innerHTML",null==n.customerData||null==n.customerData.header_arr||null==n.customerData.header_arr.first_div?null:n.customerData.header_arr.first_div.title,c.oJD),c.xp6(1),c.Q6J("innerHTML",null==n.customerData||null==n.customerData.header_arr||null==n.customerData.header_arr.first_div?null:n.customerData.header_arr.first_div.total_customers,c.oJD),c.xp6(1),c.Q6J("ngIf",1==(null==n.customerData||null==n.customerData.header_arr||null==n.customerData.header_arr.first_div?null:n.customerData.header_arr.first_div.button_applicable)),c.xp6(1),c.Q6J("size",6),c.xp6(2),c.Q6J("src",null==n.customerData||null==n.customerData.header_arr||null==n.customerData.header_arr.second_div?null:n.customerData.header_arr.second_div.icon,c.LSH),c.xp6(1),c.Q6J("ngIf",1==(null==n.customerData||null==n.customerData.header_arr||null==n.customerData.header_arr.second_div?null:n.customerData.header_arr.second_div.button_applicable)),c.xp6(2),c.Q6J("ngModel",n.searchString),c.xp6(1),c.Q6J("ngForOf",n.userData),c.xp6(1),c.Q6J("ngIf",""!=n.errorMessage),c.xp6(1),c.Q6J("ngIf",""==n.errorMessage))},directives:[l.W2,l.Nd,l.wI,e.O5,l.VI,l.j9,o.JJ,o.On,e.sg,l.YG,e.mk,l.ju,l.MB],styles:[".act[_ngcontent-%COMP%]{background:linear-gradient(195deg,#bb2929 57%,var(--headerColor) 33%)!important;border-radius:8px;padding:10px;height:105px}.act[_ngcontent-%COMP%], .btnCustomer[_ngcontent-%COMP%]{text-transform:none;width:100%;color:#fff}.btnCustomer[_ngcontent-%COMP%]{font-size:12px;--border-color:#fff}.totalCount[_ngcontent-%COMP%]{font-weight:700;font-size:25px;letter-spacing:2px}.customerPDiv[_ngcontent-%COMP%]{color:var(--headerColor);margin-top:0}.imgIcon[_ngcontent-%COMP%]{height:40px;width:50px;-o-object-fit:contain;object-fit:contain;margin:auto;display:block}ion-icon[_ngcontent-%COMP%]{color:var(--headerColor);font-weight:700;font-size:20px}.viewButton[_ngcontent-%COMP%]{color:#fff;letter-spacing:0;text-transform:none}.userImageCss[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;-o-object-fit:cover;object-fit:cover;display:block;margin:auto}.fontDiv[_ngcontent-%COMP%]{font-size:13px;line-height:18px}ion-searchbar[_ngcontent-%COMP%]{--border-radius:20px;padding:2px;--box-shadow:0px 0px 7px 2px #d6d1d1}.padd10[_ngcontent-%COMP%]{padding:10px 0}.fontTDiv[_ngcontent-%COMP%]{font-size:16px}.container1[_ngcontent-%COMP%]{width:100%;margin:70px auto 0}"]}),t})()}];let J=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[a.Bz.forChild(M)],a.Bz]}),t})(),T=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[e.ez,o.u5,l.Pc,J]]}),t})()}}]);